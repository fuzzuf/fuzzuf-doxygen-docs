<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fuzzuf: v3.10.10 (2016-11-04)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fuzzuf
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">v3.10.10 (2016-11-04) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>See the discussion on <a href="https://github.com/npm/npm/issues/14042">#14042</a> for more context on this release, which is intended to address a serious regression in shrinkwrap behavior in the version of the CLI currently bundled with Node.js 6 LTS "Boron". You should never install this version directly; instead update to <code>npm@4</code>, which has everything in this release and more.</p>
<h3><a class="anchor" id="autotoc_md3826"></a>
REGRESSION FIX</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/9aebe982114ea2107f46baa1dcb11713b4aaad04"><code>9aebe98</code></a> <a href="https://github.com/npm/npm/pull/14117">#14117</a> Fixes a bug where installing a shrinkwrapped package would fail if the platform failed to install an optional dependency included in the shrinkwrap. (<a href="https://github.com/watilde">@watilde</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3827"></a>
UPDATE SUPPORT MATRIX</h3>
<p>With the advent of the second official Node.js LTS release, Node 6.x 'Boron', the Node.js project has now officially dropped versions 0.10 and 0.12 out of the maintenance phase of LTS. (Also, Node 5 was never part of LTS, and will see no further support now that Node 7 has been released.) As a small team with limited resources, the npm CLI team is following suit and dropping those versions of Node from its CI test matrix.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/c82ecfdbe0b5f318a175714a8753efe4dfd3e4b3"><code>c82ecfd</code></a> <a href="https://github.com/npm/npm/pull/14503">#14503</a> Node 6 is LTS; 5.x, 0.10, and 0.12 are unsupported. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3828"></a>
v3.10.9 (2016-10-06)</h2>
<p>Hi everyone! This is the last of our monthly releases. We're going to give an every-two-weeks schedule a try starting with our next release. We'll reevaluate in a quarter, but we suspect that will be what we'll stick with. You might be wondering <em>why</em> we've been fiddling with the release cadence? Well, we've been trying to tune it to to minimize the overhead for our little team.</p>
<p>This is ALSO the ULTIMATE release of <code>npm</code> version 3. That's right, in just two weeks' time (October 20th for you fans of calendar time), our dear <code>npm</code> will be hitting the big 4.0.</p>
<p><b>DON'T PANIC</b></p>
<p>This is gonna be a much, MUCH smaller major version than 3.x was. Maybe even smaller than 2.x was. I can't tell you everything that'll be in there just yet, but at the very least it's going to have what's in our <a href="https://github.com/npm/npm/pulls?q=is%3Aopen+is%3Apr+milestone%3A4.x">4.x milestone</a>, PLUS, the first steps in <a href="https://github.com/npm/npm/issues/10074">making <code>prepublish</code> work</a> the way people expect it to.</p>
<p><b>NOW ABOUT THIS RELEASE</b></p>
<p>This release sees a whole slew of bug fixes. Notably a bunch of lifecycle fixes and a really important shrinkwrap fix.</p>
<h3><a class="anchor" id="autotoc_md3829"></a>
LIFECYCLE FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/d388f90732981633b3cdb4fc7fb0fababd4e64ab"><code>d388f90</code></a> <a href="https://github.com/npm/npm/pull/13942">#13942</a> Fix current working directory while running shrinkwrap lifecycle scripts. Previously if you ran a shrinkwrap from another lifecycle script AND <code>node_modules</code> existed (and if you're running <code>npm shrinkwrap</code> it probably should) then <code>npm</code> would run the shrinkwrap lifecycle from the <code>node_modules</code> folder instead of the package folder. (<a href="https://github.com/evocateur">@evocateur</a>) (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c3b6cdfedcdb4d9e7712be5245d9b274828d88d1"><code>c3b6cdf</code></a> <a href="https://github.com/npm/npm/pull/13964">#13964</a> Fix bug where the <code>uninstall</code> lifecycles weren't being run when you reinstalled/updated an existing module. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/72bb89c1aa9811a18cbd766f3da73da76eb920c6"><code>72bb89c</code></a> <a href="https://github.com/npm/npm/pull/13344">#13344</a> When running lifecycles use <code>TMPDIR</code> if it's writable and fall back to the current working directory if not. Previously we just assumed <code>TMPDIR</code> wouldn't be writable (as we might have been running as <code>nobody</code> and <code>nobody</code> on some systems can't write to <code>TMPDIR</code>). (<a href="https://github.com/aaronjensen">@aaronjensen</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3830"></a>
SHRINKWRAP GIT &amp; TAGGED DEPENDENCY FIX</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/3b5eee0d31737d1c2518ed95dcc7aaaaa93c253c"><code>3b5eee0</code></a> <a href="https://github.com/npm/npm/pull/13941">#13941</a> Fix git and tagged dependency matching with shrinkwraps. Previously git and tag (ie <code>foo@latest</code>) dependencies installed from a shrinkwrap would always be flagged as invalid. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3831"></a>
BUG FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/bf3bd1e4347ee2c5de08d23558c4444749178c8b"><code>bf3bd1e</code></a> <a href="https://github.com/npm/npm/pull/14143">#14143</a> Fix bug in <code>npm version</code> where <code>npm-shrinkwrap.json</code> wouldn't be updated if you ran <code>npm version</code> from outside of your project root. (<a href="https://github.com/lholmquist">@lholmquist</a>)</li>
<li><a href="https://github.com/npm/npm/commit/1089878f58977559414c8a9addfc69a9c68905b0"><code>1089878</code></a> <a href="https://github.com/npm/npm/pull/13613">#13613</a> Log 'skipping action' as 'verbose' instead of 'warn'. This removes a lot of clutter when there are links in your <code>node_modules</code>. The long term plan is to entirely blind <code>npm</code> to what's inside links, which will make this code go away entirely. (<a href="https://github.com/timoxley">@timoxley</a>)</li>
<li><a href="https://github.com/npm/npm/commit/952f1e109a070ab4066179f6104ba9394300e342"><code>952f1e1</code></a> <a href="https://github.com/npm/npm/pull/13999">#13999</a> Fix a bug where setting <code>bin</code> to <code>null</code> in your <code>package.json</code> would result in <code>npm</code> crashing. (<a href="https://github.com/IonicaBizau">@IonicaBizau</a>)</li>
<li><a href="https://github.com/npm/npm/commit/fcf8b11fb7fcf8902f6a887c3d5f0aef2897dde0"><code>fcf8b11</code></a> <a href="https://github.com/npm/npm/pull/14032">#14032</a> When using <code>npm view</code>, if you specified a version that didn't exist it would previously print <code>undefined</code> (even if you asked for JSON output). It now prints nothing in this situation. This brings <code>npm@3</code>'s behavior in line with <code>npm@2</code>. (<a href="https://github.com/roblg">@roblg</a>)</li>
<li><a href="https://github.com/npm/npm/commit/93c689ff44c6042a2dcde7fe0d74d2264237d666"><code>93c689f</code></a> <a href="https://github.com/npm/npm/pull/14032">#14032</a> When using <code>npm view --json</code> with a version range that matches multiple versions we now return a list of all of the metadata for all of those versions. Previously we picked one and only returned that. This brings <code>npm@3</code>'s behavior in line with <code>npm@2</code>. (<a href="https://github.com/roblg">@roblg</a>)</li>
<li><a href="https://github.com/npm/npm/commit/24117289e09c373b845150c45e4793d98fe7cf4b"><code>2411728</code></a> <a href="https://github.com/npm/npm/pull/14045">#14045</a> Fix a Windows-only bug in the <code>git</code> tests. The tests had rather particular ideas about what arguments would be passed to <code>git</code> and on Windows they got this wrong. (<a href="https://github.com/watilde">@watilde</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3832"></a>
DOCUMENTATION &amp; MISC</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/30772cc5f80923bf21c003fbe53e5fed9d3a5d97"><code>30772cc</code></a> <a href="https://github.com/npm/npm/pull/13904">#13904</a> Update <code>package.json</code> example to include GitHub branches. (<a href="https://github.com/stevokk">@stevokk</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f66876f75c204fb78028cf2ff7979f80355bd06c"><code>f66876f</code></a> <a href="https://github.com/npm/npm/pull/14010">#14010</a> Update the GitHub issue template to reflect Apple's change in name of its desktop operating system. (<a href="https://github.com/AlexChesters">@AlexChesters</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3833"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/b3f9bf1ada3f93e6775f5c232350030db6635d0c"><code>b3f9bf1</code></a> <a href="https://github.com/npm/npm/issues/13918">#13918</a> <code>graceful-fs@4.1.9</code>: Fix the <em>uid must be an unsigned int</em> bug that's been around forever but that <code>npm</code> started tickling in v3.10.8. (<a href="https://github.com/addaleax">@addaleax</a>) Also fixes wrapper to <code>fs.readdir</code> to actually pass through (rather than drop) optional arguments. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9402ead67e3be9b431ade637fbfac86204ee96fe"><code>9402ead</code></a> <a href="https://github.com/isaacs/node-glob/pull/293">isaacs/node-glob#293</a> <code>glob@7.1.0</code>: Add <code>absolute</code> option for <code>match</code> event. (<a href="https://github.com/phated">@phated</a>)</li>
<li><a href="https://github.com/npm/npm/commit/58b83db327dd87bf7cb5a7d503303537718f2f30"><code>58b83db</code></a> <code>asap@2.0.5</code> (<a href="https://github.com/kriskowal">@kriskowal</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5707e6e55b220439c3f83e77daf4c70d72eb46f0"><code>5707e6e</code></a> <code>sorted-object@2.0.1</code> (<a href="https://github.com/domenic">@domenic</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9d209107ce49a7424c50459284280cd2e6e215d1"><code>9d20910</code></a> <code>request@2.75.0</code> (<a href="https://github.com/simov">@simov</a>)</li>
<li><a href="https://github.com/npm/npm/commit/dea48487a9d03492edc68670d05776d32d9ee8cf"><code>dea4848</code></a> <code>path-is-inside@1.0.2</code> (<a href="https://github.com/domenic">@domenic</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b3f3db52e864d607b6d9b18920e2f58acc4b1616"><code>b3f3db5</code></a> <code>opener@1.4.2</code> (<a href="https://github.com/dominic">@dominic</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6bb5f953888bbaaeeb624d623c2a9746d1c243a0"><code>6bb5f95</code></a> <code>lockfile@1.0.2</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/13f7c0a73212284b53a2d96882fc298afbf9609c"><code>13f7c0a</code></a> <code>config-chain@1.1.11</code> (<a href="https://github.com/dominictarr">@dominictarr</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3834"></a>
v3.10.8 (2016-09-08)</h2>
<p>Monthly releases are so big! Just look at all this stuff!</p>
<p>Our quarter of monthly releases is almost over. The next one, in October, might very well be our last one as we move to trying something different and learning lessons from our little experiment.</p>
<p>You may also want to keep an eye our for <code>npm@4</code> next month, since we're planning on finally releasing it then and including a (small) number of breaking changes we've been meaning to do for a long time. Don't worry, though: <code>npm@3</code> will still be around for a bit and will keep getting better and better, and is most likely going to be the version that <code>node@6</code> uses once it goes to LTS.</p>
<p>As some of us have mentioned before, npm is likely to start doing more regular semver-major bumps, while keeping those bumps significantly smaller than the huge effort that was <code>npm@3</code> &ndash; we're not very likely to do a world-shaking thing like that for a while, if ever.</p>
<p>All that said, let's move on to the patches included in v3.10.8!</p>
<h3><a class="anchor" id="autotoc_md3835"></a>
SHRINKWRAP LEVEL UP</h3>
<p>The most notable part of this release is a series of commits meant to make <code>npm shrinkwrap</code> more consistent. By itself, shrinkwrap seems like a fairly straightforward thing to implement, but things get complicated when it starts interacting with <code>devDependencies</code>, <code>optionalDependencies</code>, and <code>bundledDependencies</code>. These commits address some corner cases related to these.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/a7eca3246fbbcbb05434cb6677f65d14c945d74f"><code>a7eca32</code></a> <a href="https://github.com/npm/npm/pull/10073">#10073</a> Record if a dependency is only used as a devDependency and exclude it from the shrinkwrap file. (<a href="https://github.com/bengl">@bengl</a>)</li>
<li><a href="https://github.com/npm/npm/commit/1eabcd16bf2590364ca20831096350073539bf3a"><code>1eabcd1</code></a> <a href="https://github.com/npm/npm/pull/10073">#10073</a> Record if a dependency is optional to shrinkwrap. (<a href="https://github.com/bengl">@bengl</a>)</li>
<li><a href="https://github.com/npm/npm/commit/03efc89522c99ee0fa37d8f4a99bc3b44255ef98"><code>03efc89</code></a> <a href="https://github.com/npm/npm/pull/13692/">#13692</a> We were doing a weird thing where we used a <code>package.json</code> field <code>installable</code> to check to see if we'd checked for platform compatibility, and if not did so. But this was the only place that was ever done so there was no reason to implement it in such an obfuscated manner. Instead it now just directly checks and then records that its done so on the node object with <code>knownInstallable</code>. This is useful to know because modules expanded via shrinkwrap don't go through this– <code>inflateShrinkwrap</code> does not currently have any rollback semantics and so checking this sort of thing there is unhelpful. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ff879382fda21dac7216a5f666287b3a7e74a947"><code>ff87938</code></a> <a href="https://github.com/npm/npm/issues/11735">#11735</a> Running <code>npm install --save-dev</code> will now update shrinkwrap file, but only if there already are devDependencies in it. (<a href="https://github.com/szimek">@szimek</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c00ca3aef836709eeaeade91c5305bc2fbda2e8a"><code>c00ca3a</code></a> <a href="https://github.com/npm/npm/issues/13394">#13394</a> Check installability of modules from shrinkwrap, since modules that came into the tree vie shrinkwrap won't already have this information recorded in advance. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3836"></a>
INSTALLER ERROR REPORTING LEVEL UP</h3>
<p>As part of the shrinkwrap push, there were also a lot of error-reporting improvements. Some to add more detail to error objects, others to fix bugs and inconsistencies.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/2cdd7132abddcc7f826a355c14348ce9a5897ffe"><code>2cdd713</code></a> Consistently set code on <code>ETARGET</code> when fetching package metadata if no compatible version is found. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/cabcd173f2923cb5b77e7be0e42eea2339a24727"><code>cabcd17</code></a> <a href="https://github.com/npm/npm/pull/13692/">#13692</a> Include installer warning details at the <code>verbose</code> log level. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/95a4044cbae93d19d0da0f3cd04ea8fa620295d9"><code>95a4044</code></a> <a href="https://github.com/npm/npm/commit/dbb14c241d982596f1cdaee251658f5716989fd2"><code>dbb14c2</code></a> <a href="https://github.com/npm/npm/commit/9994383959798f80749093301ec43a8403566bb6"><code>9994383</code></a> <a href="https://github.com/npm/npm/commit/74170003db0c53def9b798cb6fe3fe7fc3e06482"><code>7417000</code></a> <a href="https://github.com/npm/npm/commit/f45f85dac800372d63dfa8653afccbf5bcae7295"><code>f45f85d</code></a> <a href="https://github.com/npm/npm/commit/e79cc1b11440f0d122c4744d5eff98def9553f4a"><code>e79cc1b</code></a> <a href="https://github.com/npm/npm/commit/146ee394b1f7a33cf409a30b835a85d939acb438"><code>146ee39</code></a> <a href="https://github.com/npm/npm/pull/13692/">#13692</a> Improve various bits of error reporting, adding more error information and some related refactoring. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3837"></a>
MISCELLANEOUS BUGS LEVEL UP</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/116b6c60a174ea0cc49e4d62717e4e26175b6534"><code>116b6c6</code></a> <a href="https://github.com/npm/npm/issues/13456">#13456</a> In lifecycle scripts, any <code>node_modules/.bin</code> existing in the hierarchy should be turned into an entry in the PATH environment variable. However, prior to this commit, it was splitting based on the string <code>node_modules</code>, rather than restricting it to only path portions like <code>/node_modules/</code> or <code>\node_modules\</code>. So, a path containing an entry like <code>my_node_modules</code> would be improperly split. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0a28dd0104e5b4a8cc0cb038bd213e6a50827fe8"><code>0a28dd0</code></a> <a href="https://github.com/npm/fstream-npm/pull/23">npm/fstream-npm#23</a> <code>fstream-npm@1.2.0</code>: Always ignore <code>*.orig</code> files, which are generated by git when using <code>git mergetool</code>, by default. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a3a2fb97adc87c2aa9b2b8957861b30efafc7ad0"><code>a3a2fb9</code></a> <a href="https://github.com/npm/npm/pull/13708">#13708</a> Always ignore <code>*.orig</code> files, which are generated by git when using <code>git mergetool</code>, by default. (<a href="https://github.com/boneskull">@boneskull</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3838"></a>
TOOLING LEVEL UP</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/e1d7e6ce551cbc42026cdcadcb37ea515059c972"><code>e1d7e6c</code></a> Add helper for generating test skeletons. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4400b356bca9175935edad1469c608c909bc01bf"><code>4400b35</code></a> Fix fixture creation and cleanup in <code>maketest</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3839"></a>
DOCUMENTATION LEVEL UP</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/8eb94601fe895b97cbcf8c6134e6b371c5371a1e"><code>8eb9460</code></a> <a href="https://github.com/npm/npm/pull/13717">#13717</a> Document that <code>npm link</code> will link the files specified in the <code>bin</code> field of <code>package.json</code> to <code>{prefix}/bin/{name}</code>. (<a href="https://github.com/legodude17">@legodude17</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a66e5e9c388878fe03fb29014c3b95d28bedd3c1"><code>a66e5e9</code></a> <a href="https://github.com/npm/npm/pull/13682">#13682</a> Minor grammar fix in documentation for <code>npm scripts</code>. (<a href="https://github.com/Ajedi32">@Ajedi32</a>)</li>
<li><a href="https://github.com/npm/npm/commit/74b80437ffdfcf8172f6ed4f39bfb021608dd9dd"><code>74b8043</code></a> <a href="https://github.com/npm/npm/pull/13655">#13655</a> Document line comment syntax for <code>.npmrc</code>. (<a href="https://github.com/mdjasper">@mdjasper</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b352a84c2c7ad15e9c669af75f65cdaa964f86c0"><code>b352a84</code></a> <a href="https://github.com/npm/npm/issues/12438">#12438</a> Remind folks to use <code>#!/usr/bin/env node</code> in their <code>bin</code> scripts to make files executable directly. (<a href="https://github.com/mxstbr">@mxstbr</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b82fd838edbfff5d2833a62f6d8ae8ea2df5a1f2"><code>b82fd83</code></a> <a href="https://github.com/npm/npm/pull/13493">#13493</a> Document that the user config file can itself be configured either through the <code>$NPM_CONFIG_USERCONFIG</code> environment variable, or <code>--userconfig</code> command line flag. (<a href="https://github.com/jasonkarns">@jasonkarns</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8a026992a03d90e563a97c70e90926862120693b"><code>8a02699</code></a> <a href="https://github.com/npm/npm/pull/13911">#13911</a> Minor documentation reword and cleanup. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3840"></a>
DEPENDENCY LEVEL UP</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/2818fb0f6081d68a91f0905945ad102f26c6cf85"><code>2818fb0</code></a> <code>glob@7.0.6</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d88ec81ad33eb2268fcd517d35346a561bc59aff"><code>d88ec81</code></a> <code>graceful-fs@4.1.6</code> (<a href="https://github.com/francescoinfante">@francescoinfante</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4727f8646daca7b3e3c1c95860e02acf583b9dae"><code>4727f86</code></a> <code>lodash.clonedeep@4.5.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c3476780ef4483425e4ae1d095a5884b46b8db86"><code>c347678</code></a> <code>lodash.union@4.6.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/530bd4d2ae6f704f624e4f7bf64f911f37e2b7f8"><code>530bd4d</code></a> <code>lodash.uniq@4.5.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/483d56ae8137eca0c0f7acd5d1c88ca6d5118a6a"><code>483d56a</code></a> <code>lodash.without@4.4.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6c934df6e74bacd0ed40767b319936837a43b586"><code>6c934df</code></a> <code>inherits@2.0.3</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a65ed7cbd3c950383a14461a4b2c87b67ef773b9"><code>a65ed7c</code></a> <code>npm-registry-client@7.2.1</code>:<ul>
<li><a href="https://github.com/npm/npm-registry-client/pull/142">npm/npm-registry-client#142</a> Fix <code>EventEmitter</code> warning spam from error handlers on socket. (<a href="https://github.com/addaleax">@addaleax</a>)</li>
<li><a href="https://github.com/npm/npm-registry-client/pull/131">npm/npm-registry-client#131</a> Adds support for streaming request bodies. (<a href="https://github.com/aredridel">@aredridel</a>)</li>
<li>Fixes <a href="https://github.com/npm/npm/issues/13656">#13656</a>.</li>
<li>Dependency updates.</li>
<li>Documentation improvements. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
</li>
<li><a href="https://github.com/npm/npm/commit/2b88d62e6a730716b27052c0911c094d01830a60"><code>2b88d62</code></a> <a href="https://github.com/npm/npmlog/pull/34">npm/npmlog#34</a> <code>npmlog@4.0.0</code>: Allows creating log levels that are empty strings or 0 (<a href="https://github.com/rwaldron">@rwaldron</a>)</li>
<li><a href="https://github.com/npm/npm/commit/242babbd02274ee2d212ae143992c20f47ef0066"><code>242babb</code></a> <code>once@1.4.0</code> (<a href="https://github.com/zkochan">@zkochan</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6d8ba2b4918e2295211130af68ee8a67099139e0"><code>6d8ba2b</code></a> <code>readable-stream@2.1.5</code> (<a href="https://github.com/calvinmetcalf">@calvinmetcalf</a>)</li>
<li><a href="https://github.com/npm/npm/commit/855c099482a8d93b7f0646bd7bcf8a31f81868e0"><code>855c099</code></a> <code>retry@0.10.0</code> (<a href="https://github.com/tim-kos">@tim-kos</a>)</li>
<li><a href="https://github.com/npm/npm/commit/80540c52b252615ae8a6271b3df870eabfea935e"><code>80540c5</code></a> <code>semver@5.3.0</code>:<ul>
<li>Add <code>minSatisfying</code></li>
<li>Add <code>prerelease(v)</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
</li>
<li><a href="https://github.com/npm/npm/commit/8aaac52ffae8e689fae265712913b1e2a36b1aa6"><code>8aaac52</code></a> <code>which@1.2.1</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/85108a29108ab0a57997572dc14f87eb706890ba"><code>85108a2</code></a> <code>write-file-atomic@1.2.0</code>: Preserve chmod and chown from the overwritten file (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/291a377f32f5073102a8ede61a27e6a9b37154c2"><code>291a377</code></a> Update npm documentation to reflect documentation for <code>semver@5.3.0</code>. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3841"></a>
v3.10.7 (2016-08-11)</h2>
<p>Hi all, today's our first release coming out of the new monthly release cadence. See below for details. We're all recovered from conferences now and raring to go! We've got some pretty keen bug fixes and a bunch of documentation and dependency updates. It's hard to narrow it down to just a few, but of note are scoped packages in bundled dependencies, the <code>preinstall</code> lifecycle fix, the shrinkwrap and Git dependencies fix and the fix to a crasher involving cycles in development dependencies.</p>
<h3><a class="anchor" id="autotoc_md3842"></a>
NEW RELEASE CADENCE</h3>
<p>Releasing npm has been, for the most part, a very prominent part of our weekly process process. As part of our efforts to find the most effective ways to allocate our team's resources, we decided last month that we would try and slow our releases down to a monthly cadence, and see if we found ourselves with as much extra time and attention as we expected to have. Process experiments are useful for finding more effective ways to do our work, and we're at least going to keep doing this for a whole quarter, and then measure how well it worked out. It's entirely likely that we'll switch back to a more frequent cadence, specially if we find that the value that weekly cadence was providing the community is not worth sacrificing for a bit of extra time. Does this affect you significantly? Let us know!</p>
<h3><a class="anchor" id="autotoc_md3843"></a>
SCOPED PACKAGES IN BUNDLED DEPENDENCIES</h3>
<p>Prior to this release and <a href="https://github.com/npm/npm/releases/v2.15.10">v2.15.10</a>, npm had ignored scoped modules found in <code>bundleDependencies</code>.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/29cf56dbae8e3dd16c24876f998051623842116a"><code>29cf56d</code></a> <a href="https://github.com/npm/npm/issues/8614">#8614</a> Include scoped packages in bundled dependencies. (<a href="https://github.com/forivall">@forivall</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3844"></a>
&lt;tt&gt;preinstall&lt;/tt&gt; LIFECYCLE IN CURRENT PROJECT</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/b7f13bc80b89b025be0c53d81b90ec8f2cebfab7"><code>b7f13bc</code></a> <a href="https://github.com/npm/npm/pull/13259">#13259</a> Run top level preinstall before installing dependencies (<a href="https://github.com/palmerj3">@palmerj3</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3845"></a>
BETTER SHRINKWRAP WITH GIT DEPENDENCIES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/0f7e3197bcec7a328b603efdffd3681bbc40f585"><code>0f7e319</code></a> <a href="https://github.com/npm/npm/issues/12718.">#12718</a> Update outdated git dependencies found in shrinkwraps. Previously, if the module version was the same then no update would be completed even if the committish had changed. (<a href="https://github.com/kossnocorp">@kossnocorp</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3846"></a>
CYCLES IN DEVELOPMENT DEPENDENCIES NO LONGER CRASH</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/1691de668d34cd92ab3de08bf3a06085388f2f07"><code>1691de6</code></a> <a href="https://github.com/npm/npm/issues/13327">#13327</a> Fix bug where cycles found in development dependencies could result in infinite recursion that resulted in crashes. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3847"></a>
IMPROVE "NOT UPDATING LINKED MODULE" WARNINGS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/1619871ac0cc8839dc9962c78e736095976c1eb4"><code>1619871</code></a> <a href="https://github.com/npm/npm/pull/12893">#12893</a> Only warn about symlink update if version number differs The update-linked action outputs a warning that it needs to update the linked package, but can't, There is no need for the package to be updated if it is already at the correct version. This change does a check before logging the warning. (<a href="https://github.com/DaveEmmerson">@DaveEmmerson</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3848"></a>
MORE BUG FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/8f8d1b33a78c79aff9de73df362abaa7f05751d2"><code>8f8d1b3</code></a> <a href="https://github.com/npm/npm/issues/11398">#11398</a> Fix bug where <code>package.json</code> files that contained a <code>type</code> property could cause crashes. <code>type</code> is not a <code>package.json</code> property that npm makes use of and having it should be (and now is) harmless. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e7fa6c6a2c1de2a214479daa8c6901eebb350381"><code>e7fa6c6</code></a> <a href="https://github.com/npm/npm/issues/13353">#13353</a> Add GIT_EXEC_PATH to Git environment whitelist. (<a href="https://github.com/mhart">@mhart</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c23af21d4cedd7fedcb4168672044db76ad054a8"><code>c23af21</code></a> <a href="https://github.com/npm/npm/pull/13626">#13626</a> Use HTTPS issues URL in the error message for type validation errors. (<a href="https://github.com/watilde">@watilde</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3849"></a>
INCLUDE &lt;tt&gt;npm login&lt;/tt&gt; IN COMMAND SUMMARY</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/ab0c4b137b05762e75e0913038b606f087b58aa0"><code>ab0c4b1</code></a> <a href="https://github.com/npm/npm/issues/13581">#13581</a> The <code>login</code> command has long been an alias for <code>adduser</code>. At the same time, there is an expectation not just of that particular word being something to look for, but of there being clear symmetry with <code>logout</code>. So it was a bit confusing when <code>login</code> didn't show up in <code>npm help</code> on a technicality. This seems like an acceptable exception to the rule that says "no aliases in `npm help`". (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3850"></a>
DOCUMENTATION</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/e2d7e7820a7875ed96e0382dc1e91b8df4e83746"><code>e2d7e78</code></a> <a href="https://github.com/npm/npm/pull/13319">#13319</a> As Node.js 0.8 is no longer supported, remove mention of it from the README. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c565d893a38efb6006e841450503329c9e58f100"><code>c565d89</code></a> <a href="https://github.com/npm/npm/pull/13349">#13349</a> Updated the scripts documentation to explain the different between <code>version</code> and <code>preversion</code>. (<a href="https://github.com/christophehurpeau">@christophehurpeau</a>)</li>
<li><a href="https://github.com/npm/npm/commit/fa8f87f1ec92e543dd975156c4b184eb3e0b80cb"><code>fa8f87f</code></a> <a href="https://github.com/npm/npm/pull/10167">#10167</a> Clarify in scope documentation that npm@2 is required for scoped packages. (<a href="https://github.com/danpaz">@danpaz</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3851"></a>
DEPENDENCIES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/124427eabbfd200aa145114e389e19692559ff1e"><code>124427e</code></a> <a href="https://github.com/npm/npm/issues/8614">#8614</a> <code>fstream-npm@1.1.1</code>: Fixes bug with inclusion of scoped bundled dependencies. (<a href="https://github.com/forivall">@forivall</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7e0cdff04714709f6dc056b19422d3f937502f1c"><code>7e0cdff</code></a> <a href="https://github.com/npm/npm/pull/13497">#13497</a> <code>graceful-fs@4.1.5</code>: <code>graceful-fs</code> had a <a href="https://github.com/isaacs/node-graceful-fs/pull/71">bug fix</a> which fixes a problem (<a href="https://github.com/nodejs/node/pull/7846">nodejs/node#7846</a>) exposed by recent changes to Node.js. (<a href="https://github.com/thefourtheye">@thefourtheye</a>)</li>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/9b88cb89f138443f324094685f4de073f33ecef0"><code>9b88cb8</code></a> <a href="https://github.com/npm/npm/issues/9984">#9984</a> <code>request@2.74.0</code>: Update request library to at least 2.73 to fix a bug where <code>npm install</code> would crash with <em>Cannot read property 'emit' of null.</em></p>
<p class="startli">Update <code>request</code> dependency <code>tough-cookie</code> to <code>2.3.0</code> to to address <a href="https://nodesecurity.io/advisories/130">https://nodesecurity.io/advisories/130</a>. Versions 0.9.7 through 2.2.2 contain a vulnerable regular expression that, under certain conditions involving long strings of semicolons in the "Set-Cookie" header, causes the event loop to block for excessive amounts of time. (<a href="https://github.com/zarenner">@zarenner</a>) (<a href="https://github.com/stash-sfdc">@stash-sfdc</a>)</p>
</li>
<li><a href="https://github.com/npm/npm/commit/bf78ce5ef5d2d6e95177193cca5362dd27bff968"><code>bf78ce5</code></a> <a href="https://github.com/npm/npm/issues/13387">#13387</a> <code>minimatch@3.0.3</code>: Handle extremely long and terrible patterns more gracefully. There were some magic numbers that assumed that every extglob pattern starts and ends with a specific number of characters in the regular expression. Since !(||) patterns are a little bit more complicated, this led to creating an invalid regular expression and throwing. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/803e538efaae4b56a764029742adcf6761e8398b"><code>803e538</code></a> <a href="https://github.com/isaacs/rimraf/issues/111">isaacs/rimraf#111</a> <code>rimraf@2.5.4</code>: Clarify assertions: cb is required, options are not. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a9f84ef61b4c719b646bf9cda00577ef16e3a113"><code>a9f84ef</code></a> <code>lodash.without@4.2.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f59ff1c2701f1bfd21bfdb97b4571823b614f694"><code>f59ff1c</code></a> <code>lodash.uniq@4.4.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8cc027e5e81623260a49b31fe406ce483258b203"><code>8cc027e</code></a> <code>lodash.union@4.5.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0a6c1e4302a153fb055f495043ed33afd8324193"><code>0a6c1e4</code></a> <code>lodash.without@4.3.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4ab0181fca2eda18888b865ef691b83d30fb0c33"><code>4ab0181</code></a> <code>lodash.clonedeep@4.4.1</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3852"></a>
v3.10.6 (2016-07-07)</h2>
<p>This week we have a bunch of bug fixes for ya! A shrinkwrap regression introduced in 3.10.0, better lifecycle <code>PATH</code> behavior, improvements when working with registries other than <code>registry.npmjs.org</code> and a fix for hopefully the last <em>don't print a progress bar over my interactive thingy</em> bug.</p>
<h3><a class="anchor" id="autotoc_md3853"></a>
SHRINKWRAP AND DEV DEPENDENCIES</h3>
<p>The rewrite in 3.10.0 triggered a bug where dependencies of devDependencies would be included in your shrinkwrap even if you didn't request devDependencies.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/2484529ab56a42e5d6f13c48006f39a596d9e327"><code>2484529</code></a> <a href="https://github.com/npm/npm/pull/13308">#13308</a> Fix bug where deps of devDependencies would be incorrectly included in shrinkwraps. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3854"></a>
BETTER PATH LIFECYCLE BEHAVIOR</h3>
<p>We've been around the details on this one a few times in recent months and hopefully this will bring is to where we want to be.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/81051a90eee66a843f76eb8cccedbb1d0a5c1f47"><code>81051a9</code></a> <a href="https://github.com/npm/npm/pull/12968">#12968</a> When running lifecycle scripts, only prepend directory containing the node binary to PATH if not already in PATH. (<a href="https://github.com/segrey">@segrey</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3855"></a>
BETTER INTERACTIONS WITH THIRD PARTY REGISTRIES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/071193c8e193767dd1656cb27556cb3751d77a3b"><code>071193c</code></a> <a href="https://github.com/npm/npm/pull/10869">#10869</a> If the registry returns a list of versions some of which are invalid, skip those when picking a version to install. This can't happen with registry.npmjs.org as it will normalize versions published with it, but it can happen with other registries. (<a href="https://github.com/gregersrygg">@gregersrygg</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3856"></a>
ONE LAST TOO-MUCH-PROGRESS CORNER</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/1244cc16dc5a0536acf26816a1deeb8e221d67eb"><code>1244cc1</code></a> <a href="https://github.com/npm/npm/pull/13305">#13305</a> Disable progress bar in <code>npm edit</code> and <code>npm config edit</code>. (<a href="https://github.com/watilde">@watilde</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3857"></a>
HTML DOCS IMPROVEMENTS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/58da9234ae72a5474b997f890a1155ee9785e6f1"><code>58da923</code></a> <a href="https://github.com/npm/npm/issues/13225">#13225</a> Fix HTML character set declaration in generated HTML documentation. (<a href="https://github.com/KenanY">@KenanY</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d1f0bf4303566f8690502034f82bbb449850958d"><code>d1f0bf4</code></a> <a href="https://github.com/npm/npm/pull/13250">#13250</a> Optimize png images using zopflipng. (<a href="https://github.com/PeterDaveHello">@PeterDaveHello</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3858"></a>
DEPENDENCY UPDATES (THAT MATTER)</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/c7567e58618b63f97884afa104d2f560c9272dd5"><code>c7567e5</code></a> <a href="https://github.com/npm/npm-user-validate/pull/9">npm/npm-user-validate#9</a> <code>npm-user-validate@0.1.5</code>: Lower the username length limits to 214 from 576 to match <code>registry.npmjs.org</code>'s limits. (<a href="https://github.com/aredridel">@aredridel</a>)</li>
<li><a href="https://github.com/npm/npm/commit/22802c9db3cf990c905e8f61304db9b5571d7964"><code>22802c9</code></a> <a href="https://github.com/npm/npm/issues/isaacs/rimraf">#isaacs/rimraf</a> <code>rimraf@2.5.3</code>: Fixes EPERM errors when running <code>lstat</code> on read-only directories. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ce6406f4b6c4dffbb5cd8a3c049f6663a5665522"><code>ce6406f</code></a> <code>glob@7.0.5</code>: Forces the use of <code>minimatch</code> to 3.0.2, which improved handling of long and complicated patterns. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3859"></a>
v3.10.5 (2016-07-05)</h2>
<p>This is a fix to this week's testing release to correct the update of <code>node-gyp</code> which somehow got mangled.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/ca97ce2e8d8ba44c445b39ffa40daf397d5601b3"><code>ca97ce2</code></a> <a href="https://github.com/npm/npm/issues/13256">#13256</a> Fresh reinstall of <code>node-gyp@3.4.0</code>. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3860"></a>
v3.10.4 (2016-06-30)</h2>
<p>Hey y'all! This release includes a bunch of fixes we've been working on as we continue on our <code>big-bug</code> push. There's still <a href="https://github.com/npm/npm/labels/big-bug">a lot of it left to do</a>, but once this is done, things should just generally be more stable, installs should be more reliable and correct, and we'll be able to move on to more future work. We'll keep doing our best! 🙌</p>
<h3><a class="anchor" id="autotoc_md3861"></a>
RACES AS WACKY AS &lt;a href="https://en.wikipedia.org/wiki/Redline_\(2009_film\)"&gt;REDLINE&lt;/a&gt;</h3>
<p>Races are notoriously hard to squash, and tend to be some of the more common recurring bugs we see on the CLI. <a href="https://github.com/julianduque">@julianduque</a> did some pretty awesome <a href="https://github.com/npm/npm/issues/12669">sleuthing work</a> to track down a cache race and helpfully submitted a patch. There were some related races in the same area that also got fixed at around the same time, mostly affecting Windows users.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/2a37c97121483db2b6f817fe85c2a5a77b76080e"><code>2a37c97</code></a> <a href="https://github.com/npm/npm/issues/12669">#12669</a> <a href="https://github.com/npm/npm/pull/13023">#13023</a> The CLI is pretty aggressive about correcting permissions across the cache whenever it writes to it. This aggressiveness caused a couple of races where temporary cache files would get picked up by <code>fs.readdir</code>, and removed before <code>chownr</code> was called on them, causing <code>ENOENT</code> errors. While the solution might seem a bit hamfisted, it's actually perfectly safe and appropriate in this case to just ignore those resulting <code>ENOENT</code> errors. (<a href="https://github.com/julianduque">@julianduque</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ea018b9e3856d1798d199ae3ebce4ed07eea511b"><code>ea018b9</code></a> <a href="https://github.com/npm/npm/pull/13023">#13023</a> If a user were to have SUDO_UID and SUDO_GID, they'd be able to get into a pretty weird state. This fixes that corner case. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/703ca3abbf4f1cb4dff08be32acd2142d5493482"><code>703ca3a</code></a> <a href="https://github.com/npm/npm/pull/13023">#13023</a> A missing <code>return</code> was causing <code>chownr</code> to be called on Windows, even though that's literally pointless, and causing crashes in the process, instead of short-circuiting. This was entirely dependent on which callback happened to be called first, and in some cases, the failing one would win the race. This should prevent this from happening in the future. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/69267f4fbd1467ce576f173909ced361f8fe2a9d"><code>69267f4</code></a> <a href="https://github.com/npm/npm/pull/13023">#13023</a> Added tests to verify <code>correct-mkdir</code> race patch. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e5f50ea9f84fe8cac6978d18f7efdf43834928e7"><code>e5f50ea</code></a> <a href="https://github.com/npm/npm/pull/13023">#13023</a> Added tests to verify <code>addLocal</code> race patch. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3862"></a>
SHRINKWRAP IS COMPLICATED BUT IT'S BETTER NOW</h3>
<p><a href="https://github.com/iarna">@iarna</a> did some heroic hacking to refactor a bunch of <code>shrinkwrap</code>-related bits and fixed some resolution and pathing issues that were biting users. The code around that stuff got more readable/maintainable in the process, too!</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/346bba1e1fee9cc814b07c56f598a73be5c21686"><code>346bba1</code></a> <a href="https://github.com/npm/npm/pull/13214">#13214</a> Resolve local dependencies in <code>npm-shrinkwrap.json</code> relative to the top of the tree. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4a67fdbd0f160deb6644a9c4c5b587357db04d2d"><code>4a67fdb</code></a> <a href="https://github.com/npm/npm/pull/13213">#13213</a> If you run <code>npm install modulename</code> it should, if a <code>npm-shrinkwrap.json</code> is present, use the version found there. If not, it'll use the version found in your <code>package.json</code>, and failing <em>that</em>, use <code>latest</code>. This fixes a case where the first check was being bypassed because version resolution was being done prior to loading the shrinkwrap, and so checks to match the shrinkwrap version couldn't succeed. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/afa2133a5d8ac4f6f44cdc6083d89ad7f946f5bb"><code>afa2133</code></a> <a href="https://github.com/npm/npm/pull/13214">#13214</a> Refactor shrinkwrap specifier lookup into shared function. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2820b56a43e1cc1e12079a4c886f6c14fe8c4f10"><code>2820b56</code></a> <a href="https://github.com/npm/npm/pull/13214">#13214</a> Refactor operations in <code>inflate-shrinkwrap.js</code> into separate functions for added clarity. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ee5bfb3e56ee7ae582bec9f741f32b224c279947"><code>ee5bfb3</code></a> Fix Windows path issue in a shrinkwrap test. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3863"></a>
OTHER BUGFIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/a11a7b2e7df9478ac9101b06eead4a74c41a648d"><code>a11a7b2</code></a> <a href="https://github.com/npm/npm/pull/13212">#13212</a> Resolve local paths passed in through the command line relative to current directory, instead of relative to the <code>package.json</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3864"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/900a5b7f18b277786397faac05853c030263feb8"><code>900a5b7</code></a> <a href="https://github.com/npm/npm/pull/13199">#13199</a> <a href="https://github.com/nodejs/node-gyp/blob/master/CHANGELOG.md"><code>node-gyp@3.4.0</code></a>: AIX, Visual Studio 2015, and logging improvements. Oh my~! (<a href="https://github.com/rvagg">@rvagg</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3865"></a>
DOCUMENTATION FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/c6942a7d6acb2b8c73206353bbec03380a056af4"><code>c6942a7</code></a> <a href="https://github.com/npm/npm/pull/13134">#13134</a> Fixed a few typos in <code>CHANGELOG.md</code>. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e63d913127731ece56dcd69c7c0182af21be58f8"><code>e63d913</code></a> <a href="https://github.com/npm/npm/pull/13156">#13156</a> Fix old reference to <code>doc/install</code> in a source comment. (<a href="https://github.com/sheerun">@sheerun</a>)</li>
<li><a href="https://github.com/npm/npm/commit/099d23cc8f38b524dc19a25857b2ebeca13c49d6"><code>099d23c</code></a> <a href="https://github.com/npm/npm/issues/13113">#13113</a> <a href="https://github.com/npm/npm/pull/13189">#13189</a> Fixes a link to <code>npm-tag(3)</code> that was breaking to instead point to <code>npm-dist-tag(1)</code>, as reported by <a href="https://github.com/SimenB">@SimenB</a> (<a href="https://github.com/macdonst">@macdonst</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3866"></a>
v3.10.3 (2016-06-23)</h2>
<p>Given that we had not one, but two updates to our RC this past week, it should come as no surprise that this week's full release is a bit lighter. We have some documentation patches and a couple of bug fixes via dependency updates.</p>
<p>If you haven't yet checked out last week's release, <a href="https://github.com/npm/npm/releases/tag/v3.10.0">v3.10.0</a> and the two follow up releases <a href="https://github.com/npm/npm/releases/tag/v3.10.1">v3.10.1</a> and <a href="https://github.com/npm/npm/releases/tag/v3.10.2">v3.10.2</a>, you really should do so. They're the most important releases we've had in quite a while, fixing a bunch of critical bugs (including an issue impacting publishing with Node.js 6.x) and of course, bringing in the new and improved progress bar.</p>
<h3><a class="anchor" id="autotoc_md3867"></a>
BUM SYMLINKS BURN NO MORE</h3>
<p>There's been a bug lurking where broken symlinks in your <code>node_modules</code> folder could cause all manner of mischief, from crashes to empty <code>npm ls</code> results. The intrepid <a href="https://github.com/watilde">@watilde</a> tracked this down for us.</p>
<p>This addresses the root cause of the outdated crasher we protected against earlier this week in <a href="https://github.com/npm/npm/issues/13115">#13115</a>.</p>
<p>This also fixes <a href="https://github.com/npm/npm/issues/9564">#9564</a>, the problem where a bad symlink in your global modules would result in an empty result when you ran <code>npm ls -g</code>.</p>
<p>This ALSO likely fixes numerous "Missing argument #1" errors. (But surely not all of them as that's actually just a generic arity and type-validation failure.)</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/ca92ac455b841a708dd89262ff88d503b125d717"><code>ca92ac4</code></a> <a href="https://github.com/npm/read-package-tree/pull/6">npm/read-package-tree#6</a> <code>read-package-tree@5.1.5</code>: Make bad symlinks be non-fatal errors when reading the tree off disk. (<a href="https://github.com/watilde">@watilde</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3868"></a>
BETTER UNICODE DETECTION</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/6c3f7f043f09fc2aa19ffd3f956787635fa6f4d0"><code>6c3f7f0</code></a> <code>has-unicode@2.0.1</code>: Fix unicode detection on a number of Linux distributions. (<a href="https://github.com/Darkhogg">@Darkhogg</a>) (<a href="https://github.com/gagern">@gagern</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3869"></a>
DOCUMENTATION FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/b9243ee60a3d60505c2502dc8633811b42c8aaea"><code>b9243ee</code></a> <a href="https://github.com/npm/npm/pull/13127">#13127</a> Remove extra backtick from <code>npm ls</code> documentation. (<a href="https://github.com/shvaikalesh">@shvaikalesh</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e05c0c243cc702f9c392c001f668a90b57eaeb0e"><code>e05c0c2</code></a> <a href="https://github.com/iarna/has-unicode/pull/3">iarna/has-unicode#3</a> <a href="https://github.com/iarna/has-unicode/pull/4">iarna/has-unicode#4</a> <a href="https://github.com/npm/npm/pull/13084">#13084</a> Correct changelog entry for shrinkwrap lifecycle order. (<a href="https://github.com/SimenB">@SimenB</a>)</li>
<li><a href="https://github.com/npm/npm/commit/823994f100a0e59e1dd109e312811f971968ec75"><code>823994f</code></a> <a href="https://github.com/npm/npm/pull/13080">#13080</a> Describe using <code>npm pack</code> to see a dry run of publication results in the <code>npm publish</code> documentation. (<a href="https://github.com/laughinghan">@laughinghan</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3870"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/e44d2db1ad0d860ca08e99c81135bd399fb733b1"><code>e44d2db</code></a> <code>aproba@1.0.4</code>: Documentation updates and minor refactoring. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3871"></a>
v3.10.2 (2016-06-17):</h2>
<p>This is a quick hotfix release with two small bug fixes. First, there was an issue where the new progress bar would overwrite interactive prompts, that is, those found in <code>npm login</code> and <code>npm init</code>. Second, if the directory you were running <code>npm outdated</code> on was a bad link or otherwise had unrecoverable errors then npm would crash instead of printing the error.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/fbefb8675b26320b295f481b4872ce99f0180807"><code>fbefb86</code></a> <a href="https://github.com/npm/npm/commit/7779e9fb9430f6547532c67f2471864d62bbd5bc"><code>7779e9f</code></a> <a href="https://github.com/npm/npm/issues/13105">#13105</a> Disable progress bar in <code>adduser</code> and <code>init</code>.</li>
<li><a href="https://github.com/npm/npm/commit/6a33b2c13f637a41e25cd0339925bc430b50358a"><code>6a33b2c</code></a> <a href="https://github.com/npm/npm/issues/13115">#13115</a> Ensure that errors reading the package tree for <code>outdated</code> does not result in crashes. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3872"></a>
v3.10.1 (2016-06-17):</h2>
<p>There are two very important bug fixes and one long-awaited (and significant!) deprecation in this hotfix release. <a href="http://butt.holdings/">Hold on.</a></p>
<h3><a class="anchor" id="autotoc_md3873"></a>
&lt;em&gt;WHOA&lt;/em&gt;</h3>
<p>When Node.js 6.0.0 was released, the CLI team noticed an alarming upsurge in bugs related to important files (like <code>README.md</code>) not being included in published packages. The new bugs looked much like <a href="https://github.com/npm/npm/issues/5082">#5082</a>, which had been around in one form or another since April, 2014. #5082 used to be a very rare (and obnoxious) bug that the CLI team hadn't had much luck reproducing, and we'd basically marked it down as a race condition that arose on machines using slow and / or rotating-media-based hard drives.</p>
<p>Under 6.0.0, the behavior was reliable enough to be nearly deterministic, and made it very difficult for publishers using <code>.npmignore</code> files in combination with <code>"files"</code> stanzas in <code>package.json</code> to get their packages onto the registry without one or more files missing from the packed tarball. The entire saga is contained within <a href="https://github.com/npm/npm/issues/5082">the issue</a>, but the summary is that an improvement to the performance of <a href="https://nodejs.org/api/fs.html#fs_fs_realpath_path_options_callback"><code>fs.realpath()</code></a> made it much more likely that the packing code would lose the race.</p>
<p>Fixing this has proven to be very difficult, in part because the code used by npm to produce package tarballs is more complicated than, strictly speaking, it needs to be. <a href="https://github.com/evanlucas"><b>@evanlucas</b></a> contributed <a href="https://github.com/npm/fstream/pull/50">a patch</a> that passed the tests in a <a href="https://github.com/othiym23/eliminate-5082">special test suite</a> that I (<a href="https://github.com/othiym23"><b>@othiym23</b></a>) created (with help from <a href="https://github.com/addaleax"><b>@addaleax</b></a>), but only <em>after</em> we'd released the fixed version of that package did we learn that it actually made the problem <em>worse</em> in other situations in npm proper. Eventually, <a href="https://github.com/rvagg"><b>@rvagg</b></a> put together a more durable fix that appears to completely address the errant behavior under Node.js 6.0.0. That's the patch included in this release. Everybody should chip in for redback insurance for Rod and his family; he's done the community a huge favor.</p>
<p>Does this mean the long (2+ year) saga of #5082 is now over? At this point, I'm going to quote from my latest summary on the issue:</p>
<blockquote class="doxtable">
<p>The CLI team (mostly me, with input from the rest of the team) has decided that the overall complexity of the interaction between <code>fstream</code>, <code>fstream-ignore</code>, <code>fstream-npm</code>, and <code>node-tar</code> has grown more convoluted than the team is comfortable (maybe even capable of) supporting.</p>
<ul>
<li>While I believe that @rvagg's (very targeted) fix addresses <em>this</em> issue, I would be shocked if there aren't other race conditions in npm's packing logic. I've already identified a couple other places in the code that are most likely race conditions, even if they're harder to trigger than the current one.</li>
<li>The way that dependency bundling is integrated leads to a situation in which a bunch of logic is duplicated between <code>fstream-npm</code> and <code>lib/utils/tar.js</code> in npm itself, and the way <code>fstream</code>'s extension mechanism works makes this difficult to clean up. This caused a nasty regression (<a href="https://github.com/npm/fstream/pull/50">#13088</a>, see below) as of ~<code>npm@3.8.7</code> where the dependencies of <code>bundledDependencies</code> were no longer being included in the built package tarballs.</li>
<li>The interaction between <code>.npmignore</code>, <code>.gitignore</code>, and <code>files</code> is hopelessly complicated, scattered in many places throughout the code. We've been discussing <a href="https://github.com/npm/npm/wiki/Files-and-Ignores">making the ignores and includes logic clearer and more predictable</a>, and the current code fights our efforts to clean that up.</li>
</ul>
<p>So, our intention is still to replace <code>fstream</code>, <code>fstream-ignore</code>, and <code>fstream-npm</code> with something much simpler and purpose-built. There's no real reason to have a stream abstraction here when a simple recursive-descent filesystem visitor and a synchronous function that can answer whether a given path should be included in the packed tarball would do the job adequately.</p>
<p>What's not yet clear is whether we'll need to replace <code>node-tar</code> in the process. <code>node-tar</code> is a very robust implementation of tar (it handles, like, everything), and it also includes some very important tweaks to prevent several classes of security exploits involving maliciously crafted packages. However, its packing API involves passing in an <code>fstream</code> instance, so we'd either need to produce something that follows enough of <code>fstream</code>'s contract for <code>node-tar</code> to keep working, or swap <code>node-tar</code> out for something like <code>tar-stream</code> (and then ensuring that our use of <code>tar-stream</code> is secure, which could involve security patches for either npm or <code>tar-stream</code>). </p>
</blockquote>
<p>The testing and review of <code>fstream@1.0.10</code> that the team has done leads us to believe that this bug is fixed, but I'm feeling more than a little paranoid about fstream now, so it's important that people keep a close eye on their publishes for a while and let us know immediately if they notice any irregularities.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/8802f6c152ea35cb9e5269c077c3a2f9df411afc"><code>8802f6c</code></a> <a href="https://github.com/npm/npm/issues/5082">#5082</a> <code>fstream@1.0.10</code>: Ensure that entries are collected after a paused stream resumes. (<a href="https://github.com/rvagg">@rvagg</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c189723110497a17dac3b0596f2916deeed93ee7"><code>c189723</code></a> <a href="https://github.com/npm/npm/issues/5082">#5082</a> Remove the warning introduced in <code>npm@3.10.0</code>, because it should no longer be necessary. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3874"></a>
&lt;em&gt;ERK&lt;/em&gt;</h3>
<p>Because the interaction between <code>fstream</code>, <code>fstream-ignore</code>, <code>fsream-npm</code>, and <code>node-tar</code> is so complex, it's proven difficult to add support for npm features like <code>bundledDependencies</code> without duplicating some logic within npm's code base. While <a href="https://github.com/npm/npm/issues/9642">fixing a completely unrelated bug</a>, we "cleaned up" some of this seemingly duplicated code, and in the process removed the code that ensured that the dependencies of <code>bundledDependencies</code> are themselves bundled. We've brought that code back into the code base (without reopening #9642), and added a test to ensure that this regression can't recur.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/1b6ceca32fc81ca7cc7ac2eb7d11f687e6f87f26"><code>1b6ceca</code></a> <a href="https://github.com/npm/npm/issues/13088">#13088</a> Partially restore npm's own version of the <code>fstream-npm</code> function <code>applyIgnores</code> to ensure that the dependencies of <code>bundledDependencies</code> are included in published packages. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3875"></a>
GOODBYE, FAITHFUL FRIEND</h3>
<p>At NodeConf Adventure 2016 (RIP in peace, Mikeal Rogers's NodeConf!), the CLI team had an opportunity to talk to representatives from some of the larger companies that we knew were still using Node.js 0.8 in production. After asking them whether they were still using 0.8, we got back blank stares and questions like, "0.8? You mean, from four years ago?" After establishing that being able to run npm in their legacy environments was no longer necessary, the CLI team made the decision to drop support for 0.8. (Faithful observers of our <a href="https://github.com/npm/npm/issues?utf8=%E2%9C%93&amp;q=is%3Aissue+npm+cli+team+meeting+">team meetings</a> will have known this was the plan for NodeConf since the beginning of 2016.)</p>
<p>In practice, this means only what's in the commit below: we've removed 0.8 from our continuous integration test matrix below, and will no longer be habitually testing changes under Node 0.8. We may also give ourselves permission to use <code>setImmediate()</code> in test code. However, since the project still supports Node.js 0.10 and 0.12, it's unlikely that patches that rely on ES 2015 functionality will land anytime soon.</p>
<p>Looking forward, the team's current plan is to drop support for Node.js 0.10 when its LTS maintenance window expires in October, 2016, and 0.12 when its maintenance / LTS window ends at the end of 2016. We will also drop support for Node.js 5.x when Node.js 6 becomes LTS and Node.js 7 is released, also in the October-December 2016 timeframe.</p>
<p>(Confused about Node.js's LTS policy? <a href="https://github.com/nodejs/LTS">Don't be!</a> If you look at <a href="https://github.com/nodejs/LTS/blob/ce364a94b0e0619eba570cd57be396573e1ef889/schedule.png">this diagram</a>, it should make all of the preceding clear.)</p>
<p>If, in practice, this doesn't work with distribution packagers or other community stakeholders responsible for packaging and distributing Node.js and npm, please reach out to us. Aligning the npm CLI's LTS policy with Node's helps everybody minimize the amount of work they need to do, and since all of our teams are small and very busy, this is somewhere between a necessity and non-negotiable.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/d6afd5ffb1b19e5d94aeee666afcb8adaced58db"><code>d6afd5f</code></a> Remove 0.8 from the Node.js testing matrix, and reorder to match real-world priority, with comments. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3876"></a>
v3.10.0 (2016-06-16):</h2>
<p>Do we have a release for you! We have our first new lifecycle since <code>version</code>, a new progress bar and a bunch of bug fixes. <a href="https://github.com/iarna">I'm</a> really excited about this release, let me tell you!!</p>
<h3><a class="anchor" id="autotoc_md3877"></a>
DANGER: PUBLISHING ON NODE 6.0.0</h3>
<p>Publishing and packing are buggy under Node versions greater than 6.0.0. Please use Node.js LTS (4.4.x) to publish packages. See <a href="https://github.com/npm/npm/issues/5082">#5082</a> for details and current status.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/4e52cef3d4170c8abab98149666ec599f8363233"><code>4e52cef</code></a> <a href="https://github.com/npm/npm/pull/13077">#13077</a> Warn when using Node 6+. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3878"></a>
NEW LIFECYCLE SCRIPT: &lt;tt&gt;shrinkwrap&lt;/tt&gt;</h3>
<ul>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/e8c80f20bfd5d1618e85dbab41660d6f3e5ce405"><code>e8c80f2</code></a> <a href="https://github.com/npm/npm/issues/10744">#10744</a> You can now add <code>preshrinkwrap</code>, <code>shrinkwrap</code> and <code>postshrinkwrap</code> to your <code>package.json</code> scripts section. They are run when you run <code>npm shrinkwrap</code> or <code>npm install --save</code> with an <code>npm-shrinkwrap.json</code> present in your module directory.</p>
<p class="startli"><code>preshrinkwrap</code> and <code>shrinkwrap</code> is run prior to generating the new <code>npm-shrinkwrap.json</code> and <code>postshrinkwrap</code> is run after. (<a href="https://github.com/SimenB">@SimenB</a>)</p>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md3879"></a>
NEW PROGRESS BAR</h3>
<p><img src="http://shared.by.re-becca.org/misc-images/new-gauge-color.gif" alt="Install with new progress bar" class="inline"/></p>
<p>We have a new progress bar and a bunch of related improvements!</p>
<h4><a class="anchor" id="autotoc_md3880"></a>
BLOCKING BLOCKING</h4>
<p><b>!!WARNING!!</b> As a part of this change we now explicitly set <code>process.stdout</code> and <code>process.stderr</code> to be <em>blocking</em> if they are ttys, using <a href="https://www.npmjs.com/package/set-blocking">set-blocking</a>. This is necessary to ensure that we can fully erase the progress bar before we start writing other things out to the console.</p>
<p>Prior to Node.js 6.0.0, they were already blocking on Windows, and MacOS. Meanwhile, on Linux they were always non-blocking but had large (64kb) buffers, which largely made this a non-issue there. Starting with Node.js 6.0.0 they became non-blocking on MacOS and that caused some unexpected issues (see <a href="https://github.com/nodejs/node/issues/6456">nodejs/node#6456</a>).</p>
<p>If you are a Linux user, it's plausible that this might have a performance impact if your terminal can't keep up with output rate. If you experience this, we want to know! Please <a href="https://github.com/npm/npm/issues/new">file an issue</a> at our issue tracker.</p>
<h4><a class="anchor" id="autotoc_md3881"></a>
BETTER LAYOUT</h4>
<p>Let's start by talking about what goes into the new progress bar:</p>
<div class="fragment"><div class="line">⸨░░░░░░░░░░⠂⠂⠂⠂⠂⠂⠂⠂⸩ ⠹ loadExtraneous: verb afterAdd /Users/rebecca/.npm/null/0.0.0/package/package.json written</div>
<div class="line"> ↑‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾  ↑ ‾‾‾‾‾‾‾‾‾↑‾‾‾‾   ‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾↑‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾</div>
<div class="line"> percent complete     spinner    current thing we&#39;re doing     most recent log line</div>
</div><!-- fragment --><p>The <em>spinner</em> is intended as an activity indicator–it moves whenever npm sends something to its logs. It also spins at a constant speed while waiting on the network.</p>
<p>The <em>current thing we're doing</em> relates to how we track how much work has been done. It's the name of the unit of work we most recently started or completed some of. Sometimes these names are more obvious than others and that's something we'll look at improving over time.</p>
<p>And finally, the <em>most recent log line</em> is exactly that, it's the most recent line that you would have seen if you were running with <code>--loglevel=silly</code> or were watching the <code>npm-debug.log</code>. These are written to be useful to the npm developers above all else, so they may sometimes be a little cryptic.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/6789978ab0713f67928177a9109fed43953ccbda"><code>6789978</code></a> <a href="https://github.com/npm/npm/pull/13075">#13075</a> <code>npmlog@3.1.2</code>: Update to the latest npmlog, which includes the new and improved progress bar layout. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h4><a class="anchor" id="autotoc_md3882"></a>
MORE PERFORMANT</h4>
<p>The underlying code for the progress bar was rewritten, in part with performance in mind. Previously whenever you updated the progress bar it would check an internal variable for how long it had been since the last update and if it had been long enough, it would print out what you gave it. With the new progress bar we do updates at a fixed interval (with <code>setInterval</code>) and "updating" the progress bar just updates some variables that will be used when the next tick of the progress bar happens. Currently progress bar updates happen every 50ms, although that's open to tuning.</p>
<h4><a class="anchor" id="autotoc_md3883"></a>
WIDE(R) COMPATIBILITY</h4>
<p>I spent a lot of time working our Unicode support. There were a few issues that plagued us:</p>
<p>Previously one of the characters we used was <em>ambiguous width</em> which means that it was possible to configure your terminal to display it as <em>full width</em>. If you did this, the output would be broken because we assumed it was a <em>half width</em> character. We no longer use any of these characters.</p>
<p>Previously, we defaulted to using Unicode on Windows. This isn't a safe assumption, however, as folks in non-US locales often use other code pages for their terminals. Windows doesn't provide* any facility available to Node.js for determining the current code page, so we no longer try to use Unicode on Windows.</p>
<p>_* The facilities it does provide are a command line tool and a windows system call. The former isn't satisfactory for speed reasons and the latter can't be accessed from a JS-only Node.js program._</p>
<h4><a class="anchor" id="autotoc_md3884"></a>
FOR THE FUTURE: THEMES</h4>
<p>The new version of the progress bar library supports plugable themes. Adding support to npm shouldn't be too difficult. The built in themes are:</p>
<ul>
<li><code>ASCII</code> – The fallback theme which is always available.</li>
<li><code>colorASCII</code> – Inverts the color of the completed portion of the progress bar. The default on Windows and usually on Linux. (Color support is determined by looking at the <code>TERM</code> environment variable.)</li>
<li><code>brailleSpinner</code> – A braille based spinner and other unicode enhancements. MacOS only.</li>
<li><code>colorBrailleSpinner</code> – The default on MacOS, a combination of the above two.</li>
</ul>
<h4><a class="anchor" id="autotoc_md3885"></a>
LESS GARBLED OUTPUT</h4>
<p>As a part of landing this I've also taken the opportunity to more systematically disable the progress bar prior to printing to <code>stdout</code> or running external commands (in particular: git). This should ensure that the progress bar doesn't get left on screen after something else prints something. We also are now much more zealous about erasing the progress bar on exit, so if you <code>Ctrl-C</code> out of an install we'll still cleanup the progress bar.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/63f153c743f9354376bfb9dad42bd028a320fd1f"><code>63f153c</code></a> <a href="https://github.com/npm/npm/pull/13075">#13075</a> Consistently make sure that the progress bar is hidden before we try to write to stdout. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8da79fa60de4972dca406887623d4e430d1609a1"><code>8da79fa</code></a> <a href="https://github.com/npm/npm/pull/13075">#13075</a> Be more methodical about disabling progress bars before running external commands. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3886"></a>
REPLACE &lt;tt&gt;process.nextTick&lt;/tt&gt; WITH &lt;tt&gt;asap&lt;/tt&gt; ASAP</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/5873b56cb315437dfe97e747811c0b9c297bfd38"><code>5873b56</code></a> <a href="https://github.com/npm/npm/commit/254ad7e38f978b81046d242297fe8b122bfb5852"><code>254ad7e</code></a> <a href="https://github.com/npm/npm/issues/12754">#12754</a> Use <code>asap</code> in preference over <code>process.nextTick</code> to avoid recursion warnings. Under the hood <code>asap</code> uses <code>setImmediate</code> when available and falls back to <code>process.nextTick</code> when it's not. Versions of node that don't support <code>setImmediate</code> have a version of <code>process.nextTick</code> that actually behaves like the current <code>setImmediate</code>. (<a href="https://github.com/lxe">@lxe</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3887"></a>
FIXES AND REFACTORING</h3>
<p>Sometimes the installer would get it into its head that it could move or remove things that it really shouldn't have. While the reproducers for this were often a bit complicated (the core reproducer involved five symlinks(!)), it turns out this is an easy scenario to end up in if your project has a bunch of small modules and you're linking them while developing them.</p>
<p>Fixing this ended up involving doing an important and overdue rewrite of how the installer keeps track of (and interrogates) the relationships between modules. This likely fixes other related bugs, and in the coming weeks we'll verify and close them as we find them. There are a whole slew of commits related to this rewrite, and if you'd like to learn more check out the PR where I describe what I did in detail: <a href="https://github.com/npm/npm/pull/12775">#12775</a></p>
<ul>
<li><a href="https://github.com/npm/npm/commit/8f3e111fdd2ce7824864f77b04e5206bdaf961a1"><code>8f3e111</code></a> <a href="https://github.com/npm/npm/commit/c0b0ed1e9945c01b2e68bf22af3fe4005aa4bcd4"><code>c0b0ed1</code></a> <a href="https://github.com/npm/npm/issues/10800">#10800</a> Remove install pruning stage–this was obsoleted by making the installer keep itself up to date as it goes along. This is NOT related to <code>npm prune</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3888"></a>
MAKE OUTDATED MORE WIDELY LEGIBLE</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/21c60e9bb56d47da17b79681f2142b3dcf4c804b"><code>21c60e9</code></a> <a href="https://github.com/npm/npm/pull/12843">#12843</a> In `npm outdated, stop coloring the <em>Location</em> and <em>Package Type</em> columns. Previously they were colored dark gray, which was hard to read for some users. (<a href="https://github.com/tribou">@tribou</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3889"></a>
DOCUMENTATION UPDATE</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/eb0a72eb95862c1d0d41a259d138ab601d538793"><code>eb0a72e</code></a> <a href="https://github.com/npm/npm/pull/12983">#12983</a> Describe how to run the lifecycle scripts of dependencies. How you do this changed with <code>npm</code> v2. (<a href="https://github.com/Tapppi">@Tapppi</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3890"></a>
DEPENDENCY UPDATES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/da743dc2153fed8baca3dada611b188f53ab5931"><code>da743dc</code></a> <code>which@1.2.10</code>: Fix bug where unnecessary special case path handling for Windows could produce unexpected results on Unix systems. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4533bd501d54aeedfec3884f4fd54e8c2edd6020"><code>4533bd5</code></a> <code>npm-user-validate@0.1.4</code>: Validate the length of usernames. (<a href="https://github.com/aredridel">@aredridel</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4a18922e56f9dc902fbb4daa8f5fafa4a1b89376"><code>4a18922</code></a> <code>glob@7.0.4</code>: Fixes issues with Node 6 and "long or excessively symlink-looping paths". (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/257fe11052987e5cfec2abdf52392dd95a6c6ef3"><code>257fe11</code></a> <code>npm-package-arg@4.2.0</code>: Add <code>escapedName</code> to the result. It is suitable for passing through to a registry without further processing. (<a href="https://github.com/nexdrew">@nexdrew</a>)</li>
<li><a href="https://github.com/npm/npm/commit/dda3ca70f74879106589ef29e167c8b91ef5aa4c"><code>dda3ca7</code></a> <code>wrappy@1.0.2</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/25f1db504d0fd8c97211835f0027027fe95e0ef3"><code>25f1db5</code></a> <code>readable-stream@2.1.4</code> (<a href="https://github.com/calvinmetcalf">@calvinmetcalf</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9d64fe676ebc6949c687ffb85bd93eca3137fc0d"><code>9d64fe6</code></a> <code>abbrev@1.0.9</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3891"></a>
v3.9.6 (2016-06-02):</h2>
<h3><a class="anchor" id="autotoc_md3892"></a>
SMALL OUTPUT TWEAK</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/0bdc9d13b73df07e63a58470ea001fda490e5869"><code>0bdc9d1</code></a> <a href="https://github.com/npm/npm/pull/12879">#12879</a> The usage output for npm commands was somehow under the impression that the singular form of <code>aliases</code> is <code>aliase</code>. This has been corrected to show <code>alias</code> instead. (<a href="https://github.com/intelliot">@intelliot</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3893"></a>
DOC UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/f771b49f5d65bbef540c231fbfcca71cacdce4db"><code>f771b49</code></a> <a href="https://github.com/npm/npm/pull/12933">#12933</a> Add <code>config.gypi</code> to list of files that are always ignored in the <code>package.json</code> manpage. (<a href="https://github.com/Jokero">@Jokero</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3894"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/61c1d9cd4b2296bd41d55a5c58e35ca5f028b9bc"><code>61c1d9c</code></a> <a href="https://github.com/npm/npm/pull/12926">#12926</a> Removed unused dependency <code>lodash.isarray</code>. (<a href="https://github.com/mmalecki">@mmalecki</a>)</li>
<li><a href="https://github.com/npm/npm/commit/168ed2834b2c6db8bb39f81baadc0bf275807328"><code>168ed28</code></a> <a href="https://github.com/npm/npm/pull/12926">#12926</a> Removed unused dependency <code>lodash.keys</code>. (<a href="https://github.com/mmalecki">@mmalecki</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3895"></a>
v3.9.5 (2016-05-27):</h2>
<p>Just a quick point release. We had an issue where I (Kat) included the <code>.nyc_output/</code> directory in <code>npm@3.9.3</code> and <code>npm@3.9.4</code>. The issue got reported right after that second release (<a href="https://github.com/npm/npm/issues/12873"><code>#12873</code></a>), and now there's this small point release that's there to fix the issue sooner.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/f96aea085be981cdb59bd09f16da40717426f981"><code>f96aea0</code></a> <a href="https://github.com/npm/npm/pull/12878">#12878</a> Ignore <code>.nyc_output</code> to avoid an accidental publish or commit filled with code coverage data. (<a href="https://github.com/TheAlphaNerd">@TheAlphaNerd</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3896"></a>
v3.9.4 (2016-05-26):</h2>
<p>Hey all! It's that time again!</p>
<p>This week continues our current <code>big-bug</code> squashing push, although there's none that are ready to release quite yet &ndash; we're working on it!</p>
<p>It's also worth noting that we're entering the main part of conference season, so you can probably expect a bit of a dev slowdown as a lot of us wombats attend or speak at the various conferences. Remember <a href="npm.camp">npm.camp</a> is happening in 2 months and the lineup is looking pretty great! Tickets are still on sale. Come hang out with us! WOO FUN! 🎉😸</p>
<h3><a class="anchor" id="autotoc_md3897"></a>
BUGFIX</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/cac0038868b18295f9f299e762e20034f32a3e11"><code>cac0038</code></a> <a href="https://github.com/npm/npm/pull/12845">#12845</a> Progress bar during tarball packing now prints <code>pack:packagename</code> instead of <code>pack:[object Object]</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3898"></a>
DOC UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/0b816225c743c9203db5d92fb4dd3a9293833298"><code>0b81622</code></a> <a href="https://github.com/npm/npm/pull/12840">#12840</a> Remove sexualized language from comment in code. (<a href="https://github.com/geek">@geek</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d6dff2481cb587c392f22afb893ac3136371a64c"><code>d6dff24</code></a> <a href="https://github.com/npm/npm/pull/12802">#12802</a> Small grammar fix in <code>cli/npm.md</code>. (<a href="https://github.com/andresilveira">@andresilveira</a>)</li>
<li><a href="https://github.com/npm/npm/commit/cb38e0fff82a6c1c110026b95b07a8c32e27ec01"><code>cb38e0f</code></a> <a href="https://github.com/npm/npm/pull/12782">#12782</a> Documents that <code>NOTICE</code> files started getting included after <a href="https://github.com/npm/fstream-npm/pull/17">npm/fstream-npm#17</a>. (<a href="https://github.com/SimenB">@SimenB</a>)</li>
<li><a href="https://github.com/npm/npm/commit/70a3ae4d4ec76b3ec51f00bf5261f1147829f9fe"><code>70a3ae4</code></a> <a href="https://github.com/npm/npm/pull/12776">#12776</a> <code>npm run-script</code> used to have a <code>&lt;pkg&gt;</code> argument that allowed you to target specific packages' scripts. This was removed as one of the breaking changes for <code>npm@2</code>. This patch removes a mention of that argument, which really doesn't exist anymore. (<a href="https://github.com/fibo">@fibo</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3899"></a>
DEP UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/4a4470ddd1d9b0b62cb94f3bff5ab6b8e6db527a"><code>4a4470d</code></a> <code>aproba@1.0.3</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3900"></a>
TEST IMPROVEMENTS</h3>
<p>So it turns out, <code>t.comment</code> in <code>tap</code> is actually pretty nice! There's also a couple other test improvements by Rebecca landing here.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/9fd04dd6be493465d7ac5f14dd9328e66069c1bf"><code>9fd04dd</code></a> <a href="https://github.com/npm/npm/pull/12851">#12851</a> Rewrite <code>shrinkwrap-prod-dependency-also</code> test to use <code>common.npm</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3bc4a8ee58cb0e0adc84b4f135330f2b1e20d992"><code>3bc4a8e</code></a> <a href="https://github.com/npm/npm/pull/12851">#12851</a> Clean up <code>rm-linked</code> test. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/bf7f7f273a794f7573bbbc84b1c216fdcd9e0ef9"><code>bf7f7f2</code></a> <a href="https://github.com/npm/npm/pull/12851">#12851</a> Clean up <code>outdated-symlink</code> test. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ca0baa4dac85b1df4e26ef0c73d39314ca6858ca"><code>ca0baa4</code></a> <a href="https://github.com/npm/npm/pull/12851">#12851</a> Improve diagnostics for <code>shrinkwrap-scoped-auth</code> test. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/fbec9fd5bb0abce589120d14c1f2b03b58cecce1"><code>fbec9fd</code></a> <a href="https://github.com/npm/npm/pull/12851">#12851</a> Rewrite <code>shrinkwrap-dev-dependency</code> test to use <code>common.npm</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3901"></a>
v3.9.3 (2016-05-19):</h2>
<p>This week continues our <code>big-bug</code> squashing adventure! Things are churning along nicely, and we've gotten a lot of fantastic contributions from the community. Please keep it up!</p>
<p>A quick note on last week's release: We had a small <code>npm shrinkwrap</code>-related crasher in <code>npm@3.9.1</code>, so once this release goes out, <code>v3.9.2</code> is going to be <code>npm@latest</code>. Please update if you ended up in with that previous version!</p>
<p>Remember we have a weekly team meeting, and you can <a href="https://github.com/npm/npm/issues/12761">suggest agenda items in the GitHub issue</a>. Keep an eye out for the <code>#npmweekly</code> tag on Twitter, too, and join the conversation! We'll do our best to address questions y'all send us. ✌</p>
<h3><a class="anchor" id="autotoc_md3902"></a>
FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/42d71be2cec674dd9e860ad414f53184f667620d"><code>42d71be</code></a> <a href="https://github.com/npm/npm/pull/12685">#12685</a> When using <code>npm ls &lt;pkg&gt;</code> without a semver specifier, <code>npm ls</code> would skip any packages in your tree that matched by name, but had a prerelease version in their <code>package.json</code>. This patch fixes it so <code>npm ls</code> does a simple name match unless you use the <code>npm ls &lt;pkg&gt;@&lt;version&gt;</code> format. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c698ae666afc92fbc0fcba3c082cfa9b34a4420d"><code>c698ae6</code></a> <a href="https://github.com/npm/npm/pull/12685">#12685</a> Added some tests for more basic <code>npm ls</code> functionality. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3903"></a>
NOTABLE DEPENDENCY UPDATES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/3a6fe2373c45e80a1f28aaf176d552f6f97cf131"><code>3a6fe23</code></a> <a href="https://github.com/npm/fstream-npm/pull/17">npm/fstream-npm#17</a> <code>fstream-npm@1.1.0</code>: <code>fstream-npm</code> always includes NOTICE files now. (<a href="https://github.com/kemitchell">@kemitchell</a>)</li>
<li><a href="https://github.com/npm/npm/commit/df04e05af1f257a1903372e1baf334c0969fbdbd"><code>df04e05</code></a> <a href="https://github.com/npm/npm/issues/10013">#10013</a> <code>read-package-tree@5.1.4</code>: Fixes an issue where <code>npm install</code> would fail if your <code>node_modules</code> was symlinked. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/584676f85eaebcb9d6c4d70d2ad320be8a8d6a74"><code>584676f</code></a> <a href="https://github.com/npm/init-package-json/pull/62">npm/init-package-json#62</a> <code>init-package-json@1.9.4</code>: Stop using <code>package</code> for a variable, which defeats some bundlers and linters. (<a href="https://github.com/adius">@adius</a>)</li>
<li><a href="https://github.com/npm/npm/commit/935a7e359535e13924934811b77924cbad82619a"><code>935a7e3</code></a> <code>readable-stream@2.1.3</code>: Node 6 build and buffer-related updates. (<a href="https://github.com/calvinmetcalf">@calvinmetcalf</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3904"></a>
OTHER DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/4c4609ea49e77303f9d72af6757620e6b3a9a6a9"><code>4c4609e</code></a> <code>inflight@1.0.5</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7a3030d3d44ea2136425f72950ba22e6efd441d9"><code>7a3030d</code></a> <code>hosted-git-info@2.1.5</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5ed4b58409eeb134bca1c96252682fd7600d9906"><code>5ed4b58</code></a> <code>which@1.2.9</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3905"></a>
v3.9.2 (2016-05-17)</h2>
<p>This is a quick patch release. The previous release, 3.9.1, introduced a bug where npm would crash given a combination of specific package tree on disk and a shrinkwrap.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/cde367fbb6eebc5db68a44b12a5c7bea158d70db"><code>cde367f</code></a> <a href="https://github.com/npm/npm/issues/12724">#12724</a> Fix crasher when inflating shrinkwraps with packages on disk that were installed by older npm versions. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3906"></a>
v3.9.1 (2016-05-12)</h2>
<p>HI all! We have bug fixes to a couple of the hairy corners of <code>npm</code>, in the form of shrinkwraps and bundled dependencies. Plus some documentation improvements and our lodash deps bot a bump.</p>
<p>This is our first week really focused on getting the <a href="https://github.com/npm/npm/issues?q=is%3Aopen+is%3Aissue+label:big-bug">big bugs</a> list down. Our work from this week will be landing next week, and I can't wait to tell you about that! (It's about symlinks!)</p>
<h3><a class="anchor" id="autotoc_md3907"></a>
SHRINKWRAP FIX</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/b8944139a935680c4a267468bb2d3c3082b5609f"><code>b894413</code></a> <a href="https://github.com/npm/npm/issues/12372">#12372</a> Changing a nested dependency in an <code>npm-shrinkwrap.json</code> and then running <code>npm install</code> would not get up the updated package. This corrects that. (<a href="https://github.com/misterbyrne">@misterbyrne</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3908"></a>
BUNDLED DEPENDENCIES FIX</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/d0c6d194471be8ce3e7b41b744b24f63dd1a3f6f"><code>d0c6d19</code></a> <a href="https://github.com/npm/npm/pull/12476">#12476</a> Protects against a crasher when a bundled dep is missing a package.json. (<a href="https://github.com/dflupu">@dflupu</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3909"></a>
DOCS IMPROVEMENTS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/6699aa53c0a729cfc921ac1d8107c320e5a5ac95"><code>6699aa5</code></a> <a href="https://github.com/npm/npm/pull/12585">#12585</a> Document that engineStrict is quite gone. Not "deprecated" so much as "extirpated". (<a href="https://github.com/othiym23">@othiym23</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7a41a84b655be3204d2e80848278a510e42c80e7"><code>7a41a84</code></a> <a href="https://github.com/npm/npm/pull/12636">#12636</a> Improve <code>npm-scripts</code> documentation regarding when <code>node-gyp</code> is used. (<a href="https://github.com/reconbot">@reconbot</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4c4b4badf09b9b50cdca85314429a0111bb35cb1"><code>4c4b4ba</code></a> <a href="https://github.com/npm/npm/pull/12586">#12586</a> Correct <code>package.json</code> documentation as to when <code>node-gyp rebuild</code> called. This now matches <a href="https://docs.npmjs.com/misc/scripts#default-values">https://docs.npmjs.com/misc/scripts#default-values</a> (<a href="https://github.com/reconbot">@reconbot</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3910"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/cfa797fedd34696d45b61e3ae0398407afece880"><code>cfa797f</code></a> <code>lodash._baseuniq@4.6.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ab6f1801971b513f9294b4b8902034ab402af02d"><code>ab6f180</code></a> <code>lodash.keys@4.0.7</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4b8d8b63e760a8aa03e8bffa974495dfafbfcb06"><code>4b8d8b6</code></a> <code>lodash.union@4.4.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/46099d34542760098e5d13c7468a405a724ca407"><code>46099d3</code></a> <code>lodash.uniq@4.3.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/fff89c6826c86e9e789adcc9c398385539306042"><code>fff89c6</code></a> <code>lodash.without@4.2.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3911"></a>
v3.9.0 (2016-05-05)</h2>
<p>Wow! This is a big release week! We've completed the fixes that let the test suite pass on Windows, plus more general bug fixes we found while fixing things on Windows. Plus a warning to help folks work around a common footgun. PLUS an improvement to how npm works with long cache timeouts.</p>
<h3><a class="anchor" id="autotoc_md3912"></a>
INFINITE CACHE A LITTLE BETTER</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/111ae3ec366ece7ebcf5988f5bc2a7cd70737dfe"><code>111ae3e</code></a> <a href="https://github.com/npm/npm/issues/8581">#8581</a> When a package is fetched from the cache which cannot satisfy the version requirements, an attempt to fetch it from the network is made. This is helpful for folks using high values for <code>--cache-min</code> who are willing to accept possibly not-the-most-recent modules in return for less network traffic. (<a href="https://github.com/Zirak">@Zirak</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3913"></a>
WARNING: FOOTGUN</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/60b9a051aa46b8892fe63b3681839a6fd6642bfd"><code>60b9a05</code></a> <a href="https://github.com/npm/npm/pull/12475">#12475</a> Options can only start with ASCII dashes. Ordinarily this isn't a problem but many web documentation tools "helpfully" convert <code>--</code> into an emdash (–), or <code>-</code> into an endash (–). If you copy and paste from this documentation your commands won't work the way you expect. This adds a warning that tries to be a little more descriptive about why your command is failing. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3914"></a>
WINDOWS CI</h3>
<p>We have <a href="https://ci.appveyor.com/project/npm/npm">Windows CI</a> setup now! We still have to tweak it a little bit around paths to the git binaries, but it's otherwise ready!</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/bb5d6cbf46b2609243d3b384caadd196e665a797"><code>bb5d6cb</code></a> <a href="https://github.com/npm/npm/pull/11444">#11444</a> Add AppVeyor to CI matrix. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3915"></a>
COVERAGE DATA</h3>
<p>Not only do our tests produce coverage reports after they run now, we also automatically <a href="https://coveralls.io/github/npm/npm">update Coveralls</a> with results from <a href="travis-ci.org/npm/npm">Travis CI</a> runs.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/044cbab0d49adeeb0d9310c64fee6c9759cc7428"><code>044cbab</code></a> <a href="https://github.com/npm/npm/pull/11444">#11444</a> Enable coverage reporting for every test run. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3916"></a>
EVERYONE BUGS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/37c6a51c71b0feec8f639b3199a8a9172e58deec"><code>37c6a51</code></a> <a href="https://github.com/npm/npm/pull/12150">#12150</a> Ensure that 'npm cache ls' outputs real filenames. Previously it would sometimes double up the package name in the path it printed. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d3ce0b253eb519375071aee29db4ee129dbcdf5c"><code>d3ce0b2</code></a> <a href="https://github.com/npm/npm/pull/11444">#11444</a> Fix unbuilding bins for scoped modules. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e928a30947477a09245f54e9381f46b97bee32d5"><code>e928a30</code></a> <a href="https://github.com/npm/npm/pull/11444">#11444</a> Make handling of local modules (eg <code>npm install /path/to/my/module</code>) more consistent when saved to a <code>package.json</code>. There were bugs previously where it wouldn't consistently resolve relative paths in the same way. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b820ed4fc04e21577fa66f7c9482b5ab002e7985"><code>b820ed4</code></a> <a href="https://github.com/npm/npm/pull/11444">#11444</a> Under certain circumstances the paths produced for linking, either relative or absolute, would end up basing off the wrong virtual cwd. This resulted in failures for <code>npm link</code> in this situations. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3917"></a>
WINDOWS BUGS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/7380425d810fb8bfc69405a9cbbdec19978a7bee"><code>7380425</code></a> <a href="https://github.com/npm/npm/pull/11444">#11444</a> Scoped module names were not being correctly inferred from the path on Windows. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/91fc24f2763c2e0591093099ffc866c735f27fde"><code>91fc24f</code></a> <a href="https://github.com/npm/npm/pull/11444">#11444</a> Explore with a command to run didn't work properly in Windows–&#160;it would pop open a new cmd window and leave it there. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3918"></a>
WINDOWS REFACTORING</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/f07e6430d4ca02f811138f6140a8bad927607a1f"><code>f07e643</code></a> <a href="https://github.com/npm/npm/pull/11444">#11444</a> Move exec path escaping out to its own function. This turns out to be tricky to get right because how you escape commands to run on Windows via cmd is different then how you escape them at other times. Specifically, you HAVE to quote each directory segment that has a quote in it, that is: <code>C:\"Program Files"\MyApp\MyApp.exe</code> By contrast, if that were an argument to a command being run, you CAN'T DO quote it that way, instead you have to wrap the entire path in quotes, like so: <code>"C:\Program
  Files\MyApp\MyApp.exe"</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2e01d299f8244134b1aa040cab1b59c72c9df4da"><code>2e01d29</code></a> <a href="https://github.com/npm/npm/pull/11444">#11444</a> Create a single function for detecting if we're running on Windows (and using a Windows shell like cmd) and use this instead of doing it one-off all over the place. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3919"></a>
FIX WINDOWS TESTS</h3>
<p>As I said before, our tests are passing on Windows! 🎉</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/ef0dd74583be25c72343ed07d1127e4d0cc02df9"><code>ef0dd74</code></a> <a href="https://github.com/npm/npm/pull/11444">#11444</a> The fruits of many weeks of labor, fix our tests to pass on Windows. (<a href="https://github.com/zkat">@zkat</a>) (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3920"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/8fccda8587209659c469ab55c608b0e2d7533530"><code>8fccda8</code></a> <a href="https://github.com/npm/npm/pull/11444">#11444</a> <code>normalize-git-url@3.0.2</code>: Fix file URLs on Windows. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f53a154df8e0696623e6a71f33e0a7c11a7555aa"><code>f53a154</code></a> <code>readable-stream@2.1.2</code>: When readable-stream is disabled, reuse result of &lsquo;require('stream&rsquo;)` instead of calling it every time. (<a href="https://github.com/calvinmetcalf">@calvinmetcalf</a>)</li>
<li><a href="https://github.com/npm/npm/commit/02841cfb81d6ba86f691ab43d9bbdac29aec27e7"><code>02841cf</code></a> <a href="https://github.com/npm/npm/pull/11444">#11444</a> <code>realize-package-specifier@3.0.2</code>: Resolve local package paths relative to package root, not cwd. (<a href="https://github.com/zkat">@zkat</a>) (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/247c1c5ae08c882c9232ca605731039168bae6ed"><code>247c1c5</code></a> <a href="https://github.com/npm/npm/pull/11444">#11444</a> <code>npm-package-arg@4.1.1</code>: Fix Windows file URIs with leading slashes. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/365c72bc3ecd9e45f9649725dd635d5625219d8c"><code>365c72b</code></a> <code>which@1.2.8</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e568caabb8390a924ce1cfa51fc914ee6c1637a2"><code>e568caa</code></a> <code>graceful-fs@4.1.4</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/304b97434959a58f84383bcccc0357c51a4eb39a"><code>304b974</code></a> <a href="https://github.com/npm/npm/pull/11444">#11444</a> <code>standard@6.0.8</code> (<a href="https://github.com/feross">@feross</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3921"></a>
v3.8.9 (2016-04-28)</h2>
<p>Our biggest news this week is that we got the <a href="https://github.com/npm/npm/pull/11444">Windows test suite passing</a>! It'll take a little longer to get it passing in our <a href="https://ci.appveyor.com/project/npm/npm/">Windows CI</a> but that's coming soon too.</p>
<p>That means we'll be shifting gears away from tests to fixing <a href="https://github.com/npm/npm/issues?q=is%3Aopen+is%3Aissue+label%3Abig-bug">Big Bugs™</a> again. Join us at our <a href="https://github.com/npm/npm/issues/12517">team meeting</a> next Tuesday to learn more about that.</p>
<h3><a class="anchor" id="autotoc_md3922"></a>
BUG FIXES AND REFACTORING</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/60da61862885fa904afba7d121860b4282a5b0df"><code>60da618</code></a> <a href="https://github.com/npm/npm/issues/12347">#12347</a> Fix a bug that could result in shrinkwraps missing the <code>resolved</code> field, which is necessary in producing a fully reproducible build. (<a href="https://github.com/sminnee">@sminnee</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8597ba432e91245a1000953b612eb01308178bad"><code>8597ba4</code></a> <a href="https://github.com/npm/npm/issues/12009">#12009</a> Fix a bug in <code>npm view &lt;packagename&gt; versions</code> that resulted in bad output if you didn't also pass in <code>--json</code>. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/20125f19b96fd05af63f8c0bd243ffb25780279a"><code>20125f1</code></a> <a href="https://github.com/npm/npm/commit/a53feac2647f7dc4245f1700dfbdd1aba8745672"><code>a53feac</code></a> <a href="https://github.com/npm/npm/commit/6cfbae403abc3cf690565b09569f71cdd41a8372"><code>6cfbae4</code></a> <a href="https://github.com/npm/npm/pull/12485">#12485</a> Refactor how the help summaries for commands are produced, such that we only have one list of command aliases. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/2ae210c76ab6fd15fcf15dc1808b01ca0b94fc9e"><code>2ae210c</code></a> <code>read-package-json@2.0.4</code>: Fix a crash we discovered while fixing up the Windows test suite where if you had a file in your <code>node_modules</code> it would cause a crash on Windows (but not MacOS/Linux).</p>
<p class="startli">This makes the error code you get on Windows match that from MacOS/Linux if you try to read a <code>package.json</code> from a path that includes a file, not a folder. (<a href="https://github.com/zkat">@zkat</a>)</p>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md3923"></a>
v3.8.8 (2016-04-21)</h2>
<p>Hi all! Long time no see! We've been heads-down working through getting <a href="https://github.com/npm/npm/pull/11444">our test suite passing on Windows</a>. Did you know that we have <a href="https://ci.appveyor.com/project/npm/npm">Windows CI</a> now running over at Appveyor? In the meantime, we've got a bunch of dependency updates, some nice documentation improvements and error messages when your <code>package.json</code> contains invalid JSON. (Yeah, I thought we did that last one before too!)</p>
<h3><a class="anchor" id="autotoc_md3924"></a>
BAD JSON IS BAD</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/769e6200722d8060b6769e47354032c51cfa85a1"><code>769e620</code></a> <a href="https://github.com/npm/npm/pull/12406">#12406</a> Failing to parse the top level <code>package.json</code> should be an error. (<a href="https://github.com/watilde">@watilde</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3925"></a>
DOCUMENTATION</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/7d643018af5051c920cc73f17bfe32b7ff86e108"><code>7d64301</code></a> <a href="https://github.com/npm/npm/pull/12415">#12415</a> Clarify that when configuring client-side certificates for authenticating to non-npm registries that <code>cert</code> and <code>key</code> are not filesystem paths and should actually include the certificate and key data. (<a href="https://github.com/rvedotrc">@rvedotrc</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f8539b8c986e81771ccc8ced7e716718423d3187"><code>f8539b8</code></a> <a href="https://github.com/npm/npm/pull/12324">#12324</a> Describe how <code>npm run</code> sets <code>NODE</code> and <code>PATH</code> in more detail. Note that <code>npm run</code> changes <code>PATH</code> to include the current node interpreter’s directory. (<a href="https://github.com/addaleax">@addaleax</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2b57606852a2c2a03e4c4b7dcda85b807619c2cf"><code>2b57606</code></a> <a href="https://github.com/npm/npm/pull/11461">#11461</a> Clarify the documentation for the package.json homepage field. (<a href="https://github.com/stevemao">@stevemao</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3926"></a>
TESTS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/b5a0fbb9e1a2c4fb003dd748264571aa6e3c9e70"><code>b5a0fbb</code></a> <a href="https://github.com/npm/npm/pull/12329">#12329</a> Fix progress config testing to ignore local user configs. Previously, <em>any</em> local setting would cause the tests to fail as they were trying to test what the default values for the progress bar would be in different environments and any explicit setting overrides those defaults. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3d195bc0a72b40df02a5c56e4f3be44152e8222b"><code>3d195bc</code></a> The lifecycle-signal test could crash on v0.8 due to its use of <code>Number.parseInt</code>, which isn't available in that version of node. Fortunately <code>global.parseInt</code> <em>is</em>, so we just use that instead. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3927"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/05a28e38586082ac4bbf26ee6f863cc8d07054d6"><code>05a28e3</code></a> <code>npm-package-arg@4.1.1</code>: Under some circumstances <code><a href="file://">file://</a></code> URLs on Windows were not handled correctly.</p>
<p class="startli">Also, stop converting local module/tarballs into full paths in this module. We do already do that in <code>realize-package-specifier</code>, which is more appropriate as it knows what package we're installing relative to. (<a href="https://github.com/zkat">@zkat</a>)</p>
</li>
<li><a href="https://github.com/npm/npm/commit/ada2e93e8b276000150a9aa93fff69ec366e03d6"><code>ada2e93</code></a> <code>realize-package-specifier@3.0.3</code>: Require the new <code>npm-package-arg</code>, plus fix a case where specifiers that were maybe a tag, maybe a local filename were resolved differently than those that were definitely a local filename. (<a href="https://github.com/zkat">@zkat</a>) (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/adc515b22775871386cd62390079fb4bf8e1714a"><code>adc515b</code></a> <code>fs-vacuum@1.2.9</code>: A fix for AIX where a non-empty directory can cause <code>fs.rmDir</code> to fail with <code>EEXIST</code> instead of <code>ENOTEMPTY</code> and three new tests (<a href="https://github.com/richardlau">@richardlau</a>)</p>
<p class="startli">Code cleanup, CI &amp; dependency updates. (<a href="https://github.com/othiym23">@othiym23</a>)</p>
</li>
<li><a href="https://github.com/npm/npm/commit/ef53a46906ce872a4541b605dd42a563cc26e614"><code>ef53a46</code></a> <code>tap@5.7.1</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/df1f2e4838b4d7ea2ea2321a95ae868c0ec0a520"><code>df1f2e4</code></a> <code>request@2.72.0</code>: Fix crashes when response headers indicate gzipped content but the body is empty. Add support for the deflate content encoding. (<a href="https://github.com/simov">@simov</a>)</li>
<li><a href="https://github.com/npm/npm/commit/776c599b204632aca9d29fd92ea5c4f099fdea9f"><code>776c599</code></a> <code>readable-stream@2.1.0</code>: Adds READABLE_STREAM env var that, if set to <code>disable</code>, will make <code>readable-stream</code> use the local native node streams instead. (<a href="https://github.com/calvinmetcalf">@calvinmetcalf</a>)</li>
<li><a href="https://github.com/npm/npm/commit/10d6d5547354fcf50e930c7932ba4d63c0b6009c"><code>10d6d55</code></a> <code>normalize-git-url@3.0.2</code>: Add support <code>git+file://</code> type URLs. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/75017aeecec69a1efd546df908aa5befc4467f36"><code>75017ae</code></a> <code>lodash.union@4.3.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3928"></a>
v3.8.7 (2016-04-07)</h2>
<h3><a class="anchor" id="autotoc_md3929"></a>
IMPROVED DIAGNOSTICS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/38cf79ffa564ef5cb6677b476e06d0e45351592a"><code>38cf79f</code></a> <a href="https://github.com/npm/npm/pull/12083">#12083</a> If you <code>ignore-scripts</code> to disable lifecycles, this makes npm report when it skips running a script. (<a href="https://github.com/bfred-it">@bfred-it</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3930"></a>
IMPROVE AUTO-INCLUDES</h3>
<ul>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/c615182c8b47e418338eb1317b99bb66987cda54"><code>c615182</code></a> <a href="https://github.com/npm/npm/pull/11995">#11995</a> There were bugs where modules whose names matched the special files that npm always includes would be included, for example, the <code>history</code> package was always included.</p>
<p class="startli">With <code>npm@3</code> such extraneously bundled modules would not be ordinarily used, as things in <code>node_modules</code> in packages are ignored entirely if the package isn't marked as bundling modules.</p>
<p class="startli">Because of this <code>npm@3</code> behavior, the <code>files-and-ignores</code> test failed to catch this as it was testing <em>install output</em> not what got packed. That has also been fixed. (<a href="https://github.com/glenjamin">@glenjamin</a>)</p>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md3931"></a>
DOCUMENTATION UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/823d9dfa91d7086a26620f007aee4e3cd77b6153"><code>823d9df</code></a> <a href="https://github.com/npm/npm/pull/12107">#12107</a> In the command summary for <code>adduser</code> mention that <code>login</code> is an alias. (<a href="https://github.com/gnerkus">@gnerkus</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7aaf47e124c45dde72c961638b770ee535fb2776"><code>7aaf47e</code></a> <a href="https://github.com/npm/npm/pull/12244">#12244</a> Update the README to suggest npm@3 for Windows users. Also add a reference to <a href="https://github.com/felixrieseberg/npm-windows-upgrade">Microsoft's npm upgrade tool</a>. (<a href="https://github.com/felixrieseberg">@felixrieseberg</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3932"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/486bbc0e1b101f847e890e6f1925dc8cb253cf3e"><code>486bbc0</code></a> <code>request@2.70.0</code> (<a href="https://github.com/simov">@simov</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b1aff346fc41f13e3306b437e1831942aacf2f54"><code>b1aff34</code></a> <code>lodash.keys@4.0.6</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3933"></a>
v3.8.6 (2016-03-31)</h2>
<p>Heeeeeey y'all.</p>
<p>Kat here! Rebecca's been schmoozing with folks at <a href="https://build.microsoft.com/">Microsoft Build</a>, so I'm doing the <code>npm@3</code> release this week.</p>
<p>Speaking of Build, it looks like Microsoft is doing some bash thing. This might be really good news for our Windows users once it rolls around. We're keeping an eye out and feeling hopeful. 🙆</p>
<p>As far as the release goes: We're really happy to be getting more and more community contributions! Keep it up! We really appreciate folks trying to help us, and we'll do our best to help point you in the right direction. Even things like documentation are a huge help. And remember &ndash; you get socks for it, too!</p>
<h3><a class="anchor" id="autotoc_md3934"></a>
FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/f8fb4d83923810eb78d075bd200a9376c64c3e3a"><code>f8fb4d8</code></a> <a href="https://github.com/npm/npm/pull/12079">#12079</a> Back in <code>npm@3.2.2</code> we included [a patch that made it so <code>npm install pkg</code> was basically <code>npm install pkg@latest</code> instead of <code>pkg@*</code>](<a href="https://github.com/npm/npm/pull/9170">https://github.com/npm/npm/pull/9170</a>) This is probably what most users expected, but it also ended up <a href="https://github.com/npm/npm/pull/9170">breaking <code>npm deprecate</code></a> when no version was provided for a package. In that case, we were using <code>*</code> to mean "deprecate all
  versions" and relying on the <code>pkg</code> -&gt; <code>pkg@*</code> conversion. This patch fixes <code>npm deprecate pkg</code> to work as it used to by special casing that particular command's behavior. (<a href="https://github.com/polm">@polm</a>)</li>
<li><a href="https://github.com/npm/npm/commit/458f7734f3376aba0b6ff16d34a25892f7717e40"><code>458f773</code></a> <a href="https://github.com/npm/npm/pull/12146">#12146</a> Adds <code>make doc-clean</code> to <code>prepublish</code> script, to clear out previously built docs before publishing a new npm version (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f0d1521038e956b2197673f36c464684293ce99d"><code>f0d1521</code></a> <a href="https://github.com/npm/npm/pull/12146">#12146</a> Adds <code>doc-clean</code> phony target to <code>make publish</code>. (<a href="https://github.com/watilde">@watilde</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3935"></a>
DOC UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/ea92ffc9dd2a063896353fc52c104e85ec061360"><code>ea92ffc</code></a> <a href="https://github.com/npm/npm/pull/12147">#12147</a> Document that the current behavior of <code>engines</code> is just to warn if the node platform is incompatible. (<a href="https://github.com/reconbot">@reconbot</a>)</li>
<li><a href="https://github.com/npm/npm/commit/cd1ba4423b3ca889c741141b95b0d9472b9f71ea"><code>cd1ba44</code></a> <a href="https://github.com/npm/npm/pull/12143">#12143</a> Remove <code>npm faq</code> command, since the <a href="https://github.com/npm/npm/pull/10547">FAQ was removed</a>. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/50a12cb1f5f158af78d6962ad20ff0a98bc18f18"><code>50a12cb</code></a> <a href="https://github.com/npm/npm/pull/12143">#12143</a> Remove references to the FAQ from the docs, since <a href="https://github.com/npm/npm/pull/10547">it was removed</a>. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/60051c25e2ab80c667137dfcd04b242eea25980e"><code>60051c2</code></a> <a href="https://github.com/npm/npm/pull/12093">#12093</a> Update <code>bugs</code> url in <code>package.json</code> to use the <code>https</code> URL for Github. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/af30c374ef22ed1a1c71b14fced7c4b8350e4e82"><code>af30c37</code></a> <a href="https://github.com/npm/npm/pull/12075">#12075</a> Add the <code>--ignore-scripts</code> flag to the <code>npm install</code> docs. (<a href="https://github.com/paulirish">@paulirish</a>)</li>
<li><a href="https://github.com/npm/npm/commit/632b214b2f2450e844410792e5947e46844612ff"><code>632b214</code></a> <a href="https://github.com/npm/npm/pull/12063">#12063</a> Various minor fixes to the html docs homepage. (<a href="https://github.com/watilde">@watilde</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3936"></a>
DEP BUMPS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/3da01716a0e41d6b5adee2b4fc70fcaf08c0eb24"><code>3da0171</code></a> <code>lodash.without@4.1.2</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/69ccf6dd4caf95cd0628054307487cae1885acd0"><code>69ccf6d</code></a> <code>lodash.uniq@4.2.1</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b50c41a9930dc5353a23c5ae2ff87bb99e11d482"><code>b50c41a</code></a> <code>lodash.union@4.2.1</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/59c1ad7b6f243d07618ed5703bd11d787732fc57"><code>59c1ad7</code></a> <code>lodash.clonedeep@4.3.2</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2b4f797dba8e7a1376c8335b7223e82d02cd8243"><code>2b4f797</code></a> <code>lodash._baseuniq@4.5.1</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3937"></a>
v3.8.5 (2016-03-24)</h2>
<p>Like my esteemed colleague <a href="https://github.com/zkat">@zkat</a> said in this week's <a href="https://github.com/npm/npm/releases/tag/v2.15.2">LTS release notes</a>, this week is another small release but we are continuing to work on our <a href="https://github.com/npm/npm/pull/11444">Windows efforts</a>.</p>
<p>You may also be interested in reading the <a href="https://github.com/npm/npm/wiki/LTS">LTS process and policy</a> that <a href="https://github.com/othiym23">@othiym23</a> put together recently. If you have any feedback, we would love to hear.</p>
<h3><a class="anchor" id="autotoc_md3938"></a>
DOCTOR IT HURTS WHEN LINK TO MY LINK</h3>
<p>Well then, don't do that.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/0d4a0b1"><code>0d4a0b1</code></a> <a href="https://github.com/npm/npm/pull/11442">#11442</a> Fail if the user asks us to make a link from a module back on to itself. (<a href="https://github.com/antialias">@antialias</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3939"></a>
ERR MODULE LIST TOO LONG</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/b271ed2"><code>b271ed2</code></a> <a href="https://github.com/npm/npm/issues/11983">#11983</a> Exit early if no arguments were provided to search instead of trying to display all the modules, running out of memory, and then crashing. (<a href="https://github.com/SimenB">@SimenB</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3940"></a>
ELIMINATE UNUSED MODULE</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/b8c7cd7"><code>b8c7cd7</code></a> <a href="https://github.com/npm/npm/pull/12000">#12000</a> Stop depending on <a href="https://npmjs.com/package/async-some"><code>async-some</code></a> as it's no longer used in npm. (<a href="https://github.com/watilde">@watilde</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3941"></a>
DOCUMENTATION IMPROVEMENTS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/fdd6b28"><code>fdd6b28</code></a> <a href="https://github.com/npm/npm/pull/11884">#11884</a> Include <code>node_modules</code> in the list of files and directories that npm won't include in packages ordinarily. (Modules listed in <code>bundledDependencies</code> and things that those modules rely on, ARE included of course.) (<a href="https://github.com/Jameskmonger">@Jameskmonger</a>)</li>
<li><a href="https://github.com/npm/npm/commit/aac15eb"><code>aac15eb</code></a> <a href="https://github.com/npm/npm/pull/12006">#12006</a> Fix typo in npm-orgs documentation, where teams docs went to access docs and vice versa. (<a href="https://github.com/yaelz">@yaelz</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3942"></a>
FEWER NETWORK TESTS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/3e41360"><code>3e41360</code></a> <a href="https://github.com/npm/npm/pull/11987">#11987</a> Fix test that was inappropriately hitting the network (<a href="https://github.com/yodeyer">@yodeyer</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3943"></a>
v3.8.4 (2016-03-24)</h2>
<p>Was erroneously released with just a changelog typo correction and was otherwise the same as 3.8.3.</p>
<h2><a class="anchor" id="autotoc_md3944"></a>
v3.8.3 (2016-03-17):</h2>
<h3><a class="anchor" id="autotoc_md3945"></a>
SECURITY ADVISORY: BEARER TOKEN DISCLOSURE</h3>
<p>This release includes <a href="https://github.com/npm/npm/commit/f67ecad59e99a03e5aad8e93cd1a086ae087cb29">the fix for a vulnerability</a> that could cause the unintentional leakage of bearer tokens.</p>
<p>Here are details on this vulnerability and how it affects you.</p>
<h4><a class="anchor" id="autotoc_md3946"></a>
DETAILS</h4>
<p>Since 2014, npm’s registry has used HTTP bearer tokens to authenticate requests from the npm’s command-line interface. A design flaw meant that the CLI was sending these bearer tokens with <em>every</em> request made by logged-in users, regardless of the destination of their request. (The bearers only should have been included for requests made against a registry or registries used for the current install.)</p>
<p>An attacker could exploit this flaw by setting up an HTTP server that could collect authentication information, then use this authentication information to impersonate the users whose tokens they collected. This impersonation would allow them to do anything the compromised users could do, including publishing new versions of packages.</p>
<p>With the fixes we’ve released, the CLI will only send bearer tokens with requests made against a registry.</p>
<h4><a class="anchor" id="autotoc_md3947"></a>
THINK YOU'RE AT RISK? REGENERATE YOUR TOKENS</h4>
<p>If you believe that your bearer token may have been leaked, <a href="https://www.npmjs.com/settings/tokens">invalidate your current npm bearer tokens</a> and rerun <code>npm login</code> to generate new tokens. Keep in mind that this may cause continuous integration builds in services like Travis to break, in which case you’ll need to update the tokens in your CI server’s configuration.</p>
<h4><a class="anchor" id="autotoc_md3948"></a>
WILL THIS BREAK MY CURRENT SETUP?</h4>
<p>Maybe.</p>
<p>npm’s CLI team believes that the fix won’t break any existing registry setups. Due to the large number of registry software suites out in the wild, though, it’s possible our change will be breaking in some cases.</p>
<p>If so, please <a href="https://github.com/npm/npm/issues/new">file an issue</a> describing the software you’re using and how it broke. Our team will work with you to mitigate the breakage.</p>
<h4><a class="anchor" id="autotoc_md3949"></a>
CREDIT &amp; THANKS</h4>
<p>Thanks to Mitar, Will White &amp; the team at Mapbox, Max Motovilov, and James Taylor for reporting this vulnerability to npm.</p>
<h3><a class="anchor" id="autotoc_md3950"></a>
PERFORMANCE IMPROVEMENTS</h3>
<p>The updated <a href="https://npmjs.com/package/are-we-there-yet"><code>are-we-there-yet</code></a> changes how it tracks how complete things are to be much more efficient. The summary is that <code>are-we-there-yet</code> was refactored to remove an expensive tree walk.</p>
<p>The result for you should be faster installs when working with very large trees.</p>
<p>Previously <code>are-we-there-yet</code> computed this when you asked by passing the request down its tree of progress indicators, totaling up the results. In doing so, it had to walk the entire tree of progress indicators.</p>
<p>By contrast, <code>are-we-there-yet</code> now updates a running total when a change is made, bubbling that up the tree from whatever branch made progress. This bubbling was already going on so there was nearly no cost associated with taking advantage of it.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/32f2bd0e26116db253e619d67c4feae1de3ad2c2"><code>32f2bd0</code></a> <code>npmlog@2.0.3</code>: Bring in substantial performance improvements from <code>are-we-there-yet</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3951"></a>
DUCT TAPE FOR BUGS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/473d3244a8ddfd6b260d0aa0d395b119d595bf97"><code>473d324</code></a> <a href="https://github.com/npm/npm/pull/11947">#11947</a> Guard against bugs that could cause the installer to crash with errors like:</li>
</ul>
<div class="fragment"><div class="line">TypeError: Cannot read property &#39;target&#39; of null</div>
</div><!-- fragment --><p>This doesn't fix the bugs, but it does at least make the installer less likely to explode. (<a href="https://github.com/thefourtheye">@thefourtheye</a>)</p>
<h3><a class="anchor" id="autotoc_md3952"></a>
DOC FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/ffa428a4eee482aa620819bc8df994a76fad7b0c"><code>ffa428a</code></a> <a href="https://github.com/npm/npm/pull/11880">#11880</a> Fix typo in <code>npm install</code> documentation. (<a href="https://github.com/watilde">@watilde</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3953"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/7537fe1748c27e6f1144b279b256cd3376d5c41c"><code>7537fe1</code></a> <code>sorted-object@2.0.0</code>: Create objects with <code>{}</code> instead of <code>Object.create(null)</code> to make the results strictly equal to what, say, parsed JSON would provide. (<a href="https://github.com/domenic">@domenic</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8defb0f7b3ebdbe15c9ef5036052c10eda7e3161"><code>8defb0f</code></a> <code>readable-stream@2.0.6</code>: Fix sync write issue on 0.10. (<a href="https://github.com/calvinmetcalf">@calvinmetcalf</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3954"></a>
TEST FIXES FOR THE SELF TESTS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/c3edeabece4400308264e7cf4bc4448bd2729f55"><code>c3edeab</code></a> <a href="https://github.com/npm/npm/pull/11912">#11912</a> Change the self installation test to do its work in <code>/tmp</code>. Previously this was installing into a temp subdir in <code>test/tap</code>, which wouldn't catch the case where a module was installed in the local <code>node_modules</code> folder but not in dependencies, as node would look up the tree and use the copy from the version of npm being tested. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3955"></a>
v3.8.2 (2016-03-10):</h2>
<h3><a class="anchor" id="autotoc_md3956"></a>
HAVING TROUBLE INSTALLING C MODULES ON ANDROID?</h3>
<p>This release includes an updated <code>node-gyp</code> with fixes for Android.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/634ecba320fb5a3287e8b7debfd8b931827b9e19"><code>634ecba</code></a> <code>node-gyp@3.3.1</code>: Fix bug in builds for Android. (<a href="https://github.com/bnoordhuis">@bnoordhuis</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3957"></a>
NPM LOGOUT CLEANS UP BETTER</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/460ed217876ac78d21477c288f1c06563fb770b4"><code>460ed21</code></a> <a href="https://github.com/npm/npm/issues/10529">#10529</a> If you ran <code>npm logout</code> with a scope, while we did invalidate your auth token, we weren't removing the auth token from your config file. This patch causes the auth token to be removed. (<a href="https://github.com/wyze">@wyze</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3958"></a>
HELP MORE HELPFUL</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/d1d02335d297da2734b538de44d8967bdcd354cf"><code>d1d0233</code></a> <a href="https://github.com/npm/npm/issues/11003">#11003</a> Update help to only show command names and their shortcuts. Previously some typo corrections were shown, along with various alternate spellings. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/47928cd6264e1d6d0ef67435b71c66d01bea664a"><code>47928cd</code></a> <a href="https://github.com/npm/npm/issues/11003">#11003</a> Remove "version" typo from the help listing. (<a href="https://github.com/doug-wade">@doug-wade</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3959"></a>
MORE COMPLETE CONFIG LISTINGS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/cf5fd401494d96325d74a8bb8c326aa0045a714c"><code>cf5fd40</code></a> <a href="https://github.com/npm/npm/issues/11472">#11472</a> Make <code>npm config list</code> include the per-project <code>.npmrc</code> in the output. (<a href="https://github.com/mjomble">@mjomble</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3960"></a>
DEPTH LIMITED PARSEABLE DEP LISTINGS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/611070f0f7a1e185c75cadae46179194084b398f"><code>611070f</code></a> <a href="https://github.com/npm/npm/issues/11495">#11495</a> Made <code>npm ls --parseable</code> honor the <code>--depth=#</code> option. (<a href="https://github.com/zacdoe">@zacdoe</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3961"></a>
PROGRESS FOR THE (NON) UNICODE REVOLUTION</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/ff9038227a1976b5e936442716d9877f43c6c9b4"><code>ff90382</code></a> <a href="https://github.com/npm/npm/issues/11781">#11781</a> Make the progress bars honor the unicode option. (<a href="https://github.com/watilde">@watilde</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3962"></a>
&lt;tt&gt;npm view --json&lt;/tt&gt;, NOW ACTUALLY JSON</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/24ab70a4ccfeaa005b80252da313bb589510668e"><code>24ab70a</code></a> <a href="https://github.com/npm/npm/issues/11808">#11808</a> Make <code>npm view</code> produce valid JSON when requested with <code>--json</code>. Previously <code>npm view</code> produced some sort of weird hybrid output, with multiple JSON docs. (<a href="https://github.com/doug-wade">@doug-wade</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3963"></a>
DOCUMENTATION CHANGES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/6fb0499bea868fdc637656d210c94f051481ecd4"><code>6fb0499</code></a> <a href="https://github.com/npm/npm/issues/11726">#11726</a> Previously we patched the <code>npm update</code> docs to suggest using <code>--depth Infinity</code> instead of <code>--depth 9999</code>, but that was a mistake. We forgot that <code>npm outdated</code> (on which <code>npm update</code> is built) has a special case where it treats <code>Infinity</code> as <code>0</code>. This reverts that patch. (<a href="https://github.com/GriffinSchneider">@GriffinSchneider</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f0bf684a87ea5eea03432a17f38678fed4960d43"><code>f0bf684</code></a> <a href="https://github.com/npm/npm/pull/11748">#11748</a> Document all of the various aliases for commands in the documentation for those commands. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/fe04443d8988e2e41bd4047078e06a26d05d380d"><code>fe04443</code></a> <a href="https://github.com/npm/npm/issues/10968">#10968</a> The <code>npm-scope</code> document notes that scopes have been available on the public registry for a while. This adds that you'll need <code>npm@2</code> or later to use them. (<a href="https://github.com/doug-wade">@doug-wade</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3db37a52b2b2e3193ef250ad2cf96dfd2def2777"><code>3db37a5</code></a> <a href="https://github.com/npm/npm/pull/11820">#11820</a> The command <code>npm link</code> should be linking package from local folder to global, and <code>npm link package-name</code> should be from global to local. The description in the documentation was reversed and this fixes that. (<a href="https://github.com/rhgb">@rhgb</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3964"></a>
GLOB FOR THE GLOB THRONE</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/be55882dc4ee5ce0777b4badc9141dab5bf5be4d"><code>be55882</code></a> <code>glob@7.0.3</code>: Fix a race condition and some windows edge cases. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3965"></a>
v3.8.1 (2016-03-03):</h2>
<p>This week the install summary got better, killing your npm process now also kills the scripts it was running and a rarely used search flag got documented.</p>
<p>Our improvements on the test suite on Windows are beginning to pick up steam, you can follow along by <a href="https://github.com/npm/npm/pull/11444">watching the PR</a>.</p>
<h3><a class="anchor" id="autotoc_md3966"></a>
BETTER INSTALL SUMMARIES</h3>
<ul>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/e40d4572cc98db06757df5b8bb6b7dbd0546d3d7"><code>e40d457</code></a> <a href="https://github.com/npm/npm/issues/11699">#11699</a> Ensure that flags like <code>--production</code> passed to install don't result in the summary at the end being incorrectly filtered. That summary is produced by the same code as <code>npm ls</code> and therefore responds to flags the same way it does. This is undesirable when it's an install summary, however, as we don't want it to filter anything.</p>
<p class="startli">This fixes an issue where <code>npm install --production &lt;module&gt;</code> would result in npm exiting with an error code. The <code>--production</code> flag would make <code>npm ls</code> filter out <code>&lt;module&gt;</code> as it wasn't saved to the <code>package.json</code> and thus wasn't a production dependency. The install report is limited to show just the modules installed, so with that filtered out nothing is available. With nothing available <code>npm ls</code> would set <code>npm</code> to exit with an error code. (<a href="https://github.com/ixalon">@ixalon</a>)</p>
</li>
<li><a href="https://github.com/npm/npm/commit/99337b469163a4b211b9c6ff1aa9712ae0d601d2"><code>99337b4</code></a> <a href="https://github.com/npm/npm/pull/11600">#11600</a> Make the report of installed modules really only show those modules that were installed. Previously it selected which modules from your tree to display based on <code>name@version</code> which worked great when your tree was deduped but would list things it hadn't touched when there were duplicates. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3967"></a>
SCRIPTS BETTER FOLLOW THE LEADER</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/545434766eb3681d3f40b745f9f3187ed63f310a"><code>5454347</code></a> <a href="https://github.com/npm/npm/pull/10868">#10868</a> When running a lifecycle script, say through <code>npm start</code>, killing npm wouldn't forward that on to the children. It does now. (<a href="https://github.com/daniel-pedersen">@daniel-pedersen</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3968"></a>
SEARCHING SPECIFIC REGISTRIES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/60204479f76458a9864aa530cda2b3333f95c2b0"><code>6020447</code></a> <a href="https://github.com/npm/npm/pull/11490">#11490</a> Add docs for using the <code>--registry</code> flag with search. (<a href="https://github.com/plumlee">@plumlee</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3969"></a>
LODASH UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/bb14204183dad620a6650452a26cdc64111f8136"><code>bb14204</code></a> <code>lodash.without@4.1.1</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0089059c562aee9ad0398e55d2c12c68a6150e79"><code>0089059</code></a> <code>lodash.keys@4.0.5</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6ee1de4474d9683a1f7023067d440780eeb10311"><code>6ee1de4</code></a> <code>lodash.clonedeep@4.3.1</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3970"></a>
v3.8.0 (2016-02-25):</h2>
<p>This week brings a quality of life improvement for some Windows users, and an important knob to be tuned for folks experiencing network problems.</p>
<h3><a class="anchor" id="autotoc_md3971"></a>
LIMIT CONCURRENT REQUESTS</h3>
<p>We've long known that <code>npm</code>'s tendency to try to request all your dependencies simultaneously upset some network hardware (particular, consumer grade routers &amp; proxies of all sorts). One of the reasons that we're planning to write our own npm specific version of <code>request</code> is to be able to more easily control this sort of thing.</p>
<p>But fortunately, you don't have to wait for that. <a href="https://github.com/misterbyrne">@misterbyrne</a> took a look at our existing code and realized it could be added painlessly TODAY. The new default maximum is <code>50</code>, instead of <code>Infinity</code>. If you're having network issues you can try setting that value down to something lower (if you do, please let us know... the default is subject to tuning).</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/910f9accf398466b8497952bee9f566ab50ade8c"><code>910f9ac</code></a> <a href="https://github.com/npm/npm/commit/f7be667548a132ec190ac9d60a31885a7b4fe2b3"><code>f7be667</code></a> Add a new config option, <code>maxsockets</code> and <code>npm-registry-client@7.1.0</code> to take advantage of it. (<a href="https://github.com/misterbyrne">@misterbyrne</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3972"></a>
WINDOWS GIT BASH</h3>
<p>We think it's pretty keen too, we were making it really hard to actually upgrade if you were using it. NO MORE!</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/d60351ccae87d71a5f5eac73e3085c6290b52a69"><code>d60351c</code></a> <a href="https://github.com/npm/npm/issues/11524">#11524</a> Prefer locally installed npm in Git Bash &ndash; previous behavior was to use the global one. This was done previously for other shells, but not for Git Bash. (<a href="https://github.com/destroyerofbuilds">@destroyerofbuilds</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3973"></a>
DOCUMENTATION IMPROVEMENTS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/b63de3c97c4c27078944249a4d5bbe1c502c23bc"><code>b63de3c</code></a> <a href="https://github.com/npm/npm/issues/11636">#11636</a> Document <code>--save-bundle</code> option in main install page. (<a href="https://github.com/datyayu">@datyayu</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3d264532d6d9df60420e985334aebb53c668d32b"><code>3d26453</code></a> <a href="https://github.com/npm/npm/pull/11644">#11644</a> Add <code>directories.test</code> to the <code>package.json</code> documentation. (<a href="https://github.com/lewiscowper">@lewiscowper</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b64d12432fdad344199b678d700306340d3607eb"><code>b64d124</code></a> <a href="https://github.com/npm/npm/pull/11441">#11441</a> Add a link in documentation to the contribution guidelines. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/82fc548b0e2abbdc4f7968c20b118c30cca79a24"><code>82fc548</code></a> <a href="https://github.com/npm/npm/pull/11441/commits">#11441</a> Remove mentions of the long defunct Google group. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c6ad09131af2e2766d6034257a8fcaa294184121"><code>c6ad091</code></a> <a href="https://github.com/npm/npm/pull/11474">#11474</a> Correct invalid JSON in npm-update docs. (<a href="https://github.com/robludwig">@robludwig</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4906c90ed2668adf59ebee759c7ebb811aa46e57"><code>4906c90</code></a> Expand on the documentation for <code>bundlededDependencies</code>, explaining what they are and when you might want to use them. (<a href="https://github.com/gnerkus">@gnerkus</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3974"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/93cdc25432b71cbc9c25c54ae316770e18f4b01e"><code>93cdc25</code></a> <code>strip-ansi@3.0.1</code>: Non-user visible tests &amp; maintainer doc updates. (<a href="https://github.com/jbnicolai">@jbnicolai</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3b2ccef30dc2038b99ba93cd1404a1d01dac8790"><code>3b2ccef</code></a> <code>lodash.keys@4.0.4</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/30e9eb97397a8f85081d328ea9aa54c2a7852613"><code>30e9eb9</code></a> <code>lodash._baseuniq@4.5.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3975"></a>
v3.7.5 (2016-02-22):</h2>
<p>A quick fixup release because when I updated glob, I missed the subdep copies of itself that it installed deeper in the tree. =/</p>
<p>This only effected people trying to update to <code>3.7.4</code> from <code>npm@2</code> or <code>npm@1</code>. Updates from <code>npm@3</code> worked fine (as it fixes up the missing subdeps during installation).</p>
<h3><a class="anchor" id="autotoc_md3976"></a>
OH MY GLOB</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/63fa7044569127e6e29510dc499a865189806076"><code>63fa704</code></a> <a href="https://github.com/npm/npm/issues/11633">#11633</a> When updating the top level <code>npm</code> to <code>glob@7</code>, the subdeps that still depended on <code>glob@6</code> got new versions installed but they weren't added to the commit. This adds them back in. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3977"></a>
v3.7.4 (2016-02-18):</h2>
<p>I'm (<a href="https://github.com/iarna">@iarna</a>) back from vacation in the frozen wastes of Maine! This release sees a couple of bug fixes, some documentation updates, a bunch of dependency updates and improvements to our test suite.</p>
<h3><a class="anchor" id="autotoc_md3978"></a>
FIXES FOR &lt;tt&gt;update&lt;/tt&gt;, FIXES FOR &lt;tt&gt;ls&lt;/tt&gt;</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/53cdb96634fc329378b4ea4e767ba9987986a76e"><code>53cdb96</code></a> <a href="https://github.com/npm/npm/issues/11362">#11362</a> Make <code>npm update</code> stop trying to update linked packages. (<a href="https://github.com/rhendric">@rhendric</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8d90d25b3da086843ce43911329c9572bd109078"><code>8d90d25</code></a> <a href="https://github.com/npm/npm/issues/11559">#11559</a> Only list runtime dependencies when doing <code>npm ls --production</code>. (<a href="https://github.com/yibn2008">@yibn2008</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3979"></a>
@wyze, DOCUMENTATION HERO OF THE PEOPLE, GETS THEIR OWN HEADER</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/b78b30171038ab737eff0b070281277e35af25b4"><code>b78b301</code></a> <a href="https://github.com/npm/npm/pull/11416">#11416</a> Logout docs were using a section copy-pasted from the adduser docs. (<a href="https://github.com/wyze">@wyze</a>)</li>
<li><a href="https://github.com/npm/npm/commit/649e28f50aa323e75202eeedb824434535a0a4a0"><code>649e28f</code></a> <a href="https://github.com/npm/npm/pull/11414">#11414</a> Add colon for consistency. (<a href="https://github.com/wyze">@wyze</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3980"></a>
WHITTLING AWAY AT PATH LENGTHS</h3>
<p>So for all of you who don't know &ndash; Node.js does, in fact, support long Windows paths. Unfortunately, depending on the tool and the Windows version, a lot of external tooling does not. This means, for example, that some (all?) versions of Windows Explorer <em>can literally never delete npm from their system entirely because of deeply-nested npm dependencies</em>. Which is pretty gnarly.</p>
<p>Incidentally, if you run into that in particularly, you can use <a href="npm.im/rimraf">rimraf</a> to remove such files 💁.</p>
<p>The latest victim of this issue was the Node.js CI setup for testing on Windows, which uses some tooling or another that croaks on the usual path length limit for that OS: 255 characters.</p>
<p>This isn't ordinarily an issue with <code>npm@3</code> as it produces mostly flat trees, but you may be surprised to learn that <code>npm</code>'s own distribution isn't flat, due to needing to be compatible with <code>npm@1.2</code>, which ships with <code>node@0.8</code>!</p>
<p>We've taken another baby step towards alleviating this in this release by updating a couple of dependencies that were preventing <code>npmlog</code> from deduping, and then doing a dedupe on that and <code>gauge</code>. Hopefully it helps.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/f3c32bc3127301741d2fa3a26be6f5f127a35908"><code>f3c32bc</code></a> <a href="https://github.com/npm/npm/pull/11528">#11528</a> <code>node-gyp@3.3.0</code>: Update to a more recent version that uses a version of npmlog compatible with npm itself. Also adds: AIX support, new <code>gyp</code>, <code>--cafile</code> command line option, and allows configuration of Node.js and io.js mirrors. (<a href="https://github.com/rvagg">@rvagg</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3981"></a>
INTERNAL TEST IMPROVEMENTS</h3>
<p>The <code>npm</code> core team's time recently has been sunk into <code>npm</code>'s many years of tech debt. Specifically, we've been working on improving the test suite. This isn't user visible, but in future should mean a more stable, easier to contribute to <code>npm</code>. Ordinarily we don't report these kinds of changes in the change log, but I thought I might share this week as this chunk is bigger than usual.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/07f020a09e94ae393c67526985444e128ef6f83c"><code>07f020a</code></a> <a href="https://github.com/npm/npm/pull/11292">#11292</a> <code>tacks@1.0.9</code>: Add a package that provides a tool to generate fixtures from folders and, relatedly, a module that an create and tear down filesystem fixtures easily. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/083734631f9b11b17c08bca8ba8cb736a7b1e3fb"><code>0837346</code></a> <a href="https://github.com/npm/npm/pull/11292">#11292</a> Remove all the relatively cryptic legacy tests and creates new tap tests that check the same functionality. The <em>legacy</em> tests were tests that were originally a shell script that was ported to javascript early in <code>npm</code>'s history. (<a href="https://github.com/iarna">@iarna</a>) (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5a701e71a0130787fb98450f9de92117b4ef88e1"><code>5a701e7</code></a> <a href="https://github.com/npm/npm/pull/11292">#11292</a> Test that we don't leak auth info into the environment. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/502d7d0628f08b09d8d13538ebccc63de8b3edf5"><code>502d7d0</code></a> <a href="https://github.com/npm/npm/pull/11292">#11292</a> Test that env vars properly passed into scripts. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/420f2672ee8c909f18bee10b1fc7d4ad91cf328b"><code>420f267</code></a> <a href="https://github.com/npm/npm/pull/11292">#11292</a> Test that npm's distribution binary is complete and can be installed and used. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b7e99be1b1086f2d6098c653c1e20791269c9177"><code>b7e99be</code></a> <a href="https://github.com/npm/npm/pull/11292">#11292</a> Test that the <code>package.json</code> <code>files</code> section and <code>.npmignore</code> do what they're supposed to. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3982"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/4611098fd8c65d61a0645deb05bf38c81300ffca"><code>4611098</code></a> <code>rimraf@2.5.2</code>: Use <code>glob@7.0.0</code>. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/41b2772cb83627f3b5b926cf81e150e7148cb124"><code>41b2772</code></a> <code>glob@7.0.0</code>: Raise error if <code>options.cwd</code> is specified, and not a directory. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c14e74ab5d17c764f3aa37123a9632fa965f8760"><code>c14e74a</code></a> <code>gauge@1.2.7</code>: Update to newer lodash versions, for a smaller tree. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d6293630ddc25bfa26d19b6be4fd2685976d7358"><code>d629363</code></a> <code>lodash.without@4.1.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3ea4c8049ca8df9f64426b1db8a29b9579950134"><code>3ea4c80</code></a> <code>lodash.uniq@4.2.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8ddcc8deb554660a3f7f474fae9758c967d94552"><code>8ddcc8d</code></a> <code>lodash.union@4.2.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2b656a672d351f32ee2af24dcee528356dcd64f4"><code>2b656a6</code></a> <code>lodash.keys@4.0.3</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ac171f8f0318a7dd3c515f3b83502dfa9e87adb8"><code>ac171f8</code></a> <code>lodash.isarguments@3.0.7</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/bcccd9057b75d800c799ab15f00924f700415d3e"><code>bcccd90</code></a> <code>lodash.clonedeep@4.3.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8165bca537d86305a3d08f080f86223a26615aa8"><code>8165bca</code></a> <code>lodash._baseuniq@4.4.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3983"></a>
v3.7.3 (2016-02-11):</h2>
<p>Hey all! We've got a pretty small release this week &ndash; just documentation updates and a couple of dependencies. This release also includes a particular dependency upgrade that makes it so we're exclusively using the latest version of <code>graceful-fs</code>, which'll make it so things keep working with future Node.js releases.</p>
<p>A certain internal Node.js API was deprecated and slated for future removal from Node Core. This API was critical for versions of <code>graceful-fs@&lt;4</code>, before a different approach was used to achieve similar ends. By upgrading this library, and making sure all our dependencies are also updated, we've ensured npm will continue to work once the API is finally removed. Older versions of npm, on the other hand, will simply not work on future versions of Node.js.</p>
<h3><a class="anchor" id="autotoc_md3984"></a>
DEPENDENCY UPGRADES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/29536f42da6c06091c9acbc8952f72daa8a9412c"><code>29536f4</code></a> <code>cmd-shim@2.0.2</code>: Final straggler using <code>graceful-fs@&lt;4</code>. (<a href="https://github.com/ForbesLindesay">@ForbesLindesay</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5f59e748ef4c066756bb204a452cecd0543c7a2f"><code>5f59e74</code></a> <code>lodash.uniq@4.1.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/987cabe8a18abcb5a685685958bf74c7258a979c"><code>987cabe</code></a> <code>lodash.union@4.1.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5c641f05fdc153c6bb06a89c46fe2a345ce413db"><code>5c641f0</code></a> <code>lodash.clonedeep@4.1.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3985"></a>
EVERYONE GETTING SOCKS LIKE IT'S OPRAH'S SHOW</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/9ea56582ca4d0991dbed44f992c88f08a643cb4b"><code>9ea5658</code></a> <a href="https://github.com/npm/npm/pull/11410">#11410</a> Fixed a small spelling error in <code>npm-config.md</code>. (<a href="https://github.com/pra85">@pra85</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2a11e562a14bce18b6ddca6c20d17f97b6a8ec2f"><code>2a11e56</code></a> <a href="https://github.com/npm/npm/pull/11403">#11403</a> Removes <code>--depth Infinity</code> warning from documentation &ndash; this operation should actually be totally safe as of <code>npm@3</code>. (The warning remains for <code>npm@2</code>.) (<a href="https://github.com/Aourin">@Aourin</a>)</li>
<li><a href="https://github.com/npm/npm/commit/42a4727bfb1e21c890b8e2babda55e06ac2bda29"><code>42a4727</code></a> <a href="https://github.com/npm/npm/pull/11391">#11391</a> Fixed versions of <code>shrinkwrap.json</code> in examples in documentation for <code>npm shrinkwrap</code>, which did not quite match up. (<a href="https://github.com/xcatliu">@xcatliu</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3986"></a>
v3.7.2 (2016-02-04):</h2>
<p>This week, the CLI team has been busy working on rewriting tests to support getting coverage reports going and running all of our tests on Windows. Meanwhile, we've got a bunch of dependency updates and one or two other things.</p>
<h3><a class="anchor" id="autotoc_md3987"></a>
TESTS WENT INTO HIDING</h3>
<p>Last week we took a patch from <a href="https://github.com/substack">@substack</a> to stop the installer from reordering arrays in an installed module's <code>package.json</code>... but somehow I dropped the test when I was rebasing.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/21b927182514a0ff6d9f34480bfc39f72e3e9f8c"><code>21b9271</code></a> <a href="https://github.com/npm/npm/issues/10063">#10063</a> Restore test that verifies that we don't re-order arrays in a module's <code>package.json</code> on install. (<a href="https://github.com/substack">@substack</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3988"></a>
DOCUMENTATION FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/c67521dc6c1e41d39d02c74105e41442851d23bb"><code>c67521d</code></a> <a href="https://github.com/npm/npm/pull/11348">#11348</a> Improve the documentation around which files are ALWAYS included in published packages and which are ALWAYS excluded. (<a href="https://github.com/jscissr">@jscissr</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7ef6793cd191cc8d88340f7e1ce9c9e3d6f0b2f4"><code>7ef6793</code></a> <a href="https://github.com/npm/npm/pull/11348">#11348</a> The release date on the 3.7.0 changelog entry was wrong. I honestly don't know how I keep doing this. =D (<a href="https://github.com/rafek">@rafek</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3989"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/8a3c80c4fd3d82fe937f30bc7cbd3dee51a8a893"><code>8a3c80c</code></a> <code>graceful-fs@4.1.3</code>: Fix a bug where close wasn't getting made graceful. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<p><code>lodash</code> saw updates across most of its modules this week with browser campatibility fixes that don't really impact us.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/2df342bf30efa99b98016acc8a5dc03e00b58b9c"><code>2df342b</code></a> <code>lodash.without@4.0.2</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/86aa91dce60f6b6a92bb3ba2bf6e6be1f6afc750"><code>86aa91d</code></a> <code>lodash.uniq@4.0.2</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0a94bf6af0ebd38d080f92257e0cd9bae40b31ff"><code>0a94bf6</code></a> <code>lodash.union@4.0.2</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b4c9582b4ef5991f3d155e0c6142ed1c631860af"><code>b4c9582</code></a> <code>lodash.isarguments@3.0.6</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/efe766c63c0948a4ae4c0d12f2b834629ab86e92"><code>efe766c</code></a> <code>lodash.keys@4.0.2</code>: Minor code cleanup and the above. (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/36abb24ef31017adbf325e7f833d5d4b0f03f5d4"><code>36abb24</code></a> <code>lodash.clonedeep@4.0.4</code>: Add support for cloning prototype objects and the above. (<a href="https://github.com/jdalton">@jdalton</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3990"></a>
v3.7.1 (2016-02-01):</h2>
<p>Super quick Monday patch on last week's release.</p>
<p>If you ever wondered why we release things to the <code>npm@next</code> tag for a week before promoting them to <code>npm@latest</code>, this is it!</p>
<h3><a class="anchor" id="autotoc_md3991"></a>
RELEASE TRAIN VINDICATED (again)</h3>
<ul>
<li>[<code>adcaf04</code>](adcaf047811dcc475ab1984fc93fe34540fc03d7) <a href="https://github.com/npm/npm/issues/11349">#11349</a> Revert last weeks change to use JSON clone instead of <code>lodash.cloneDeep</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3992"></a>
v3.7.0 (2016-01-29):</h2>
<p>Hi all! This week brings us some important performance improvements, support for git submodules(!) and a bunch of bug fixes.</p>
<h3><a class="anchor" id="autotoc_md3993"></a>
PERFORMANCE</h3>
<p><code>gauge</code>, the module responsible for drawing <code>npm</code>'s progress bars, had an embarrassing bug in its debounce implementation that resulted in it, on many systems, actually being <em>slower</em> than if it hadn't been debouncing. This was due to it destroying and then creating a timer object any time it got an update while waiting on its minimum update period to elapse. This only was a measurable slowdown when sending thousands of updates a second, but unfortunately parts of <code>npm</code>'s logging do exactly that. This has been patched to eliminate that churn, and our testing shows the progress bar as being eliminated as a source of slow down.</p>
<p>Meanwhile, <code>are-we-there-yet</code> is the module that tracks just how complete our big asynchronous install process is. <a href="https://github.com/STRML">@STRML</a> spent some time auditing its source and made a few smaller performance improvements to it. Most impactful was eliminating a bizarre bit of code that was both binding to AND closing over the current object. I don't have any explanation for how that crept in. =D</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/c680fa9f8135759eb5512f4b86e47fa265733f79"><code>c680fa9</code></a> <code>npmlog@2.0.2</code>: New <code>are-we-there-yet</code> with performance patches from <a href="https://github.com/STRML">@STRML</a>. New <code>gauge</code> with timer churn performance patch. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<p>We were also using <code>lodash</code>'s <code>cloneDeep</code> on <code>package.json</code> data which is definitely overkill, seeing as <code>package.json</code> data has all the restrictions of being <code>json</code>. The fix for this is just swapping that out for something that does a pair of <code>JSON.stringify</code>/<code>JSON.parse</code>, which is distinctly more speedy.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/1d1ea7eeb958034878eb6573149aeecc686888d3"><code>1d1ea7e</code></a> <a href="https://github.com/npm/npm/pull/11306">#11306</a> Use JSON clone instead of <code>lodash.cloneDeep</code>. (<a href="https://github.com/STRML">@STRML</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3994"></a>
NEW FEATURE: GIT SUBMODULE SUPPORT</h3>
<p>Long, long requested– the referenced issue is from 2011– we're finally getting rudimentary git submodule support.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/39dea9ca4216c6ea628f5ca47d2b34a4b251a1ed"><code>39dea9c</code></a> <a href="https://github.com/npm/npm/issues/1876">#1876</a> Add support for git submodules in git remotes. This is a fairly simple approach, which does not leverage the git caching mechanism to cache submodules. It also doesn't provide a means to disable automatic initialization, e.g. via a setting in the <code>.gitmodules</code> file. (<a href="https://github.com/gagern">@gagern</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3995"></a>
ROBUSTNESS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/5dec02a3d0e82202c021e27aff9d006283fdc25a"><code>5dec02a</code></a> <a href="https://github.com/npm/npm/issues/10347">#10347</a> There is an obscure feature that lets you monkey-patch npm when it starts up. If the module being required with this feature failed, it would previously just make <code>npm</code> error out– this reduces that to a warning. (<a href="https://github.com/evanlucas">@evanlucas</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3996"></a>
BUG FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/9ab8b8d047792612ae7f9a6079745d51d5283a53"><code>9ab8b8d</code></a> <a href="https://github.com/npm/npm/issues/10820">#10820</a> Fix a bug with <code>npm ls</code> where if you asked for ONLY production dependencies in output it would exclude dependencies that were BOTH production AND development dependencies. (<a href="https://github.com/davidvgalbraith">@davidvgalbraith</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6803fedadb8f9b36cd85f7338ecf75d1d183c833"><code>6803fed</code></a> <a href="https://github.com/npm/npm/issues/8982">#8982</a> Fix a bug where, under some circumstances, if you had a path that contained the name of a package being installed somewhere in it, <code>npm</code> would incorrectly refuse to run lifecycle scripts. (<a href="https://github.com/elvanja">@elvanja</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3eae40b7a681aa067dfe4fea8c9a76da5b508b48"><code>3eae40b</code></a> <a href="https://github.com/npm/npm/issues/9253">#9253</a> Fix a bug where, when running lifecycle scripts, if the Node.js binary you ran <code>npm</code> with wasn't in your <code>PATH</code>, <code>npm</code> wouldn't use it to run your scripts. (<a href="https://github.com/segrey">@segrey</a>)</li>
<li><a href="https://github.com/npm/npm/commit/61daa6ae8cbc041d3a0d8a6f8f268b47dd8176eb"><code>61daa6a</code></a> <a href="https://github.com/npm/npm/issues/11014">#11014</a> Fix a bug where running <code>rimraf node_modules/&lt;package&gt;</code> followed by <code>npm rm --save &lt;package&gt;</code> would fail. <code>npm</code> now correctly removes the module from your <code>package.json</code> even though it doesn't exist on disk. (<a href="https://github.com/davidvgalbraith">@davidvgalbraith</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a605586df134ee97c95f89c4b4bd6bc73f7aa439"><code>a605586</code></a> <a href="https://github.com/npm/npm/issues/9679">#9679</a> Fix a bug where <code>npm install --save git+https://…</code> would save a <code><a href="https://">https://</a></code> url to your <code>package.json</code> which was a problem because <code>npm</code> wouldn't then know that it was a git repo. (<a href="https://github.com/gagern">@gagern</a>)</li>
<li><a href="https://github.com/npm/npm/commit/bbdc70024467c365cc4e06b8410947c04b6f145b"><code>bbdc700</code></a> <a href="https://github.com/npm/npm/issues/10063">#10063</a> Fix a bug where <code>npm</code> would change the order of array properties in the <code>package.json</code> files of dependencies. <code>npm</code> adds a bunch of stuff to <code>package.json</code> files in your <code>node_modules</code> folder for debugging and bookkeeping purposes. As a part of this process it sorts the object to reduce file churn when it does updates. This fixes a bug where the arrays in the object were also getting sorted. This wasn't a problem for properties that <code>npm</code> itself maintains, but <em>is</em> a problem for properties used by other packages. (<a href="https://github.com/substack">@substack</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3997"></a>
DOCS IMPROVEMENTS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/2609a2950704f577ac888668e81ba514568fab44"><code>2609a29</code></a> <a href="https://github.com/npm/npm/pull/11273">#11273</a> Include an example of viewing package version history in the <code>npm view</code> documentation. (<a href="https://github.com/vedatmahir">@vedatmahir</a>)</li>
<li><a href="https://github.com/npm/npm/commit/719ea9c45a5c3233f3afde043b89824aad2df0a7"><code>719ea9c</code></a> <a href="https://github.com/npm/npm/pull/11272">#11272</a> Fix typographical issue in <code>npm update</code> documentation. (<a href="https://github.com/jonathanp">@jonathanp</a>)</li>
<li><a href="https://github.com/npm/npm/commit/cb9df5a37091e06071d8704b629e7ebaa41c37fe"><code>cb9df5a</code></a> <a href="https://github.com/npm/npm/pull/11215">#11215</a> Do not call <code>SEE LICENSE IN &lt;filename&gt;</code> an <em>SPDX expression</em>, as it's not. (<a href="https://github.com/kemitchell">@kemitchell</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f4279346c368da4bca09385f773e8eed1d389e5e"><code>f427934</code></a> <a href="https://github.com/npm/npm/pull/11196">#11196</a> Correct the <code>package.json</code> examples in the <code>npm update</code> documentation to actually be valid JSON and not just JavaScript object literals. (<a href="https://github.com/s100">@s100</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3998"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/a7b24074cb59a1ab17c0d8eff1498047e6a123e5"><code>a7b2407</code></a> <code>retry@0.9.0</code>: New features and interface agnostic refactoring. (<a href="https://github.com/tim-kos">@tim-kos</a>)</li>
<li><a href="https://github.com/npm/npm/commit/220fc7702ae3e5d601dfefd3e95c14e9b32327de"><code>220fc77</code></a> <code>request@2.69.0</code>: A bunch of small bug fixes and module updates. (<a href="https://github.com/simov">@simov</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9e5c84f1903748897e54f8ff099729ff744eab0f"><code>9e5c84f</code></a> <code>which@1.2.4</code>: Update <code>isexe</code> and fix bug in <code>pathExt</code>, in which files without extensions would sometimes be preferred to files with extensions on Windows, even though those without extensions aren't executable. <code>pathExt</code> is a list of extensions that are considered executable (exe, cmd, bat, com on Windows). (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/375b9c42fe0c6de47ac2f92527354b2ea79b7968"><code>375b9c4</code></a> <code>rimraf@2.5.1</code>: Minor doc formatting fixes. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ef1971e6270c2bc72e6392b51a8b84f52708f7e7"><code>ef1971e</code></a> <code>lodash.clonedeep@4.0.2</code>: Misc minor code cleanup. No functional changes. (<a href="https://github.com/jdalton">@jdalton</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3999"></a>
v3.6.0 (2016-01-20):</h2>
<p>Hi all! This is a bigger release, in part 'cause we didn't have one last week. The most important thing you need to know is that when <code>npm@3.6.0</code> replaces <code>npm@3.5.4</code> as <code>next</code>, <code>npm@3.5.4</code> WILL NOT be moved on to <code>latest</code>. This is due to a packaging error that tickles bugs in some earlier releases and makes upgrades to it from those versions break the install.</p>
<h3><a class="anchor" id="autotoc_md4000"></a>
NEW FEATURES‼</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/ff504d449ea1fa996cbb02c8078964643c51e5f6"><code>ff504d4</code></a> <a href="https://github.com/npm/npm/issues/8752">#8752</a> In <code>npm outdated</code>, report symlinked packages as having a wanted &amp; latest version of <code>linked</code>. (<a href="https://github.com/halhenke">@halhenke</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f44d8c9a3940f7041f8136f8754a54b13f1f9d60"><code>f44d8c9</code></a> <a href="https://github.com/npm/npm/issues/10775">#10775</a> Add a success message to <code>adduser</code> / <code>login</code>. (<a href="https://github.com/ekmartin">@ekmartin</a>)</li>
<li><a href="https://github.com/npm/npm/commit/310930395c9bf1577cf085b9742210bfc71bb019"><code>3109303</code></a> <a href="https://github.com/npm/npm/pull/10043">#10043</a> Warn if you try to use <code>npm run x</code> if you don't have a <code>node_modules</code> folder, since whatever you're trying to do <em>probably</em> won't work. (<a href="https://github.com/timkrins">@timkrins</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9ed2849cd7e8cc97111dca42a940905284afe55d"><code>9ed2849</code></a> <a href="https://github.com/npm/npm/commit/e9f1ad88ce58ecd111811e11afa52ac19fc8696e"><code>e9f1ad8</code></a> <a href="https://github.com/npm/npm/commit/f10d300e5effa7a5756c8d461eef284c283a41d1"><code>f10d300</code></a> <a href="https://github.com/npm/npm/commit/8b593d8d187d6ac85d2a59cbe647afb5516c1b94"><code>8b593d8</code></a> <a href="https://github.com/npm/npm/pull/10717">#10717</a> <code>npm version</code> can now take a <code>from-git</code> argument, which instructs <code>npm</code> to read the version from git and update your <code>package.json</code> to what it finds. This is in contrast to its normal use where <code>npm</code> <em>tells</em> git about your new version. (<a href="https://github.com/ekmartin">@ekmartin</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4001"></a>
3.5.4 WAS NOT SO GREAT</h3>
<p>The <code>npm@3.5.4</code> package was missing some dependencies. Specifically, <code>glob</code> and <code>has-unicode</code> had major release updates which meant that subdeps that relied on older major versions couldn't use the npm supplied versions any more, and so they needed their own copies.</p>
<p>This went undetected because the actions necessary to run the tests (which check for this sort of thing) resolved the missing modules.</p>
<p>Further, it didn't have symptoms when upgrading from <em>most</em> versions of npm. Unfortunately, some versions had bugs that were tickled by this and resulted in broken upgrades, most notably, <code>npm@3.3.12</code>, the version that's been in Node.js 5.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/1d3325c040621a4792db80fb232f4994b9d5c5f2"><code>1d3325c</code></a> <a href="https://github.com/npm/npm/commit/02611c673a4d2bbe8fcef8d48407768da31c90d2"><code>02611c6</code></a> <a href="https://github.com/npm/npm/commit/39d5feadefdde38d75a18f23343bc6ec37153638"><code>39d5fea</code></a> <a href="https://github.com/npm/npm/commit/7d0e830f26c73b9d9277b29949227ba9cca27fd9"><code>7d0e830</code></a> <a href="https://github.com/npm/npm/pull/11129">#11129</a> Update the underlying dependencies to allow use for the new versions of <code>glob</code> and <code>has-unicode</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4002"></a>
WHEN MISSING PATHS ARE OK</h3>
<ul>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/bb638fa4f48d24d2c9935861d5d751c5621eea49"><code>bb638fa</code></a> <a href="https://github.com/npm/npm/pull/11212">#11212</a> When trying to determine if a file was controlled by npm before going to remove it, we check to see if it is inside any of a list of paths that npm considers to be under its control. Not all of those paths always exist (and that's ok!) Previously we were calling it a failure to match if ANY of them didn't exist. We now only do so if NONE of them exist. If some do, then we do our usual checks on them.</p>
<p class="startli">This showed up as an error where you would see something like: </p><div class="fragment"><div class="line">npm warn gentlyRm not removing /path/to/thing as it wasn&#39;t installed by /path/to/other/thing</div>
</div><!-- fragment --><p class="startli">But it totally was installed by it. (<a href="https://github.com/iarna">@iarna</a>)</p>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md4003"></a>
BETTER NODE PRE-RELEASE SUPPORT</h3>
<p>Historically, if you used a pre-release version of Node.js, you would get dozens and dozens of warnings when EVERY engine check failed across all of your modules, because <code>&gt;= 0.10.0</code> doesn't match prereleases.</p>
<p>You might find this stream of redundant warnings undesirable. I do.</p>
<p>We've moved this into a SINGLE warning you'll get about using a pre-release version of Node.js and now suppress those other warnings.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/6952f7981e451a2d599a4f513573af208bdfe103"><code>6952f79</code></a> <a href="https://github.com/npm/npm/pull/11212">#11212</a> Engine check warnings are now issued along with any other warnings about your tree, instead of emitting in the middle of your install (and then disappearing behind the giant tree of stuff installed). (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ee2ebe96fb3d105787835b72085bbd2eee66a629"><code>ee2ebe9</code></a> <a href="https://github.com/npm/npm/pull/11212">#11212</a> Suppress engine verification warnings about pre-release versions of Node.js. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/135b7e078311e8b4e2c8e2b662eed9ba6c2e2537"><code>135b7e0</code></a> <a href="https://github.com/npm/npm/pull/11212">#11212</a> Explicitly warn, in only one place, if you are using a pre-release version of Node.js. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4004"></a>
BUG FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/ea331c82157c65f7643cd4b49fd24031c84bf601"><code>ea331c8</code></a> <a href="https://github.com/npm/npm/issues/10938">#10938</a> When removing a package, sometimes the <code>node_modules/.bin</code> wouldn't be cleaned up entirely. This would result in package folders that contained only a <code>node_modules/.bin</code> directory. In turn, this would result in <code>npm ls</code> and other tools complaining about these broken directories. To fix this, the <code>unbuild</code> step now explicitly deletes the <code>node_modules/.bin</code> folder as its final step. (<a href="https://github.com/chrisirhc">@chrisirhc</a>)</li>
<li><a href="https://github.com/npm/npm/commit/00720db2c326cf8f968c662444a4575ae8c3020a"><code>00720db</code></a> <a href="https://github.com/npm/npm/pull/11158">#11158</a> On Windows, the <code>node-gyp</code> wrapper would fail if your path to <code>node-gyp</code> contained spaces. This fixes that problem by quoting use of that path. (<a href="https://github.com/orangemocha">@orangemocha</a>)</li>
<li><a href="https://github.com/npm/npm/commit/69ac9333506752bf2e5af70b3b3e03c6181de3e7"><code>69ac933</code></a> <a href="https://github.com/npm/npm/pull/11142">#11142</a> Fix a race condition when making directories in the cache, which could lead to <code>ENOENT</code> failures. (<a href="https://github.com/Jimbly">@Jimbly</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e982858d9bed65cede9cbb12df9216a4bb9e6fc9"><code>e982858</code></a> <a href="https://github.com/npm/npm/issues/9696">#9696</a> When replacing the <code>package.json</code> in the cache you sometimes see <code>EPERM</code> errors on Windows that you wouldn't on Unix-like operating systems. This ignores those errors and allows Windows to continue. Longer term, we'll be adding something to retry these errors, but ultimately fail if there really is an ongoing permissions issue. (<a href="https://github.com/orangemocha">@orangemocha</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4005"></a>
DOC CHANGES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/3666081abd02184ba97a7cdb6ae238085d640b4b"><code>3666081</code></a> <a href="https://github.com/npm/npm/pull/11188">#11188</a> Add brief description to publish documentation of what's included in published tarballs. (<a href="https://github.com/beaugunderson">@beaugunderson</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b463e3424b296cfc4bd384fc8bfe0e2329649164"><code>b463e34</code></a> <a href="https://github.com/npm/npm/pull/11150">#11150</a> In npm update docs, advise use of <code>--depth Infinity</code> instead of <code>--depth 9999</code>. (<a href="https://github.com/halhenke">@halhenke</a>)</li>
<li><a href="https://github.com/npm/npm/commit/382e71a7ee5d1ca3dba55c1e753d529eb8ae6895"><code>382e71a</code></a> <a href="https://github.com/npm/npm/pull/11128">#11128</a> In the <code>package.json</code> docs, make the reference to the "Local Paths" section a link to it as well. (<a href="https://github.com/orangejulius">@orangejulius</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5277e7f236e8cb40d7f4a1054506f2d3d159716e"><code>5277e7f</code></a> <a href="https://github.com/npm/npm/pull/11090">#11090</a> Fix the 3.5.4 release date in CHANGELOG.md. (<a href="https://github.com/ashleygwilliams">@ashleygwilliams</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e6d238a3d90beeb0af23fa75a9b5e50671d6e4c5"><code>e6d238a</code></a> <a href="https://github.com/npm/npm/pull/11130">#11130</a> Eliminate the "using npm programmatically" section from the README. The documentation for this was removed a while ago and is unsupported. (<a href="https://github.com/ljharb">@ljharb</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4006"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/b0dde5c3407b58d78969d3da01af2629fcba1c73"><code>b0dde5c</code></a> <code>config-chain@1.1.10</code>: Update tests for most recent version of <code>ini</code>. (<a href="https://github.com/dominictarr">@dominictarr</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c62f414534971761a48ce3cbc3e25214fb09e494"><code>c62f414</code></a> <code>glob@6.0.4</code>: Eliminated use of <code>util._extend</code>. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/98a67797978ed7ce534e16b705d3a2a9ca0e6cc1"><code>98a6779</code></a> <code>lodash.clonedeep@4.0.1</code>: Bug fixes, including the non-linear performance that was biting npm a while back. (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0e8c4cebddaefbf5eca0abaad512db266c6722c9"><code>0e8c4ce</code></a> <code>lodash.without@4.0.1</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/1fd19f57a3551d7d30a6b8a9ce967ef50e0ff0ba"><code>1fd19f5</code></a> <code>lodash.uniq@4.0.1</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b7486c550f3391f733d1e1907652be95fddf4368"><code>b7486c5</code></a> <code>lodash.union@4.0.1</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/54bb5911e18f8fb86eb94159f34b13f0c0aa2e30"><code>54bb591</code></a> <code>lodash.keys@4.0.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/26f7a7aaae0575a85deba2241ee69b433dd1ba98"><code>26f7a7a</code></a> <code>lodash.isarray@4.0.0</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ed38bd3baf544dfc0630fd321d279f137700bd4d"><code>ed38bd3</code></a> <code>lodash.isarguments@3.0.5</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4007"></a>
v3.5.4 (2016-01-07):</h2>
<p>I hope you all had fantastic winter holidays, if it's winter where you are and if there are holidays‼ We went a few weeks without releases because staff was taking time away from work here and there. A new year has come and we're back now, and refreshed and ready to dig in!</p>
<p>This week brings us a bunch of documentation improvements and some module updates. The core team's focus continues to be on improving tests, particularly with Windows, so there's not too much to call out here.</p>
<h3><a class="anchor" id="autotoc_md4008"></a>
DOCUMENTATION IMPROVEMENTS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/6b0031e28c0b10fb2622fdadde41f5cd294348e8"><code>6b0031e</code></a> <a href="https://github.com/npm/npm/pull/11044">#11044</a> Correct documentation regarding the defaults for the <code>color</code> config option. (<a href="https://github.com/scottaddie">@scottaddie</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c6ce69eaed7f17b5f1876ac13ecfae3d14a72f24"><code>c6ce69e</code></a> <a href="https://github.com/npm/npm/pull/10990">#10990</a> Drop mentions in documentation of <code>process.installPrefix</code>, as it hasn't been a thing since Node.js 0.6 and we don't support that. (<a href="https://github.com/jeffmcmahan">@jeffmcmahan</a>)</li>
<li><a href="https://github.com/npm/npm/commit/dee92d1f78608a10becf57aae86d5d495f2272bd"><code>dee92d1</code></a> <a href="https://github.com/npm/npm/pull/11037">#11037</a> Clarify the documentation on the max length of the <code>name</code> property in <code>package.json</code> files. (<a href="https://github.com/scottaddie">@scottaddie</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4b9d7bb1a4fc3f1edcf563379abfd2273af10881"><code>4b9d7bb</code></a> <a href="https://github.com/npm/npm/pull/10787">#10787</a> Make the formatting in the documentation for <code>npm dist-tag</code> more consistent with other docs. (<a href="https://github.com/cvrebert">@cvrebert</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7f77a80d561ee4b2b8c0aba1226fe89dfe339bcd"><code>7f77a80</code></a> <a href="https://github.com/npm/npm/pull/10787">#10787</a> Add documentation to the <code>npm dist-tag</code> docs that explains in greater detail how <code>latest</code> is different than other tags. Further, improve the documentation with better examples. Add a discussion of common practice for using dist tags to manage alpha's and beta's. (<a href="https://github.com/cvrebert">@cvrebert</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6db58dd0d7719c4675a239d43164edc066842b14"><code>6db58dd</code></a> <a href="https://github.com/npm/npm/commit/2ee6371911bd3a4d566c5d7bc8734facc60cb27c"><code>2ee6371</code></a> <a href="https://github.com/npm/npm/pull/10788">#10788</a> <a href="https://github.com/npm/npm/pull/10789">#10789</a> Improve documentation cross referencing. (<a href="https://github.com/cvrebert">@cvrebert</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7ba629a2ad3eaf736529e053b533cabe3a0d7123"><code>7ba629a</code></a> <a href="https://github.com/npm/npm/pull/10790">#10790</a> Document more clearly that <code>npm install foo</code> means <code>npm install foo@latest</code>. (<a href="https://github.com/cvrebert">@cvrebert</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4009"></a>
A FEW MODULE UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/fc2e8d58a91728cb06936eea686efaa4fdec3f06"><code>fc2e8d5</code></a> <code>glob@6.0.3</code>: Remove deprecated features and fix a bunch of bugs. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5b820c4e17c907fa8c23771c0cd8e74dd5fdaa51"><code>5b820c4</code></a> <code>has-unicode@2.0.0</code>: Change the default on Windows to be false, as international Windows installs often install to non-unicode codepages and there's no way to detect this short of a system call or a call to a command line program. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/238fe84ac61297f1d71701d80368afaa40463305"><code>238fe84</code></a> <code>which@1.2.1</code>: Fixed bugs with uid/gid checks and with quoted Windows PATH parts. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5e510e13d022a22d58742b126482d3b38a14cc83"><code>5e510e1</code></a> <code>rimraf@2.5.0</code>: Add ability to disable glob support / pass in options. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/755821569466b7be0883f4b0573eeb83c24109eb"><code>7558215</code></a> <code>readable-stream@2.0.5</code>: Minor performance improvements. (<a href="https://github.com/calvinmetcalf">@calvinmetcalf</a>)</li>
<li><a href="https://github.com/npm/npm/commit/64e84992c812a73d590be443c09a6977d0ae9040"><code>64e8499</code></a> <code>fs-write-stream-atomic@1.0.8</code>: Rewrite to use modern streams even on 0.8 plus a bunch of tests. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/74d92a08d72ce3603244de4bb3e3706d2b928cef"><code>74d92a0</code></a> <code>columnify@1.5.4</code>: Some bug fixes around large inputs. (<a href="https://github.com/timoxley">@timoxley</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4010"></a>
FIX NPM'S TESTS ON 0.8</h3>
<p>This doesn't impact you as a user of npm, and ordinarily that means we wouldn't call it out here, but if you've ever wanted to contribute, having that green travis badge makes it a lot easier to do so with confidence!</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/b14cdbb6002b04bfbefaff70cc45810c20d5a366"><code>b14cdbb</code></a> <a href="https://github.com/npm/npm/pull/10872">#10872</a> Rewrite tests using nock to use other alternatives. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/59ed01a8ea7960b1467aed52164fc36a03c77770"><code>59ed01a</code></a> <a href="https://github.com/npm/npm/pull/10872">#10872</a> Work around Node.js 0.8 http back-pressure bug.</p>
<p class="startli">0.8 http streams have a bug, where if they're paused with data in their buffers when the socket closes, they call <code>end</code> before emptying those buffers, which results in the entire pipeline ending and thus the point that applied backpressure never being able to trigger a <code>resume</code>.</p>
<p class="startli">We work around this by piping into a pass through stream that has unlimited buffering. The pass through stream is from readable-stream and is thus a current streams3 implementation that is free of these bugs even on 0.8. (<a href="https://github.com/iarna">@iarna</a>)</p>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md4011"></a>
v3.5.3 (2015-12-10):</h2>
<p>Did you know that Bob Ross reached the rank of master sergeant in the US Air Force before becoming perhaps the most soothing painter of all time?</p>
<h3><a class="anchor" id="autotoc_md4012"></a>
TWO HAPPY LITTLE BUG FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/71c9590be61b6a7b7fa8b6dc19baa588cda26a27"><code>71c9590</code></a> <a href="https://github.com/npm/npm/issues/10505">#10505</a> <code>npm ls --json --depth=0</code> now respects the depth parameter, when it is zero and when it is not zero. (<a href="https://github.com/MarkReeder">@MarkReeder</a>)</li>
<li><a href="https://github.com/npm/npm/commit/954fa67f1ca3739992abd244e217a0aaf8465660"><code>954fa67</code></a> <a href="https://github.com/npm/npm/issues/9099">#9099</a> I had always thought you could run <code>npm version</code> from subdirectories in your project, which is great, because now you can. I guess I was just ahead of my time. (<a href="https://github.com/ekmartin">@ekmartin</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4013"></a>
NOW PAINT IN SOME NICE DOCS CHANGES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/b88c37c1cced40e9e41402cc54a5efc3c33cd13e"><code>b88c37c</code></a> <a href="https://github.com/npm/npm/issues/10546">#10546</a> Goodbye, FAQ! You were cheeky and fun until you weren't! Don't worry: npm still loves everyone, especially you! (<a href="https://github.com/ashleygwilliams">@ashleygwilliams</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2d3afe9644ba69681a36721e79c45d27def71939"><code>2d3afe9</code></a> <a href="https://github.com/npm/npm/issues/10570">#10570</a> Update documentation URLs to be HTTPS everywhere sensible. No HTTP shall be spared! (<a href="https://github.com/rsp">@rsp</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6abd0e0626d0f642ce0dae0e128ced80433f15a1"><code>6abd0e0</code></a> <a href="https://github.com/npm/npm/issues/10650">#10650</a> Correctly note that there are two lifecycle scripts run by an install phase in an example, instead of three. (<a href="https://github.com/eymengunay">@eymengunay</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a5e8df53b8d6d75398cb6a55a44dcf374b0f1661"><code>a5e8df5</code></a> <a href="https://github.com/npm/npm/issues/10687">#10687</a> <code>npm outdated</code>'s output can be a little puzzling sometimes. I've attempted to make it clearer, with some examples, of what's going on with "wanted" and "latest" in more cases. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8f52833f5d15c4f94467234607d40e75198af1aa"><code>8f52833</code></a> <a href="https://github.com/npm/npm/issues/10700">#10700</a> Hey, do you remember when <code>search.npmjs.org</code> was a thing? I think I do? The last time I used it was in like 2012, and it's gone now, so remove it from the docs. (<a href="https://github.com/gagern">@gagern</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b6a53b889c948053dcbf6d7aab9ad1cd4226dc32"><code>b6a53b8</code></a> <a href="https://github.com/npm/docs/issues/477">npm/docs#477</a> Continue to airbrush the CLI API docs out of history. (<a href="https://github.com/verpixelt">@verpixelt</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b835b72d1dd23b0a17321a85d8d395322d18005d"><code>b835b72</code></a> <code>semver@5.1.0</code>: Include BNF for SemVer expression grammar (which is also now included in <code>npm help semver</code>). (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4014"></a>
LAND YOUR DEPENDENCY UPGRADES IN PAIRS SO EVERYONE HAS A FRIEND</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/95e99faadcdc85a16210dd79c0e7d83add1b9f3e"><code>95e99fa</code></a> <code>request@2.67.0</code> (<a href="https://github.com/simov">@simov</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b49199ac96dfb1afe5719286621a318576dd69ae"><code>b49199a</code></a> <a href="https://github.com/isaacs/rimraf/pull/89">isaacs/rimraf#89</a> <code>rimraf@2.4.4</code> (<a href="https://github.com/zerok">@zerok</a>)</li>
<li><a href="https://github.com/npm/npm/commit/66324189a734a1665e1b78a06ba44089d9c3a11c"><code>6632418</code></a> <a href="https://github.com/npm/nopt/pull/51">npm/nopt#51</a> <code>nopt@3.0.6</code> (<a href="https://github.com/wbecker">@wbecker</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f0a3b3e0dbbdaf11ec55dccd59cc21bfa05f9240"><code>f0a3b3e</code></a> <a href="https://github.com/isaacs/once/pull/7">isaacs/once#7</a> <code>once@1.3.3</code> (<a href="https://github.com/floatdrop">@floatdrop</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4015"></a>
v3.5.2 (2015-12-03):</h2>
<p>Weeeelcome to another npm release! The short version is that we fixed some <code>ENOENT</code> and some modules that resulted in modules going missing. We also eliminated the use of MD5 in our code base to help folks using Node.js in FIPS mode. And we fixed a bad URL in our license file.</p>
<h3><a class="anchor" id="autotoc_md4016"></a>
FIX URL IN LICENSE</h3>
<p>The license incorrectly identified the registry URL as <code>registry.npmjs.com</code> and this has been corrected to <code>registry.npmjs.org</code>.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/cb6d81bd611f68c6126a90127a9dfe5604d46c8c"><code>cb6d81b</code></a> <a href="https://github.com/npm/npm/pull/10685">#10685</a> Fix npm public registry URL in notices. (<a href="https://github.com/kemitchell">@kemitchell</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4017"></a>
ENOENT? MORE LIKE ENOMOREBUGS</h3>
<p>The headliner this week was uncovered by the fixes to bundled dependency handling over the past few releases. What had been a frustratingly intermittent and hard to reproduce bug became something that happened every time in Travis. This fixes another whole bunch of errors where you would, while running an install have it crash with an <code>ENOENT</code> on <code>rename</code>, or the install would finish but some modules would be mysteriously missing and you'd have to install a second time.</p>
<p>What's going on was a bit involved, so bear with me:</p>
<p><code>npm@3</code> generates a list of actions to take against the tree on disk. With the exception of lifecycle scripts, it expects these all to be able to act independently without interfering with each other.</p>
<p>This means, for instance, that one should be able to upgrade <code>b</code> in <code>a→b→c</code> without having npm reinstall <code>c</code>.</p>
<p>That works fine by the way.</p>
<p>But it also means that the move action should be able to move <code>b</code> in <code>a→b→c@1.0.1</code> to <code>a→d→b→c@1.0.2</code> without moving or removing <code>c@1.0.1</code> and while leaving <code>c@1.0.2</code> in place if it was already installed.</p>
<p>That is, the <code>move</code> action moves an individual node, replacing itself with an empty spot if it had children. This is not, as it might first appear, something where you move an entire branch to another location on the tree.</p>
<p>When moving <code>b</code> we already took care to leave <code>c@1.0.1</code> in place so that other moves (or removes) could handle it, but we were stomping on the destination and so <code>c@1.0.2</code> was being removed.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/f4385d8e7678349e75c80fae8a1f8f366f197937"><code>f4385d8</code></a> <a href="https://github.com/npm/npm/pull/10655">#10655</a> Preserve destination <code>node_modules</code> when moving. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<p>There was also a bug with <code>remove</code> where it was pruning the entire tree at the remove point, prior to running moves and adds.</p>
<p>This was fine most of the time, but if we were moving one of the deps out from inside it, kaboom.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/19c626d69888f0cdc6e960254b3fdf523ec4b52c"><code>19c626d</code></a> <a href="https://github.com/npm/npm/pull/10655">#10655</a> Get rid of the remove commit phase– we could have it prune <em>just</em> the module being removed, but that isn't gaining us anything. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<p>After all that, we shouldn't be upgrading the <code>add</code> of a bundled package to a <code>move</code>. Moves save us from having to extract the package, but with a bundled dependency it's included in another package already so that doesn't gain us anything.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/641a93bd66a6aa4edf2d6167344b50d1a2afb593"><code>641a93b</code></a> <a href="https://github.com/npm/npm/pull/10655">#10655</a> Don't convert adds to moves with bundled deps. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<p>While I was in there, I also took some time to improve diagnostics to make this sort of thing easier to track down in the future:</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/a04ec04804e562b511cd31afe89c8ba94aa37ff2"><code>a04ec04</code></a> <a href="https://github.com/npm/ npm/pull/10655">#10655</a> Wrap rename so errors have stack traces. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8ea142f896a2764290ca5472442b27b047ab7a1a"><code>8ea142f</code></a> <a href="https://github.com/npm/npm/pull/10655">#10655</a> Add silly logging so function is debuggable (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4018"></a>
NO MORE MD5</h3>
<p>We updated modules that had been using MD5 for non-security purposes. While this is perfectly safe, if you compile Node in FIPS-compliance mode it will explode if you try to use MD5. We've replaced MD5 with Murmur, which conveys our intent better and is faster to boot.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/f068b2661a8d0269c184867e003cd08cb6c56cf2"><code>f068b26</code></a> <a href="https://github.com/npm/npm/issues/10629">#10629</a> <code>unique-filename@1.1.0</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/dba1b2402aaa2beceec798d3bd22d00650e01069"><code>dba1b24</code></a> <a href="https://github.com/npm/npm/issues/10629">#10629</a> <code>write-file-atomic@1.1.4</code> (<a href="https://github.com/othiym23">@othiym23</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8347a308ef0d2cf0f58f96bba3635af642ec611f"><code>8347a30</code></a> <a href="https://github.com/npm/npm/issues/10629">#10629</a> <code>fs-write-stream-atomic@1.0.5</code> (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4019"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/9e2a2bb5bc71a0ab3b3637e8eec212aa22d5c99f"><code>9e2a2bb</code></a> <a href="https://github.com/nodejs/node-gyp/pull/831">nodejs/node-gyp#831</a> <code>node-gyp@3.2.1</code>: Improved *BSD support. (<a href="https://github.com/bnoordhuis">@bnoordhuis</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4020"></a>
v3.5.1 (2015-11-25):</h2>
<h3><a class="anchor" id="autotoc_md4021"></a>
THE npm CLI !== THE npm REGISTRY !== npm, INC.</h3>
<p>npm-the-CLI is licensed under the terms of the <a href="https://github.com/npm/npm/blob/8d79c1a39dae908f27eaa37ff6b23515d505ef29/LICENSE">Artistic License 2.0</a>, which is a liberal open-source license that allows you to take this code and do pretty much whatever you like with it (that is, of course, not legal language, and if you're doing anything with npm that leaves you in doubt about your legal rights, please seek the review of qualified counsel, which is to say, not members of the CLI team, none of whom have passed the bar, to my knowledge). At the same time the primary registry the CLI uses when looking up and downloading packages is a commercial service run by npm, Inc., and it has its own <a href="https://www.npmjs.com/policies/terms">Terms of Use</a>.</p>
<p>Aside from clarifying the terms of use (and trying to make sure they're more widely known), the only recent changes to npm's licenses have been making the split between the CLI and registry clearer. You are still free to do whatever you like with the CLI's source, and you are free to view, download, and publish packages to and from <code>registry.npmjs.org</code>, but now the existing terms under which you can do so are more clearly documented. Aside from the two commits below, see also <a href="https://github.com/npm/npm/releases/tag/v3.4.1">the release notes for <code>npm@3.4.1</code></a>, which is where the split between the CLI's code and the terms of use for the registry was first made more clear.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/35a5dd5abbfeec4f98a2b4534ec4ef5d16760581"><code>35a5dd5</code></a> <a href="https://github.com/npm/npm/issues/10532">#10532</a> Clarify that <code>registry.npmjs.org</code> is the default, but that you're free to use the npm CLI with whatever registry you wish. (<a href="https://github.com/kemitchell">@kemitchell</a>)</li>
<li><a href="https://github.com/npm/npm/commit/fa6b0136a0e4a19d8979b2013622e5ff3f0446f8"><code>fa6b013</code></a> <a href="https://github.com/npm/npm/issues/10532">#10532</a> Having semi-duplicate release information in <code>README.md</code> was confusing and potentially inaccurate, so remove it. (<a href="https://github.com/kemitchell">@kemitchell</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4022"></a>
EASE UP ON WINDOWS BASH USERS</h3>
<p>It turns out that a fair number of us use bash on Windows (through MINGW or bundled with Git, plz – Cygwin is still a bridge too far, for both npm and Node.js). <a href="https://github.com/jakub-g">@jakub-g</a> did us all a favor and relaxed the check for npm completion to support MINGW bash. Thanks, Jakub!</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/09498e45c5c9e683f092ab1372670f81db4762b6"><code>09498e4</code></a> <a href="https://github.com/npm/npm/issues/10156">#10156</a> completion: enable on Windows in git bash (<a href="https://github.com/jakub-g">@jakub-g</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4023"></a>
THE ONGOING SAGA OF BUNDLED DEPENDENCIES</h3>
<p><code>npm@3.5.0</code> fixed up a serious issue with how <code>npm@3.4.1</code> (and potentially <code>npm@3.4.0</code> and <code>npm@3.3.12</code>) handled the case in which dependencies bundled into a package tarball are handled improperly when one or more of their own dependencies are older than what's latest on the registry. Unfortunately, in fixing that (quite severe) regression (see <a href="https://github.com/npm/npm/releases/tag/v3.5.0"><code>npm@3.5.0</code>'s release notes' for details</a>), we introduced a new (small, and fortunately cosmetic) issue where npm superfluously warns you about bundled dependencies being stale. We have now fixed that, and hope that we haven't introduced any <em>other</em> regressions in the process. :D</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/20824a75bf7639fb0951a588e3c017a370ae6ec2"><code>20824a7</code></a> <a href="https://github.com/npm/npm/issues/10501">#10501</a> Only warn about replacing bundled dependencies when actually doing so. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4024"></a>
MAKE NODE-GYP A LITTLE BLUER</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/1d14d882c3b5af0a7fee46e8e0e343d07e4c38cb"><code>1d14d88</code></a> <code>node-gyp@3.2.0</code>: Support AIX, use <code>which</code> to find Python, updated to a newer version of <code>gyp</code>, and more! (<a href="https://github.com/bnoordhuis">@bnoordhuis</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4025"></a>
A BOUNTEOUS THANKSGIVING CORNUCOPIA OF DOC TWEAKS</h3>
<p>These are great! Keep them coming! Sorry for letting them pile up so deep, everybody. Also, a belated Thanksgiving to our Canadian friends, and a happy Thanksgiving to all our friends in the USA.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/4659f1c5ad617c46a5e89b48abf0b1c4e6f04307"><code>4659f1c</code></a> <a href="https://github.com/npm/npm/issues/10244">#10244</a> In <code>npm@3</code>, <code>npm dedupe</code> doesn't take any arguments, so update documentation to reflect that. (<a href="https://github.com/bengotow">@bengotow</a>)</li>
<li><a href="https://github.com/npm/npm/commit/625a7ee6b4391e90cb28a95f20a73fd794e1eebe"><code>625a7ee</code></a> <a href="https://github.com/npm/npm/issues/10250">#10250</a> Correct order of <code>org:team</code> in <code>npm team</code> documentation. (<a href="https://github.com/louislarry">@louislarry</a>)</li>
<li><a href="https://github.com/npm/npm/commit/bea7f87399d784e3a6d3393afcca658a61a40d77"><code>bea7f87</code></a> <a href="https://github.com/npm/npm/issues/10371">#10371</a> Remove broken / duplicate link to tag. (<a href="https://github.com/WickyNilliams">@WickyNilliams</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0a25e2956e9ddd4065d6bd929559321afc512fde"><code>0a25e29</code></a> <a href="https://github.com/npm/npm/issues/10419">#10419</a> Remove references to nonexistent <code>npm-rm(1)</code> documentation. (<a href="https://github.com/KenanY">@KenanY</a>)</li>
<li><a href="https://github.com/npm/npm/commit/19b94e1e6781fe2f98ada0a3f49a1bda25e3e32d"><code>19b94e1</code></a> <a href="https://github.com/npm/npm/issues/10474">#10474</a> Clarify that install finds dependencies in <code>package.json</code>. (<a href="https://github.com/sleekweasel">@sleekweasel</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b25efc88067c843ffdda86ea0f50f95d136a638e"><code>b25efc8</code></a> <a href="https://github.com/npm/npm/issues/9948">#9948</a> Encourage users to file an issue, rather than emailing authors. (<a href="https://github.com/trodrigues">@trodrigues</a>)</li>
<li><a href="https://github.com/npm/npm/commit/24f4cedc83b10061f26362bf2f005ab935e0cbfe"><code>24f4ced</code></a> <a href="https://github.com/npm/npm/issues/10497">#10497</a> Clarify what a package is slightly. (<a href="https://github.com/aredridel">@aredridel</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e8168d40caae00b2914ea09dbe4bd1b09ba3dcd5"><code>e8168d4</code></a> <a href="https://github.com/npm/npm/issues/10539">#10539</a> Remove an extra, spuriously capitalized letter. (<a href="https://github.com/alexlukin-softgrad">@alexlukin-softgrad</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4026"></a>
v3.5.0 (2015-11-19):</h2>
<h3><a class="anchor" id="autotoc_md4027"></a>
TEEN ORCS AT THE GATES</h3>
<p>This week heralds the general release of the primary npm registry's [new support for private packages for organizations](<a href="http://blog.npmjs.org/post/133542170540/private-packages-for-organizations">http://blog.npmjs.org/post/133542170540/private-packages-for-organizations</a>). For many potential users, it's the missing piece needed to make it easy for you to move your organization's private work onto npm. And now it's here! The functionality to support it has been in place in the CLI for a while now, thanks to <a href="https://github.com/zkat">@zkat</a>'s hard work.</p>
<p>During our final testing before the release, our ace support team member <a href="https://github.com/snopeks">@snopeks</a> noticed that there had been some drift between the CLI team's implementation and what npm was actually preparing to ship. In the interests of everyone having a smooth experience with this <em>extremely useful</em> new feature, we quickly made a few changes to square up the CLI and the web site experiences.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/d7fb92d1c53ba5196ad6dd2101a06792a4c0412b"><code>d7fb92d</code></a> <a href="https://github.com/npm/npm/issues/9327">#9327</a> <code>npm access</code> no longer has problems when run in a directory that doesn't contain a <code>package.json</code>. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
<li><a href="https://github.com/npm/npm/commit/17df3b5d5dffb2e9c223b9cfa2d5fd78c39492a4"><code>17df3b5</code></a> <a href="https://github.com/npm/npm-registry-client/issues/126">npm/npm-registry-client#126</a> <code>npm-registry-client@7.0.8</code>: Allow the CLI to grant, revoke, and list permissions on unscoped (public) packages on the primary registry. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4028"></a>
NON-OPTIONAL INSTALLS, DEFINITELY NON-OPTIONAL</h3>
<ul>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/180263b"><code>180263b</code></a> <a href="https://github.com/npm/npm/pull/10465">#10465</a> When a non-optional dep fails, we check to see if it's only required by ONLY optional dependencies. If it is, we make it fail all the deps in that chain (and roll them back). If it isn't then we give an error.</p>
<p class="startli">We do this by walking up through all of our ancestors until we either hit an optional dependency or the top of the tree. If we hit the top, we know to give the error.</p>
<p class="startli">If you installed a module by hand but didn't <code>--save</code> it, your module won't have the top of the tree as an anscestor and so this code was failing to abort the install with an error</p>
<p class="startli">This updates the logic so that hitting the top OR a module that was requested by the user will trigger the error message. (<a href="https://github.com/iarna">@iarna</a>)</p>
</li>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/b726a0e"><code>b726a0e</code></a> <a href="https://github.com/npm/npm/issues/9204">#9204</a> Ideally we would like warnings about your install to come AFTER the output from your compile steps or the giant tree of installed modules.</p>
<p class="startli">To that end, we've moved warnings about failed optional deps to the show after your install completes. (<a href="https://github.com/iarna">@iarna</a>)</p>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md4029"></a>
OVERRIDING BUNDLING</h3>
<ul>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/aed71fb"><code>aed71fb</code></a> <a href="https://github.com/npm/npm/issues/10482">#10482</a> We've been in our bundled modules code a lot lately, and our last go at this introduced a new bug, where if you had a module <code>a</code> that bundled a module <code>b</code>, which in turn required <code>c</code>, and the version of <code>c</code> that got bundled wasn't compatible with <code>b</code>'s <code>package.json</code>, we would then install a compatible version of <code>c</code>, but also erase <code>b</code> at the same time.</p>
<p class="startli">This fixes that. It also reworks our bundled module support to be much closer to being in line with how we handle non-bundled modules and we're hopeful this will reduce any future errors around them. The new structure is hopefully much easier to reason about anyway. (<a href="https://github.com/iarna">@iarna</a>)</p>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md4030"></a>
A BRIEF NOTE ON NPM'S BACKWARDS COMPATIBILITY</h3>
<p>We don't often have much to say about the changes we make to our internal testing and tooling, but I'm going to take this opportunity to reiterate that npm tries hard to maintain compatibility with a wide variety of Node versions. As this change shows, we want to ensure that npm works the same across:</p>
<ul>
<li>Node.js 0.8</li>
<li>Node.js 0.10</li>
<li>Node.js 0.12</li>
<li>the latest io.js release</li>
<li>Node.js 4 LTS</li>
<li>Node.js 5</li>
</ul>
<p>Contributors who send us pull requests often notice that it's very rare that our tests pass across all of those versions (ironically, almost entirely due to the packages we use for testing instead of any issues within npm itself). We're currently beginning an effort, lasting the rest of 2015, to clean up our test suite, and not only get it passing on all of the above versions of Node.js, but working solidly on Windows as well. This is a compounding form of technical debt that we're finally paying down, and our hope is that cleaning up the tests will produce a more robust CLI that's a lot easier to write patches for.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/791ec6b1bac0d1df59f5ebb4ccd16a29a5dc73f0"><code>791ec6b</code></a> <a href="https://github.com/npm/npm/issues/10233">#10233</a> Update Node.js versions that Travis uses to test npm. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4031"></a>
0.8 + npm &lt;1.4 COMPATIBLE? SURE WHY NOT</h3>
<p>Hey, you found the feature we added!</p>
<ul>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/231c58a"><code>231c58a</code></a> <a href="https://github.com/npm/npm/pull/10337">#10337</a> Add two new flags, first <code>--legacy-bundling</code> which installs your dependencies such that if you bundle those dependencies, npm versions prior to <code>1.4</code> can still install them. This eliminates all automatic deduping.</p>
<p class="startli">Second, <code>--global-style</code> which will install modules in your <code>node_modules</code> folder with the same layout as global modules. Only your direct dependencies will show in <code>node_modules</code> and everything they depend on will be flattened in their <code>node_modules</code> folders. This obviously will eliminate some deduping. (<a href="https://github.com/iarna">@iarna</a>)</p>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md4032"></a>
TYPOS IN THE LICENSE, OH MY</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/8d79c1a39dae908f27eaa37ff6b23515d505ef29"><code>8d79c1a</code></a> <a href="https://github.com/npm/npm/issues/10478">#10478</a> Correct two typos in npm's LICENSE. (<a href="https://github.com/jorrit">@jorrit</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4033"></a>
v3.4.1 (2015-11-12):</h2>
<h3><a class="anchor" id="autotoc_md4034"></a>
ASK FOR NOTHING, GET LATEST</h3>
<p>When you run <code>npm install foo</code>, you probably expect that you'll get the <code>latest</code> version of <code>foo</code>, whatever that is. And good news! That's what this change makes it do.</p>
<p>We <em>think</em> this is what everyone wants, but if this causes problems for you, we want to know! If it proves problematic for people we will consider reverting it (preferably before this becomes <code>npm@latest</code>).</p>
<p>Previously, when you ran <code>npm install foo</code> we would act as if you typed <code>npm install foo@*</code>. Now, like any range-type specifier, in addition to matching the range, it would also have to be <code>&lt;=</code> the value of the <code>latest</code> dist-tag. Further, it would exclude prerelease versions from the list of versions considered for a match.</p>
<p>This worked as expected most of the time, unless your <code>latest</code> was a prerelease version, in which case that version wouldn't be used, to everyone's surprise. Worse, if all your versions were prerelease versions it would just refuse to install anything. (We fixed that in <a href="https://github.com/npm/npm/releases/tag/v3.2.2"><code>npm@3.2.2</code></a> with <a href="https://github.com/npm/npm/commit/e4a38080"><code>e4a38080</code></a>.)</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/1e834c2"><code>1e834c2</code></a> <a href="https://github.com/npm/npm/issues/10189">#10189</a> <code>npm-package-arg@4.1.0</code> Change the default version from <code>*</code> to <code>latest</code>. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4035"></a>
BUGS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/bec4a84"><code>bec4a84</code></a> <a href="https://github.com/npm/npm/pull/10338">#10338</a> Failed installs could result in more rollback (removal of just installed packages) than we intended. This bug was first introduced by <a href="https://github.com/npm/npm/commit/83975520"><code>83975520</code></a>. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/06c732f"><code>06c732f</code></a> <a href="https://github.com/npm/npm/pull/10338">#10338</a> Updating a module could result in the module stealing some of its dependencies from the top level, potentially breaking other modules or resulting in many redundant installations. This bug was first introduced by <a href="https://github.com/npm/npm/commit/971fd47a"><code>971fd47a</code></a>. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5653366"><code>5653366</code></a> <a href="https://github.com/npm/npm/issues/9980">#9980</a> npm, when removing a module, would refuse to remove the symlinked binaries if the module itself was symlinked as well. npm goes to some effort to ensure that it doesn't remove things that aren't is, and this code was being too conservative. This code has been rewritten to be easier to follow and to be unit-testable. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4036"></a>
LICENSE CLARIFICATION</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/80acf20"><code>80acf20</code></a> <a href="https://github.com/npm/npm/pull/10326">#10326</a> Update npm's licensing to more completely cover all of the various things that are npm. (<a href="https://github.com/kemitchell">@kemitchell</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4037"></a>
CLOSER TO GREEN TRAVIS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/fc12da9"><code>fc12da9</code></a> <a href="https://github.com/npm/npm/pull/10232">#10232</a> <code>nock@1.9.0</code> Downgrade nock to a version that doesn't depend on streams2 in core so that more of our tests can pass in 0.8. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4038"></a>
v3.4.0 (2015-11-05):</h2>
<h3><a class="anchor" id="autotoc_md4039"></a>
A NEW FEATURE</h3>
<p>This was a group effort, with <a href="https://github.com/isaacs">@isaacs</a> dropping the implementation in back in August. Then, a few days ago, <a href="https://github.com/ashleygwilliams">@ashleygwilliams</a> wrote up docs and just today <a href="https://github.com/othiym23">@othiym23</a> wrote a test.</p>
<p>It's a handy shortcut to update a dependency and then make sure tests still pass.</p>
<p>This new command:</p>
<div class="fragment"><div class="line">npm install-test x</div>
</div><!-- fragment --><p>is the equivalent of running:</p>
<div class="fragment"><div class="line">npm install x &amp;&amp; npm test</div>
</div><!-- fragment --><ul>
<li><a href="https://github.com/npm/npm/commit/1ac3e08"><code>1ac3e08</code></a> <a href="https://github.com/npm/npm/commit/bcb04f6"><code>bcb04f6</code></a> <a href="https://github.com/npm/npm/commit/b6c17dd"><code>b6c17dd</code></a> <a href="https://github.com/npm/npm/pull/9443">#9443</a> Add <code>npm install-test</code> command, alias <code>npm it</code>. (<a href="https://github.com/isaacs">@isaacs</a>, <a href="https://github.com/ashleygwilliams">@ashleygwilliams</a>, <a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4040"></a>
BUG FIXES VIA DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/31c0080"><code>31c0080</code></a> <a href="https://github.com/npm/npm/issues/8640">#8640</a> <a href="https://github.com/npm/normalize-package-data/pull/69">npm/normalize-package-data#69</a> <code>normalize-package-data@2.3.5</code>: Fix a bug where if you didn't specify the name of a scoped module's binary, it would install it such that it was impossible to call it. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/02b37bc"><code>02b37bc</code></a> <a href="https://github.com/npm/fstream-npm/pull/14">npm/fstream-npm#14</a> <code>fstream-npm@1.0.7</code>: Only filter <code>config.gypi</code> when it's in the build directory. (<a href="https://github.com/mscdex">@mscdex</a>)</li>
<li><a href="https://github.com/npm/npm/commit/accb9d2"><code>accb9d2</code></a> <a href="https://github.com/npm/fstream-npm/pull/15">npm/fstream-npm#15</a> <code>fstream-npm@1.0.6</code>: Stop including directories that happened to have names matching whitelisted npm files in npm module tarballs. The most common cause was that if you had a README directory then everything in it would be included if wanted it or not. (<a href="https://github.com/taion">@taion</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4041"></a>
DOCUMENTATION FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/7cf6366"><code>7cf6366</code></a> <a href="https://github.com/npm/npm/pull/10036">#10036</a> Fix typo / over-abbreviation. (<a href="https://github.com/ifdattic">@ifdattic</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d0ad8f4"><code>d0ad8f4</code></a> <a href="https://github.com/npm/npm/pull/10176">#10176</a> Fix broken link, scopes =&gt; scope. (<a href="https://github.com/ashleygwilliams">@ashleygwilliams</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d623783"><code>d623783</code></a> <a href="https://github.com/npm/npm/issue/9460">#9460</a> Specifying the default command run by "npm start" and the fact that you can pass it arguments. (<a href="https://github.com/JuanCaicedo">@JuanCaicedo</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4042"></a>
DEPENDENCY UPDATES FOR THEIR OWN SAKE</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/0a4c29e"><code>0a4c29e</code></a> <a href="https://github.com/npm/npmlog/pull/19">npm/npmlog#19</a> <code>npmlog@2.0.0</code>: Make it possible to emit log messages with <code>error</code> as the prefix. (<a href="https://github.com/bengl">@bengl</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9463ce9"><code>9463ce9</code></a> <code>read-package-json@2.0.2</code>: Minor cleanups. (<a href="https://github.com/KenanY">@KenanY</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4043"></a>
v3.3.12 (2015-11-02):</h2>
<p>Hi, a little hot-fix release for a bug introduced in 3.3.11. The ENOENT fix last week (<a href="https://github.com/npm/npm/commit/f0e2088"><code>f0e2088</code></a>) broke upgrades of modules that have bundled dependencies (like <code>npm</code>, augh!)</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/aedf7cf"><code>aedf7cf</code></a> <a href="//github.com/npm/npm/pull/10192">#10192</a> If a bundled module is going to be replacing a module that's currently on disk (for instance, when you upgrade a module that includes bundled dependencies) we want to select the version from the bundle in preference over the one that was there previously. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4044"></a>
v3.3.11 (2015-10-29):</h2>
<p>This is a dependency update week, so that means no PRs from our lovely users. Look for those next week. As it happens, the dependencies updated were just devdeps, so nothing for you all to worry about.</p>
<p>But the bug fixes, oh geez, I tracked down some really long standing stuff this week!! The headliner is those intermittent <code>ENOENT</code> errors that no one could reproduce consistently? I think they're nailed! But also pretty important, the bug where <code>hapi</code> would install w/ a dep missing? Squashed!</p>
<h3><a class="anchor" id="autotoc_md4045"></a>
EEEEEEENOENT</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/f0e2088"><code>f0e2088</code></a> <a href="https://github.com/npm/npm/issues/10026">#10026</a> Eliminate some, if not many, of the <code>ENOENT</code> errors <code>npm@3</code> has seen over the past few months. This was happening when npm would, in its own mind, correct a bundled dependency, due to a <code>package.json</code> specifying an incompatible version. Then, when npm extracted the bundled version, what was on disk didn't match its mind and… well, when it tried to act on what was in its mind, we got an <code>ENOENT</code> because it didn't actually exist on disk. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4046"></a>
PARTIAL SHRINKWRAPS, NO LONGER A BAD DAY</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/712fd9c"><code>712fd9c</code></a> <a href="https://github.com/npm/npm/pull/10153">#10153</a> Imagine that you have a module, let's call it <code>fun-time</code>, and it depends on two dependencies, <code>need-fun@1</code> and <code>need-time</code>. Further, <code>need-time</code> requires <code>need-fun@2</code>. So after install the logical tree will look like this:</li>
</ul>
<div class="fragment"><div class="line">fun-time</div>
<div class="line">├── need-fun@1</div>
<div class="line">└── need-time</div>
<div class="line">    └── need-fun@2</div>
</div><!-- fragment --><p>Now, the <code>fun-time</code> author also distributes a shrinkwrap, but it only includes the <code>need-fun@1</code> in it.</p>
<p>Resolving dependencies would look something like this:</p>
<ol type="1">
<li>Require <code>need-fun@1</code>: Use version from shrinkwrap (ignoring version)</li>
<li>Require <code>need-time</code>: User version in package.json<ol type="a">
<li>Require <code>need-fun@2</code>: Use version from shrinkwrap, which oh hey, is already installed at the top level, so no further action is needed.</li>
</ol>
</li>
</ol>
<p>Which results in this tree:</p>
<div class="fragment"><div class="line">fun-time</div>
<div class="line">├── need-fun@1</div>
<div class="line">└── need-time</div>
</div><!-- fragment --><p>We're ignoring the version check on things specified in the shrinkwrap so that you can override the version that will be installed. This is because you may want to use a different version than is specified by your dependencies' dependencies' <code>package.json</code> files.</p>
<p>To fix this, we now only allow overrides of a dependency version when that dependency is a child (in the tree) of the thing that requires it. This means that when we're looking for <code>need-fun@2</code> we'll see <code>need-fun@1</code> and reject it because, although it's from a shrinkwrap, it's parent is <code>fun-time</code> and the package doing the requiring is <code>need-time</code>.</p>
<p>(<a href="https://github.com/iarna">@iarna</a>)</p>
<h3><a class="anchor" id="autotoc_md4047"></a>
STRING &lt;tt&gt;package.bin&lt;/tt&gt; AND NON-NPMJS REGISTRIES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/3de1463"><code>3de1463</code></a> <a href="https://github.com/npm/npm/issues/9187">#9187</a> If you were using a module with the <code>bin</code> field in your <code>package.json</code> set to a string on a non-npmjs registry then npm would crash, due to the our expectation that the <code>bin</code> field would be an object. We now pass all <code>package.json</code> data through a routine that normalizes the format, including the <code>bin</code> field. (This is the same routine that your <code>package.json</code> is passed through when read off of disk or sent to the registry for publication.) Doing this also ensures that older modules on npm's own registry will be treated exactly the same as new ones. (In the past we weren't always super careful about scrubbing <code>package.json</code> data on publish. And even when we were, those rules have subtly changed over time.) (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4048"></a>
v3.3.10 (2015-10-22):</h2>
<p>Hey you all! Welcome to a busy bug fix and PR week. We've got changes to how <code>npm install</code> replaces dependencies during updates, improvements to shrinkwrap behavior, and all sorts of doc updates.</p>
<p>In other news, <code>npm@3</code> landed in node master in preparation for <code>node@5</code> with <a href="https://github.com/nodejs/node/commit/41923c0"><code>41923c0</code></a>.</p>
<h3><a class="anchor" id="autotoc_md4049"></a>
UPDATED DEPS NOW MAKE MORE SENSE</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/971fd47"><code>971fd47</code></a> <a href="https://github.com/npm/npm/pull/9929">#9929</a> Make the tree more consistent by doing updates in place. This means that trees after a dependency version update will more often look the same as after a fresh install. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4050"></a>
SHRINKWRAP + DEV DEPS NOW RESPECTED</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/eb28a8c"><code>eb28a8c</code></a> <a href="https://github.com/npm/npm/issues/9647">#9647</a> If a shrinkwrap already has dev deps, don't throw them away when someone later runs <code>npm install --save</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4051"></a>
FANTASTIC DOCUMENTATION UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/291162c"><code>291162c</code></a> <a href="https://github.com/npm/npm/pull/10021">#10021</a> Improve wording in the FAQ to be more empathetic and less jokey. (<a href="https://github.com/TaMe3971">@TaMe3971</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9a28c54"><code>9a28c54</code></a> <a href="https://github.com/npm/npm/pull/10020">#10020</a> Document the command to see the list of config defaults in the section on config defaults. (<a href="https://github.com/lady3bean">@lady3bean</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8770b0a"><code>8770b0a</code></a> <a href="https://github.com/npm/npm/issues/7600">#7600</a> Add shortcuts to all command documentation. (<a href="https://github.com/RichardLitt">@RichardLitt</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e9b7d0d"><code>e9b7d0d</code></a> <a href="https://github.com/npm/npm/pull/9950">#9950</a> On errors that can be caused by outdated node &amp; npm, suggest updating as a part of the error message. (<a href="https://github.com/ForbesLindesay">@ForbesLindesay</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4052"></a>
NEW STANDARD HAS ALWAYS BEEN STANDARD</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/40c1b0f"><code>40c1b0f</code></a> <a href="https://github.com/npm/npm/pull/9954">#9954</a> Update to <code>standard@5</code> and reformat the source to work with it. (<a href="https://github.com/cbas">@cbas</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4053"></a>
v3.3.9 (2015-10-15):</h2>
<p>This week sees a few small changes ready to land:</p>
<h3><a class="anchor" id="autotoc_md4054"></a>
TRAVIS NODE 0.8 BUILDS REJOICE</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/25a234b"><code>25a234b</code></a> <a href="https://github.com/npm/npm/issues/9668">#9668</a> Install <code>npm@3</code>'s bundled dependencies with <code>npm@2</code>, so that the ancient npm that ships with node 0.8 can install <code>npm@3</code> directly. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4055"></a>
SMALL ERROR MESSAGE IMPROVEMENT</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/a332f61"><code>a332f61</code></a> <a href="https://github.com/npm/npm/pull/9927">#9927</a> Update error messages where we report a list of versions that you could have installed to show this as a comma separated list instead of as JSON. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4056"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/4cd74b0"><code>4cd74b0</code></a> <code>nock@2.15.0</code> (<a href="https://github.com/pgte">@pgte</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9360976"><code>9360976</code></a> <code>tap@2.1.1</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/1ead0a4"><code>1ead0a4</code></a> <code>which@1.2.0</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/759f88a"><code>759f88a</code></a> <code>has-unicode@1.0.1</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4057"></a>
v3.3.8 (2015-10-12):</h2>
<p>This is a small update release, we're reverting <a href="https://github.com/npm/npm/commit/22a3af0"><code>22a3af0</code></a> from last week's release, as it is resulting in crashes. We'll revisit this PR during this week.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/ddde1d5"><code>ddde1d5</code></a> Revert "lifecycle: Swap out custom logic with add-to-path module" (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4058"></a>
v3.3.7 (2015-10-08):</h2>
<p>So, as Kat mentioned in last week's 2.x release, we're now swapping weeks between accepting PRs and doing dependency updates, in an effort to keep release management work from taking over our lives. This week is a PR week, so we've got a bunch of goodies for you.</p>
<p>Relatedly, this week means 3.3.6 is now <code>latest</code> and it is WAY faster than previous 3.x releases. Give it or this a look!</p>
<h3><a class="anchor" id="autotoc_md4059"></a>
OPTIONAL DEPS, MORE OPTIONAL</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/2289234"><code>2289234</code></a> <a href="https://github.com/npm/npm/issues/9643">#9643</a> <a href="https://github.com/npm/npm/issues/9664">#9664</a> <code>npm@3</code> was triggering <code>npm@2</code>'s build mechanics when it was linking bin files into the tree. This was originally intended to trigger rebuilds of bundled modules, but <code>npm@3</code>'s flat module structure confused it. This caused two seemingly unrelated issues. First, failing optional dependencies could under some circumstances (if they were built during this phase) trigger a full build failure. And second, rebuilds were being triggered of already installed modules, again, in some circumstances. Both of these are fixed by disabling the <code>npm@2</code> mechanics and adding a special rebuild phase for the initial installation of bundled modules. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4060"></a>
BAD NAME, NO CRASH</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/b78fec9"><code>b78fec9</code></a> <a href="https://github.com/npm/npm/issues/9766">#9766</a> Refactor all attempts to read the module name or package name to go via a single function, with appropriate guards unusual circumstances where they aren't where we expect them. This ultimately will ensure we don't see any more recurrences of the <code>localeCompare</code> error and related crashers. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4061"></a>
MISCELLANEOUS BUG FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/22a3af0"><code>22a3af0</code></a> <a href="https://github.com/npm/npm/pull/9553">#9553</a> Factor the lifecycle code to manage paths out into its own module and use that. (<a href="https://github.com/kentcdodds">@kentcdodds</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6a29fe3"><code>6a29fe3</code></a> <a href="https://github.com/npm/npm/pull/9677">#9677</a> Start testing our stuff in node 4 on travis (<a href="https://github.com/fscherwi">@fscherwi</a>)</li>
<li><a href="https://github.com/npm/npm/commit/508c6a4"><code>508c6a4</code></a> <a href="https://github.com/npm/npm/issues/9669">#9669</a> Make <code>recalculateMetadata</code> more resilient to unexpectedly bogus dependency specifiers. (<a href="https://github.com/tmct">@tmct</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3c44763"><code>3c44763</code></a> <a href="https://github.com/npm/npm/issues/9463">#9643</a> Update <code>install --only</code> to ignore the <code>NODE_ENV</code> var and <em>just</em> use the only value, if specified. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/87336c3"><code>87336c3</code></a> <a href="https://github.com/npm/npm/pull/9879">#9879</a> <code>npm@3</code>'s shrinkwrap was refusing to shrinkwrap if an optional dependency was missing– patch it to allow this. (<a href="https://github.com/mantoni">@mantoni</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4062"></a>
DOCUMENTATION UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/82659fd"><code>82659fd</code></a> <a href="https://github.com/npm/npm/issues/9208">#9208</a> Correct the npm style guide around quote usage (<a href="https://github.com/aaroncrows">@aaroncrows</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a69c83a"><code>a69c83a</code></a> <a href="https://github.com/npm/npm/pull/9645">#9645</a> Fix spelling error in README (<a href="https://github.com/dkoleary88">@dkoleary88</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f2cf054"><code>f2cf054</code></a> <a href="https://github.com/npm/npm/pull/9714">#9714</a> Fix typos in our documentation (<a href="https://github.com/reggi">@reggi</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7224bef"><code>7224bef</code></a> <a href="https://github.com/npm/npm/pull/9759">#9759</a> Fix typo in npm-team docs (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7e6e007"><code>7e6e007</code></a> <a href="https://github.com/npm/npm/pull/9820">#9820</a> Correct documentation as to <code>binding.gyp</code> (<a href="https://github.com/KenanY">@KenanY</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4063"></a>
v3.3.6 (2015-09-30):</h2>
<p>I have the most exciting news for you this week. YOU HAVE NO IDEA. Well, ok, maybe you do if you follow my twitter.</p>
<p>Performance just got 5 bazillion times better (under some circumstances, ymmv, etc). So– my test scenario is our very own website. In <code>npm@2</code>, on my macbook running <code>npm ls</code> takes about 5 seconds. Personally it's more than I'd like, but it's entire workable. In <code>npm@3</code> it has been taking <em>50</em> seconds, which is appalling. But after doing some work on Monday isolating the performance issues I've been able to reduce <code>npm@3</code>'s run time back down to 5 seconds.</p>
<p>Other scenarios were even worse, there was one that until now in <code>npm@3</code> that took almost 6 minutes, and has been reduced to 14 seconds.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/7bc0d4c"><code>7bc0d4c</code></a> <a href="https://github.com/npm/npm/commit/cf42217"><code>cf42217</code></a> <a href="https://github.com/npm/npm/issues/8826">#8826</a> Stop using deepclone on super big datastructures. Avoid cloning all-together even when that means mutating things, when possible. Otherwise use a custom written tree-copying function that understands the underlying datastructure well enough to only copy what we absolutely need to. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<p>In other news, look for us this Friday and Saturday at the amazing <a href="https://osfeels.com">Open Source and Feelings</a> conference, where something like a third of the company will be attending.</p>
<h3><a class="anchor" id="autotoc_md4064"></a>
And finally a dependency update</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/a6a4437"><code>a6a4437</code></a> <code>glob@5.0.15</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4065"></a>
And some subdep updates</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/cc5e6a0"><code>cc5e6a0</code></a> <code>hoek@2.16.3</code> (<a href="https://github.com/nlf">@nlf</a>)</li>
<li><a href="https://github.com/npm/npm/commit/912a516"><code>912a516</code></a> <code>boom@2.9.0</code> (<a href="https://github.com/arb">@arb</a>)</li>
<li><a href="https://github.com/npm/npm/commit/63944e9"><code>63944e9</code></a> <code>bluebird@2.10.1</code> (<a href="https://github.com/petkaantonov">@petkaantonov</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ef16003"><code>ef16003</code></a> <code>mime-types@2.1.7</code> &amp; <code>mime-db@1.19.0</code> (<a href="https://github.com/dougwilson">@dougwilson</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2b8c0dd"><code>2b8c0dd</code></a> <code>request@2.64.0</code> (<a href="https://github.com/simov">@simov</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8139124"><code>8139124</code></a> <code>brace-expansion@1.1.1</code> (<a href="https://github.com/juliangruber">@juliangruber</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4066"></a>
v3.3.5 (2015-09-24):</h2>
<p>Some of you all may not be aware, but npm is ALSO a company. I tell you this 'cause npm-the-company had an all-staff get together this week, flying in our remote folks from around the world. That was great, but it also basically eliminated normal work on Monday and Tuesday.</p>
<p>Still, we've got a couple of really important bug fixes this week. Plus a lil bit from the <a href="https://github.com/npm/npm/releases/tag/v2.14.6">now LTS 2.x branch</a>.</p>
<h3><a class="anchor" id="autotoc_md4067"></a>
ATTENTION WINDOWS USERS</h3>
<p>If you previously updated to npm 3 and you try to update again, you may get an error messaging telling you that npm won't install npm into itself. Until you are at 3.3.5 or greater, you can get around this with <code>npm install -f -g npm</code>.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/bef06f5"><code>bef06f5</code></a> <a href="https://github.com/npm/npm/pull/9741">#9741</a> Uh... so... er... it seems that since <code>npm@3.2.0</code> on Windows with a default configuration, it's been impossible to update npm. Well, that's not actually true, there's a work around (see above), but it shouldn't be complaining in the first place. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4068"></a>
STACK OVERFLOWS ON PUBLISH</h3>
<ul>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/330b496"><code>330b496</code></a> <a href="https://github.com/npm/npm/pull/9667">#9667</a> We were keeping track of metadata about your project while packing the tree in a way that resulted in this data being written to packed tar files headers. When this metadata included cycles, it resulted in the the tar file entering an infinite recursive loop and eventually crashing with a stack overflow.</p>
<p class="startli">I've patched this by keeping track of your metadata by closing over the variables in question instead, and I've further restricted gathering and tracking the metadata to times when it's actually needed. (Which is only if you need bundled modules.) (<a href="https://github.com/iarna">@iarna</a>)</p>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md4069"></a>
LESS CRASHY ERROR MESSAGES ON BAD PACKAGES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/829921f"><code>829921f</code></a> <a href="https://github.com/npm/npm/pull/9741">#9741</a> Packages with invalid names or versions were crashing the installer. These are now captured and warned as was originally intended. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4070"></a>
ONE DEPENDENCY UPDATE</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/963295c"><code>963295c</code></a> <code>npm-install-checks@2.0.1</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4071"></a>
AND ONE SUBDEPENDENCY</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/448737d"><code>448737d</code></a> <code>request@2.63.0</code> (<a href="https://github.com/simov">@simov</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4072"></a>
v3.3.4 (2015-09-17):</h2>
<p>This is a relatively quiet release, bringing a few bug fixes and some module updates, plus via the <a href="https://github.com/npm/npm/releases/tag/v2.14.5">2.14.5 release</a> some forward compatibility fixes with versions of Node that aren't yet released.</p>
<h3><a class="anchor" id="autotoc_md4073"></a>
NO BETA NOTICE THIS TIME!!</h3>
<p>But, EXCITING NEWS FRIENDS, this week marks the exit of <code>npm@3</code> from beta. This means that the week of this release, <a href="https://github.com/npm/npm/releases/tag/v3.3.3">v3.3.3</a> will become <code>latest</code> and this version (v3.3.4) will become <code>next</code>!!</p>
<h3><a class="anchor" id="autotoc_md4074"></a>
CRUFT FOR THE CRUFT GODS</h3>
<p>What I call "cruft", by which I mean, files sitting around in your <code>node_modules</code> folder, will no longer produce warnings in <code>npm ls</code> nor during <code>npm install</code>. This brings <code>npm@3</code>'s behavior in line with <code>npm@2</code>.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/a127801"><code>a127801</code></a> <a href="https://github.com/npm/npm/pull/9586">#9285</a> Stop warning about cruft in module directories. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4075"></a>
BETTER ERROR MESSAGE</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/95ee92c"><code>95ee92c</code></a> <a href="https://github.com/npm/npm/issues/9433">#9433</a> Give better error messages for invalid URLs in the dependency list. (<a href="https://github.com/jamietre">@jamietre</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4076"></a>
MODULE UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/ebb92ca"><code>ebb92ca</code></a> <code>retry@0.8.0</code> (<a href="https://github.com/tim-kos">@tim-kos</a>)</li>
<li><a href="https://github.com/npm/npm/commit/55f1285"><code>55f1285</code></a> <code>normalize-package-data@2.3.4</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6d4ebff"><code>6d4ebff</code></a> <code>sha@2.0.1</code> (<a href="https://github.com/ForbesLindesay">@ForbesLindesay</a>)</li>
<li><a href="https://github.com/npm/npm/commit/09a9c7a"><code>09a9c7a</code></a> <code>semver@5.0.3</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/745000f"><code>745000f</code></a> <code>node-gyp@3.0.3</code> (<a href="https://github.com/rvagg">@rvagg</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4077"></a>
SUB DEP MODULE UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/578ca25"><code>578ca25</code></a> <code>request@2.62.0</code> (<a href="https://github.com/simov">@simov</a>)</li>
<li><a href="https://github.com/npm/npm/commit/1d8996e"><code>1d8996e</code></a> <code>jju@1.2.1</code> (<a href="https://github.com/rlidwka">@rlidwka</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6da1ba4"><code>6da1ba4</code></a> <code>hoek@2.16.2</code> (<a href="https://github.com/nlf">@nlf</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4078"></a>
v3.3.3 (2015-09-10):</h2>
<p>This short week brought us brings us a few small bug fixes, a doc change and a whole lotta dependency updates.</p>
<p>Plus, as usual, this includes a forward port of everything in <a href="https://github.com/npm/npm/releases/tag/v2.14.4"><code>npm@2.14.4</code></a>.</p>
<h3><a class="anchor" id="autotoc_md4079"></a>
BETA BUT NOT FOREVER</h3>
<p>**_THIS IS BETA SOFTWARE_**. <code>npm@3</code> will remain in beta until we're confident that it's stable and have assessed the effect of the breaking changes on the community. During that time we will still be doing <code>npm@2</code> releases, with <code>npm@2</code> tagged as <code>latest</code> and <code>next</code>. We'll <em>also</em> be publishing new releases of <code>npm@3</code> as <code>npm@v3.x-next</code> and <code>npm@v3.x-latest</code> alongside those versions until we're ready to switch everyone over to <code>npm@3</code>. We need your help to find and fix its remaining bugs. It's a significant rewrite, so we are <em>sure</em> there still significant bugs remaining. So do us a solid and deploy it in non-critical CI environments and for day-to-day use, but maybe don't use it for production maintenance or frontline continuous deployment just yet.</p>
<h3><a class="anchor" id="autotoc_md4080"></a>
REMOVE INSTALLED BINARIES ON WINDOWS</h3>
<p>So waaaay back at the start of August, I fixed a bug with <a href="https://github.com/npm/npm/pull/9198">#9198</a>. That fix made it so that if you had two modules installed that both installed the same binary (eg <code>gulp</code> &amp; <code>gulp-cli</code>), that removing one wouldn't remove the binary if it was owned by the other.</p>
<p>It did this by doing some hocus-pocus that, turns out, was Unix-specific, so on Windows it just threw up its hands and stopped removing installed binaries at all. Not great.</p>
<p>So today we're fixing that– it let us maintain the same safety that we added in #9198, but ALSO works with Windows.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/25fbaed"><code>25fbaed</code></a> <a href="https://github.com/npm/npm/issues/9394">#9394</a> Treat cmd-shims the same way we treat symlinks (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4081"></a>
API DOCUMENTATION HAS BEEN SACRIFICED THE API GOD</h3>
<p>The documentation of the internal APIs of npm is going away, because it would lead people into thinking they should integrate with npm by using it. Please don't do that! In the future, we'd like to give you a suite of stand alone modules that provide better, more stand alone APIs for your applications to build on. But for now, call the npm binary with <code>process.exec</code> or <code>process.spawn</code> instead.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/2fb60bf"><code>2fb60bf</code></a> Remove misleading API documentation (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4082"></a>
ALLOW &lt;tt&gt;npm link&lt;/tt&gt; ON WINDOWS W/ PRERELEASE VERSIONS OF NODE</h3>
<p>We never meant to have this be a restriction in the first place and it was only just discovered with the recent node 4.0.0 release candidate.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/6665e54"><code>6665e54</code></a> <a href="https://github.com/npm/npm/pull/9505">#9505</a> Allow npm link to run on Windows with prerelease versions of node (<a href="https://github.com/jon-hall">@jon-hall</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4083"></a>
graceful-fs update</h3>
<p>We're updating all of npm's deps to use the most recent <code>graceful-fs</code>. This turns out to be important for future not yet released versions of node, because older versions monkey-patch <code>fs</code> in ways that will break in the future. Plus it ALSO makes use of <code>process.binding</code> which is an internal API that npm definitely shouldn't have been using. We're not done yet, but this is the bulk of them.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/e7bc98e"><code>e7bc98e</code></a> <code>write-file-atomic@1.1.3</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7417600"><code>7417600</code></a> <code>tar@2.2.1</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e4e9d40"><code>e4e9d40</code></a> <code>read-package-json@2.0.1</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/481611d"><code>481611d</code></a> <code>read-installed@4.0.3</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0dabbda"><code>0dabbda</code></a> <code>npm-registry-client@7.0.4</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c075a91"><code>c075a91</code></a> <code>fstream@1.0.8</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2e4341a"><code>2e4341a</code></a> <code>fs-write-stream-atomic@1.0.4</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/18ad16e"><code>18ad16e</code></a> <code>fs-vacuum@1.2.7</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4084"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/9d6666b"><code>9d6666b</code></a> <code>node-gyp@3.0.1</code> (<a href="https://github.com/rvagg">@rvagg</a>)</li>
<li><a href="https://github.com/npm/npm/commit/349c4df"><code>349c4df</code></a> <code>retry@0.7.0</code> (<a href="https://github.com/tim-kos">@tim-kos</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f507551"><code>f507551</code></a> <code>which@1.1.2</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e5b6743"><code>e5b6743</code></a> <code>nopt@3.0.4</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4085"></a>
THE DEPENDENCIES OF OUR DEPENDENCIES ARE OUR DEPENDENCIES UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/316382d"><code>316382d</code></a> <code>mime-types@2.1.6</code> &amp; <code>mime-db@1.18.0</code></li>
<li><a href="https://github.com/npm/npm/commit/64b741e"><code>64b741e</code></a> <code>spdx-correct@1.0.1</code></li>
<li><a href="https://github.com/npm/npm/commit/fff62ac"><code>fff62ac</code></a> <code>process-nextick-args@1.0.3</code></li>
<li><a href="https://github.com/npm/npm/commit/9d6488c"><code>9d6488c</code></a> <code>cryptiles@2.0.5</code></li>
<li><a href="https://github.com/npm/npm/commit/1912012"><code>1912012</code></a> <code>bluebird@2.10.0</code></li>
<li><a href="https://github.com/npm/npm/commit/4d09402"><code>4d09402</code></a> <code>readdir-scoped-modules@1.0.2</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md4086"></a>
v3.3.2 (2015-09-04):</h2>
<h3><a class="anchor" id="autotoc_md4087"></a>
PLEASE HOLD FOR THE NEXT AVAILABLE MAINTAINER</h3>
<p>This is a tiny little maintenance release, both to update dependencies and to keep <code>npm@3</code> up to date with changes made to <code>npm@2</code>. <a href="https://github.com/othiym23">@othiym23</a> is putting out this release (again) as his esteemed colleague <a href="https://github.com/iarna">@iarna</a> finishes relocating herself, her family, and her sizable anime collection all the way across North America. It contains <a href="https://github.com/npm/npm/releases/tag/v2.14.3">all the goodies in <code>npm@2.14.3</code></a> and one other dependency update.</p>
<h3><a class="anchor" id="autotoc_md4088"></a>
BETA WARNINGS FOR FUN AND PROFIT</h3>
<p>**_THIS IS BETA SOFTWARE_**. <code>npm@3</code> will remain in beta until we're confident that it's stable and have assessed the effect of the breaking changes on the community. During that time we will still be doing <code>npm@2</code> releases, with <code>npm@2</code> tagged as <code>latest</code> and <code>next</code>. We'll <em>also</em> be publishing new releases of <code>npm@3</code> as <code>npm@v3.x-next</code> and <code>npm@v3.x-latest</code> alongside those versions until we're ready to switch everyone over to <code>npm@3</code>. We need your help to find and fix its remaining bugs. It's a significant rewrite, so we are <em>sure</em> there still significant bugs remaining. So do us a solid and deploy it in non-critical CI environments and for day-to-day use, but maybe don't use it for production maintenance or frontline continuous deployment just yet.</p>
<p>That said, it's getting there! It will be leaving beta very soon!</p>
<h3><a class="anchor" id="autotoc_md4089"></a>
ONE OTHER DEPENDENCY UPDATE</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/bb5de3493531228df0bd3f0742d5493c826be6dd"><code>bb5de34</code></a> <code>is-my-json-valid@2.12.2</code>: Upgrade to a new, modernized version of <code>json-pointer</code>. (<a href="https://github.com/mafintosh">@mafintosh</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4090"></a>
v3.3.1 (2015-08-27):</h2>
<p>Hi all, this <code>npm@3</code> update brings you another round of bug fixes. The headliner here is that <code>npm update</code> works again. We're running down the clock on blocker 3.x issues! Shortly after that hits zero we'll be promoting 3.x to latest!!</p>
<p>And of course, we have changes that were brought forward from 2.x. Check out the release notes for <a href="https://github.com/npm/npm/releases/tag/v2.14.1">2.14.1</a> and <a href="https://github.com/npm/npm/releases/tag/v2.14.2">2.14.2</a>.</p>
<h3><a class="anchor" id="autotoc_md4091"></a>
BETA WARNINGS FOR FUN AND PROFIT</h3>
<p>**_THIS IS BETA SOFTWARE_**. <code>npm@3</code> will remain in beta until we're confident that it's stable and have assessed the effect of the breaking changes on the community. During that time we will still be doing <code>npm@2</code> releases, with <code>npm@2</code> tagged as <code>latest</code> and <code>next</code>. We'll <em>also</em> be publishing new releases of <code>npm@3</code> as <code>npm@v3.x-next</code> and <code>npm@v3.x-latest</code> alongside those versions until we're ready to switch everyone over to <code>npm@3</code>. We need your help to find and fix its remaining bugs. It's a significant rewrite, so we are <em>sure</em> there still significant bugs remaining. So do us a solid and deploy it in non-critical CI environments and for day-to-day use, but maybe don't use it for production maintenance or frontline continuous deployment just yet.</p>
<h3><a class="anchor" id="autotoc_md4092"></a>
NPM UPDATE, NOW AGAIN YOUR FRIEND</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/f130a00"><code>f130a00</code></a> <a href="https://github.com/npm/npm/issues/9095">#9095</a> <code>npm update</code> once again works! Previously, after selecting packages to update, it would then pick the wrong location to run the install from. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4093"></a>
MORE VERBOSING FOR YOUR VERBOSE LIFECYCLES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/d088b7d"><code>d088b7d</code></a> <a href="https://github.com/npm/npm/pull/9227">#9227</a> Add some additional logging at the verbose and silly levels when running lifecycle scripts. Hopefully this will make debugging issues with them a bit easier! (<a href="https://github.com/saper">@saper</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4094"></a>
AND SOME OTHER BUG FIXES…</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/f4a5784"><code>f4a5784</code></a> <a href="https://github.com/npm/npm/issues/9308">#9308</a> Make fetching metadata for local modules faster! This ALSO means that doing things like running <code>npm repo</code> won't build your module and maybe run <code>prepublish</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4468c92"><code>4468c92</code></a> <a href="https://github.com/npm/npm/issues/9205">#9205</a> Fix a bug where local modules would sometimes not resolve relative links using the correct base path. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d395a6b"><code>d395a6b</code></a> <a href="https://github.com/npm/npm/issues/8995">#8995</a> Certain combinations of packages could result in different install orders for their initial installation than for reinstalls run on the same folder. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d119ea6"><code>d119ea6</code></a> <a href="https://github.com/npm/npm/issues/9113">#9113</a> Make extraneous packages <em>always</em> up in <code>npm ls</code>. Previously, if an extraneous package had a dependency that depended back on the original package this would result in the package not showing up in <code>ls</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/02420dc"><code>02420dc</code></a> <a href="https://github.com/npm/npm/issues/9113">#9113</a> Stop warning about missing top level package.json files. Errors in said files will still be reported. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4095"></a>
SOME DEP UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/1ed1364"><code>1ed1364</code></a> <code>rimraf@2.4.3</code> (<a href="https://github.com/isaacs">@isaacs</a>) Added EPERM to delay/retry loop</li>
<li><a href="https://github.com/npm/npm/commit/e7b8315"><code>e7b8315</code></a> <code>read@1.0.7</code> Smaller distribution package, better metadata (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4096"></a>
SOME DEPS OF DEPS UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/b273bcc"><code>b273bcc</code></a> <code>mime-types@2.1.5</code></li>
<li><a href="https://github.com/npm/npm/commit/df6e225"><code>df6e225</code></a> <code>mime-db@1.17.0</code></li>
<li><a href="https://github.com/npm/npm/commit/785f2ad"><code>785f2ad</code></a> <code>is-my-json-valid@2.12.1</code></li>
<li><a href="https://github.com/npm/npm/commit/88170dd"><code>88170dd</code></a> <code>form-data@1.0.0-rc3</code></li>
<li><a href="https://github.com/npm/npm/commit/af5357b"><code>af5357b</code></a> <code>request@2.61.0</code></li>
<li><a href="https://github.com/npm/npm/commit/337f96a"><code>337f96a</code></a> <code>chalk@1.1.1</code></li>
<li><a href="https://github.com/npm/npm/commit/3dfd74d"><code>3dfd74d</code></a> <code>async@1.4.2</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md4097"></a>
v3.3.0 (2015-08-13):</h2>
<p>This is a pretty EXCITING week. But I may be a little excitable– or possibly sleep deprived, it's sometimes hard to tell them apart. =D So <a href="https://github.com/zkat">Kat</a> really went the extra mile this week and got the client side support for teams and orgs out in this week's 2.x release. You can't use that just yet, 'cause we have to turn on some server side stuff too, but this way it'll be there for you all the moment we do! Check out the details over in the <a href="https://github.com/npm/npm/releases/tag/v2.14.0">2.14.0 release notes</a>!</p>
<p>But we over here in 3.x ALSO got a new feature this week, check out the new <code>--only</code> and <code>--also</code> flags for better control over when dev and production dependencies are used by various npm commands.</p>
<p>That, and some important bug fixes round out this week. Enjoy everyone!</p>
<h3><a class="anchor" id="autotoc_md4098"></a>
NEVER SHALL NOT BETA THE BETA</h3>
<p>**_THIS IS BETA SOFTWARE_**. EXCITING NEW BETA WARNING!!! Ok, I fibbed, EXACTLY THE SAME BETA WARNINGS: <code>npm@3</code> will remain in beta until we're confident that it's stable and have assessed the effect of the breaking changes on the community. During that time we will still be doing <code>npm@2</code> releases, with <code>npm@2</code> tagged as <code>latest</code> and <code>next</code>. We'll <em>also</em> be publishing new releases of <code>npm@3</code> as <code>npm@v3.x-next</code> and <code>npm@v3.x-latest</code> alongside those versions until we're ready to switch everyone over to <code>npm@3</code>. We need your help to find and fix its remaining bugs. It's a significant rewrite, so we are <em>sure</em> there still significant bugs remaining. So do us a solid and deploy it in non-critical CI environments and for day-to-day use, but maybe don't use it for production maintenance or frontline continuous deployment just yet.</p>
<h3><a class="anchor" id="autotoc_md4099"></a>
ONLY ALSO DEV</h3>
<p>Hey we've got a SUPER cool new feature for you all, thanks to the fantastic work of <a href="https://github.com/davglass">@davglass</a> and <a href="https://github.com/bengl">@bengl</a> we have <code>--only=prod</code>, <code>--only=dev</code>, <code>--also=prod</code> and <code>--also=dev</code> options. These apply in various ways to: <code>npm install</code>, <code>npm ls</code>, <code>npm outdated</code> and <code>npm update</code>.</p>
<p>So for instance:</p>
<div class="fragment"><div class="line">npm install --only=dev</div>
</div><!-- fragment --><p>Only installs dev dependencies. By contrast:</p>
<div class="fragment"><div class="line">npm install --only=prod</div>
</div><!-- fragment --><p>Will only install prod dependencies and is very similar to <code>--production</code> but differs in that it doesn't set the environment variables that <code>--production</code> does.</p>
<p>The related new flag, <code>--also</code> is most useful with things like:</p>
<div class="fragment"><div class="line">npm shrinkwrap --also=dev</div>
</div><!-- fragment --><p>As shrinkwraps don't include dev deps by default. This replaces passing in <code>--dev</code> in that scenario.</p>
<p>And that leads into the fact that this deprecates <code>--dev</code> as its semantics across commands were inconsistent and confusing.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/3ab1eea"><code>3ab1eea</code></a> <a href="https://github.com/npm/npm/pull/9024">#9024</a> Add support for <code>--only</code>, <code>--also</code> and deprecate <code>--dev</code> (<a href="https://github.com/bengl">@bengl</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4100"></a>
DON'T TOUCH! THAT'S NOT YOUR BIN</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/b31812e"><code>b31812e</code></a> <a href="https://github.com/npm/npm/pull/8996">#8996</a> When removing a module that has bin files, if one that we're going to remove is a symlink to a DIFFERENT module, leave it alone. This only happens when you have two modules that try to provide the same bin. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4101"></a>
THERE'S AN END IN SIGHT</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/d2178a9"><code>d2178a9</code></a> <a href="https://github.com/npm/npm/pull/9223">#9223</a> Close a bunch of infinite loops that could show up with symlink cycles in your dependencies. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4102"></a>
OOPS DIDN'T MEAN TO FIX THAT</h3>
<p>Well, not <em>just</em> yet. This was scheduled for next week, but it snuck into 2.x this week.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/139dd92"><code>139dd92</code></a> <a href="https://github.com/npm/npm/pull/8716">#8716</a> <code>npm init</code> will now only pick up the modules you install, not everything else that got flattened with them. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4103"></a>
v3.2.2 (2015-08-08):</h2>
<p>Lot's of lovely bug fixes for <code>npm@3</code>. I'm also suuuuper excited that I think we have a handle on stack explosions that effect a small portion of our users. We also have some tantalizing clues as to where some low hanging fruit may be for performance issues.</p>
<p>And of course, in addition to the <code>npm@3</code> specific bug fixes, there are some great one's coming in from <code>npm@2</code>! <a href="https://github.com/othiym23">@othiym23</a> put together that release this week– check out its <a href="https://github.com/npm/npm/releases/tag/v2.13.4">release notes</a> for the deets.</p>
<h3><a class="anchor" id="autotoc_md4104"></a>
AS ALWAYS STILL BETA</h3>
<p>**_THIS IS BETA SOFTWARE_**. Just like the airline safety announcements, we're not taking this plane off till we finish telling you: <code>npm@3</code> will remain in beta until we're confident that it's stable and have assessed the effect of the breaking changes on the community. During that time we will still be doing <code>npm@2</code> releases, with <code>npm@2</code> tagged as <code>latest</code> and <code>next</code>. We'll <em>also</em> be publishing new releases of <code>npm@3</code> as <code>npm@v3.x-next</code> and <code>npm@v3.x-latest</code> alongside those versions until we're ready to switch everyone over to <code>npm@3</code>. We need your help to find and fix its remaining bugs. It's a significant rewrite, so we are <em>sure</em> there still significant bugs remaining. So do us a solid and deploy it in non-critical CI environments and for day-to-day use, but maybe don't use it for production maintenance or frontline continuous deployment just yet.</p>
<h3><a class="anchor" id="autotoc_md4105"></a>
BUG FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/a8c8a13"><code>a8c8a13</code></a> <a href="https://github.com/npm/npm/issues/9050">#9050</a> Resolve peer deps relative to the parent of the requirer (<a href="http://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/05f0226"><code>05f0226</code></a> <a href="https://github.com/npm/npm/issues/9077">#9077</a> Fix crash when saving <code>git+ssh</code> urls (<a href="http://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e4a3808"><code>e4a3808</code></a> <a href="https://github.com/npm/npm/issues/8951">#8951</a> Extend our patch to allow <code>*</code> to match something when a package only has prerelease versions to everything and not just the cache. (<a href="http://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d135abf"><code>d135abf</code></a> <a href="https://github.com/npm/npm/issues/8871">#8871</a> Don't warn about a missing <code>package.json</code> or missing fields in the global install directory. (<a href="http://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4106"></a>
DEP VERSION BUMPS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/990ee4f"><code>990ee4f</code></a> <code>path-is-inside@1.0.1</code> (<a href="https://github.com/domenic">@domenic</a>)</li>
<li><a href="https://github.com/npm/npm/commit/1f71ec0"><code>1f71ec0</code></a> <code>lodash.clonedeep@3.0.2</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a091354"><code>a091354</code></a> <code>marked@0.3.5</code> (<a href="https://github.com/chjj">@chjj</a>)</li>
<li><a href="https://github.com/npm/npm/commit/fc51f28"><code>fc51f28</code></a> <code>tap@1.3.2</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3569ec0"><code>3569ec0</code></a> <code>nock@2.10.0</code> (<a href="https://github.com/pgte">@pgte</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ad5f6fd"><code>ad5f6fd</code></a> <code>npm-registry-mock@1.0.1</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4107"></a>
v3.2.1 (2015-07-31):</h2>
<h3><a class="anchor" id="autotoc_md4108"></a>
AN EXTRA QUIET RELEASE</h3>
<p>A bunch of stuff got deferred for various reasons, which just means more branches to land next week!</p>
<p>Don't forget to check out <a href="https://github.com/npm/npm/releases/tag/v2.13.4">Kat's 2.x release</a> for other quiet goodies.</p>
<h3><a class="anchor" id="autotoc_md4109"></a>
AS ALWAYS STILL BETA</h3>
<p>**_THIS IS BETA SOFTWARE_**. Yes, we're still reminding you of this. No, you can't be excused. <code>npm@3</code> will remain in beta until we're confident that it's stable and have assessed the effect of the breaking changes on the community. During that time we will still be doing <code>npm@2</code> releases, with <code>npm@2</code> tagged as <code>latest</code> and <code>next</code>. We'll <em>also</em> be publishing new releases of <code>npm@3</code> as <code>npm@v3.x-next</code> and <code>npm@v3.x-latest</code> alongside those versions until we're ready to switch everyone over to <code>npm@3</code>. We need your help to find and fix its remaining bugs. It's a significant rewrite, so we are <em>sure</em> there still significant bugs remaining. So do us a solid and deploy it in non-critical CI environments and for day-to-day use, but maybe don't use it for production maintenance or frontline continuous deployment just yet.</p>
<h3><a class="anchor" id="autotoc_md4110"></a>
MAKING OUR TESTS TEST THE THING THEY TEST</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/6e53c3d"><code>6e53c3d</code></a> <a href="https://github.com/npm/npm/pull/8985">#8985</a> Many thanks to @bengl for noticing that one of our tests wasn't testing what it claimed it was testing! (<a href="https://github.com/bengl">@bengl</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4111"></a>
MY PACKAGE.JSON WAS ALREADY IN THE RIGHT ORDER</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/d00d0f"><code>eb2c7aa</code></a> <a href="https://github.com/npm/npm/pull/9079">#9068</a> Stop sorting keys in the <code>package.json</code> that we haven't edited. Many thanks to <a href="https://github.com/Qix-">@Qix-</a> for bringing this up and providing a first pass at a patch for this. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4112"></a>
DEV DEP UPDATE</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/555f60c"><code>555f60c</code></a> <code>marked@0.3.4</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md4113"></a>
v3.2.0 (2015-07-24):</h2>
<h3><a class="anchor" id="autotoc_md4114"></a>
MORE CONFIG, BETTER WINDOWS AND A BUG FIX</h3>
<p>This is a smallish release with a new config option and some bug fixes. And lots of module updates.</p>
<h3><a class="anchor" id="autotoc_md4115"></a>
BETA BETAS ON</h3>
<p>**_THIS IS BETA SOFTWARE_**. Yes, we're still reminding you of this. No, you can't be excused. <code>npm@3</code> will remain in beta until we're confident that it's stable and have assessed the effect of the breaking changes on the community. During that time we will still be doing <code>npm@2</code> releases, with <code>npm@2</code> tagged as <code>latest</code> and <code>next</code>. We'll <em>also</em> be publishing new releases of <code>npm@3</code> as <code>npm@v3.x-next</code> and <code>npm@v3.x-latest</code> alongside those versions until we're ready to switch everyone over to <code>npm@3</code>. We need your help to find and fix its remaining bugs. It's a significant rewrite, so we are <em>sure</em> there still significant bugs remaining. So do us a solid and deploy it in non-critical CI environments and for day-to-day use, but maybe don't use it for production maintenance or frontline continuous deployment just yet.</p>
<h3><a class="anchor" id="autotoc_md4116"></a>
NEW CONFIGS, LESS PROGRESS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/423d8f7"><code>423d8f7</code></a> <a href="https://github.com/npm/npm/issues/8704">#8704</a> Add the ability to disable the new progress bar with <code>--no-progress</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4117"></a>
AND BUG FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/b3ee452"><code>b3ee452</code></a> <a href="https://github.com/npm/npm/pull/9038">#9038</a> We previously disabled the use of the new <code>fs.access</code> API on Windows, but the bug we were seeing is fixed in <code>io.js@1.5.0</code> so we now use <code>fs.access</code> if you're using that version or greater. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b181fa3"><code>b181fa3</code></a> <a href="https://github.com/npm/npm/issues/8921">#8921</a> <a href="https://github.com/npm/npm/issues/8637">#8637</a> Rejigger how we validate modules for install. This allow is to fix a problem where arch/os checking wasn't being done at all. It also made it easy to add back in a check that declines to install a module in itself unless you force it. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4118"></a>
AND A WHOLE BUNCH OF SUBDEP VERSIONS</h3>
<p>These are all development dependencies and semver-compatible subdep upgrades, so they should not have visible impact on users.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/6b3f6d9"><code>6b3f6d9</code></a> <code>standard@4.3.3</code></li>
<li><a href="https://github.com/npm/npm/commit/f4e22e5"><code>f4e22e5</code></a> <code>readable-stream@2.0.2</code> (inside concat-stream)</li>
<li><a href="https://github.com/npm/npm/commit/f130bfc"><code>f130bfc</code></a> <code>minimatch@2.0.10</code> (inside node-gyp's copy of glob)</li>
<li><a href="https://github.com/npm/npm/commit/36c6a0d"><code>36c6a0d</code></a> <code>caseless@0.11.0</code></li>
<li><a href="https://github.com/npm/npm/commit/80df59c"><code>80df59c</code></a> <code>chalk@1.1.0</code></li>
<li><a href="https://github.com/npm/npm/commit/ea935d9"><code>ea935d9</code></a> <code>bluebird@2.9.34</code></li>
<li><a href="https://github.com/npm/npm/commit/3588a0c"><code>3588a0c</code></a> <code>extend@3.0.0</code></li>
<li><a href="https://github.com/npm/npm/commit/c6a8450"><code>c6a8450</code></a> <code>form-data@1.0.0-rc2</code></li>
<li><a href="https://github.com/npm/npm/commit/a04925b"><code>a04925b</code></a> <code>har-validator@1.8.0</code></li>
<li><a href="https://github.com/npm/npm/commit/ee7c095"><code>ee7c095</code></a> <code>has-ansi@2.0.0</code></li>
<li><a href="https://github.com/npm/npm/commit/944fc34"><code>944fc34</code></a> <code>hawk@3.1.0</code></li>
<li><a href="https://github.com/npm/npm/commit/783dc7b"><code>783dc7b</code></a> <code>lodash._basecallback@3.3.1</code></li>
<li><a href="https://github.com/npm/npm/commit/acef0fe"><code>acef0fe</code></a> <code>lodash._baseclone@3.3.0</code></li>
<li><a href="https://github.com/npm/npm/commit/dfe959a"><code>dfe959a</code></a> <code>lodash._basedifference@3.0.3</code></li>
<li><a href="https://github.com/npm/npm/commit/a03bc76"><code>a03bc76</code></a> <code>lodash._baseflatten@3.1.4</code></li>
<li><a href="https://github.com/npm/npm/commit/8a07d50"><code>8a07d50</code></a> <code>lodash._basetostring@3.0.1</code></li>
<li><a href="https://github.com/npm/npm/commit/7785e3f"><code>7785e3f</code></a> <code>lodash._baseuniq@3.0.3</code></li>
<li><a href="https://github.com/npm/npm/commit/826fb35"><code>826fb35</code></a> <code>lodash._createcache@3.1.2</code></li>
<li><a href="https://github.com/npm/npm/commit/76030b3"><code>76030b3</code></a> <code>lodash._createpadding@3.6.1</code></li>
<li><a href="https://github.com/npm/npm/commit/1a49ec6"><code>1a49ec6</code></a> <code>lodash._getnative@3.9.1</code></li>
<li><a href="https://github.com/npm/npm/commit/eebe47f"><code>eebe47f</code></a> <code>lodash.isarguments@3.0.4</code></li>
<li><a href="https://github.com/npm/npm/commit/09994d4"><code>09994d4</code></a> <code>lodash.isarray@3.0.4</code></li>
<li><a href="https://github.com/npm/npm/commit/b6f8dbf"><code>b6f8dbf</code></a> <code>lodash.keys@3.1.2</code></li>
<li><a href="https://github.com/npm/npm/commit/c67dd6b"><code>c67dd6b</code></a> <code>lodash.pad@3.1.1</code></li>
<li><a href="https://github.com/npm/npm/commit/4add042"><code>4add042</code></a> <code>lodash.repeat@3.0.1</code></li>
<li><a href="https://github.com/npm/npm/commit/e04993c"><code>e04993c</code></a> <code>lru-cache@2.6.5</code></li>
<li><a href="https://github.com/npm/npm/commit/2ed7da4"><code>2ed7da4</code></a> <code>mime-db@1.15.0</code></li>
<li><a href="https://github.com/npm/npm/commit/ae08244"><code>ae08244</code></a> <code>mime-types@2.1.3</code></li>
<li><a href="https://github.com/npm/npm/commit/e71410e"><code>e71410e</code></a> <code>os-homedir@1.0.1</code></li>
<li><a href="https://github.com/npm/npm/commit/67c13e0"><code>67c13e0</code></a> <code>process-nextick-args@1.0.2</code></li>
<li><a href="https://github.com/npm/npm/commit/12ee041"><code>12ee041</code></a> <code>qs@4.0.0</code></li>
<li><a href="https://github.com/npm/npm/commit/15564a6"><code>15564a6</code></a> <code>spdx-license-ids@1.0.2</code></li>
<li><a href="https://github.com/npm/npm/commit/8733bff"><code>8733bff</code></a> <code>supports-color@2.0.0</code></li>
<li><a href="https://github.com/npm/npm/commit/230943c"><code>230943c</code></a> <code>tunnel-agent@0.4.1</code></li>
<li><a href="https://github.com/npm/npm/commit/26a4653"><code>26a4653</code></a> <code>ansi-styles@2.1.0</code></li>
<li><a href="https://github.com/npm/npm/commit/3d27081"><code>3d27081</code></a> <code>bl@1.0.0</code></li>
<li><a href="https://github.com/npm/npm/commit/9efa110"><code>9efa110</code></a> <code>async@1.4.0</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md4119"></a>
MERGED FORWARD</h3>
<ul>
<li>As usual, we've ported all the <code>npm@2</code> goodies in this week's <a href="https://github.com/npm/npm/releases/tag/v2.13.3">v2.13.3</a> release.</li>
</ul>
<h2><a class="anchor" id="autotoc_md4120"></a>
v3.1.3 (2015-07-17):</h2>
<p>Rebecca: So Kat, I hear this week's other release uses a dialog between us to explain what changed?</p>
<p>Kat: Well, you could say that…</p>
<p>Rebecca: I would! This week I fixed more <code>npm@3</code> bugs!</p>
<p>Kat: That sounds familiar.</p>
<p>Rebecca: Eheheheh, well, before we look at those, a word from our sponsor…</p>
<h3><a class="anchor" id="autotoc_md4121"></a>
BETA IS AS BETA DOES</h3>
<p>**_THIS IS BETA SOFTWARE_**. Yes, we're still reminding you of this. No, you can't be excused. <code>npm@3</code> will remain in beta until we're confident that it's stable and have assessed the effect of the breaking changes on the community. During that time we will still be doing <code>npm@2</code> releases, with <code>npm@2</code> tagged as <code>latest</code> and <code>next</code>. We'll <em>also</em> be publishing new releases of <code>npm@3</code> as <code>npm@v3.x-next</code> and <code>npm@v3.x-latest</code> alongside those versions until we're ready to switch everyone over to <code>npm@3</code>. We need your help to find and fix its remaining bugs. It's a significant rewrite, so we are <em>sure</em> there still significant bugs remaining. So do us a solid and deploy it in non-critical CI environments and for day-to-day use, but maybe don't use it for production maintenance or frontline continuous deployment just yet.</p>
<p>Rebecca: Ok, enough of the dialoguing, that's Kat's schtick. But do remember kids, betas hide in dark hallways waiting to break your stuff, stuff like…</p>
<h3><a class="anchor" id="autotoc_md4122"></a>
SO MANY LINKS YOU COULD MAKE A CHAIN</h3>
<ul>
<li><a href="https://github.com/npm/npm/6d69ec9"><code>6d69ec9</code></a> <a href="https://github.com/npm/npm/issues/8967">#8967</a> Removing a module linked into your globals would result in having all of its subdeps removed. Since the npm release process does exactly this, it burned me -every- -single- -week-. =D While we're here, we also removed extraneous warns that used to spill out when you'd remove a symlink. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/fdb360f"><code>fdb360f</code></a> <a href="https://github.com/npm/npm/issues/8874">#8874</a> Linking scoped modules was failing outright, but this fixes that and updates our tests so we don't do it again. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4123"></a>
WE'LL TRY NOT TO CRACK YOUR WINDOWS</h3>
<ul>
<li><a href="https://github.com/npm/npm/9fafb18"><code>9fafb18</code></a> <a href="https://github.com/npm/npm/issues/8701">#8701</a> <code>npm@3</code> introduced permissions checks that run before it actually tries to do something. This saves you from having an install fail half way through. We did this using the shiny new <code>fs.access</code> function available in <code>node 0.12</code> and <code>io.js</code>, with fallback options for older nodes. Unfortunately the way we implemented the fallback caused racey problems for Windows systems. This fixes that by ensuring we only ever run any one check on a directory once. BUT it turns out there are bugs in <code>fs.access</code> on Windows. So this ALSO just disables the use of <code>fs.access</code> on Windows entirely until that settles out. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4124"></a>
ZOOM ZOOM, DEP UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/5656baa"><code>5656baa</code></a> <code>gauge@1.2.2</code>: Better handle terminal resizes while printing the progress bar (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4125"></a>
MERGED FORWARD</h3>
<ul>
<li>Check out Kat's <a href="https://github.com/npm/npm/releases/tag/v2.13.2">super-fresh release notes for v2.13.2</a> and see all the changes we ported from <code>npm@2</code>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md4126"></a>
v3.1.2</h2>
<h3><a class="anchor" id="autotoc_md4127"></a>
SO VERY BETA RELEASE</h3>
<p>So, <code>v3.1.1</code> managed to actually break installing local modules. And then immediately after I drove to an island for the weekend. 😁 So let's get this fixed outside the usual release train!</p>
<p>Fortunately it didn't break installing <em>global</em> modules and so you could swap it out for another version at least.</p>
<h3><a class="anchor" id="autotoc_md4128"></a>
DISCLAIMER MEANS WHAT IT SAYS</h3>
<p>**_THIS IS BETA SOFTWARE_**. Yes, we're still reminding you of this. No, you can't be excused. <code>npm@3</code> will remain in beta until we're confident that it's stable and have assessed the effect of the breaking changes on the community. During that time we will still be doing <code>npm@2</code> releases, with <code>npm@2</code> tagged as <code>latest</code> and <code>next</code>. We'll <em>also</em> be publishing new releases of <code>npm@3</code> as <code>npm@v3.x-next</code> and <code>npm@v3.x-latest</code> alongside those versions until we're ready to switch everyone over to <code>npm@3</code>. We need your help to find and fix its remaining bugs. It's a significant rewrite, so we are <em>sure</em> there still significant bugs remaining. So do us a solid and deploy it in non-critical CI environments and for day-to-day use, but maybe don't use it for production maintenance or frontline continuous deployment just yet.</p>
<h3><a class="anchor" id="autotoc_md4129"></a>
THIS IS IT, THE REASON</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/f5e19df"><code>f5e19df</code></a> <a href="https://github.com/npm/npm/issues/8893">#8893</a> Fix crash when installing local modules introduced by the fix for <a href="https://github.com/npm/npm/issues/8608">#8608</a> (<a href="https://github.com/iarna">@iarna</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md4130"></a>
v3.1.1</h2>
<h3><a class="anchor" id="autotoc_md4131"></a>
RED EYE RELEASE</h3>
<p>Rebecca's up too late writing tests, so you can have <code>npm@3</code> bug fixes! Lots of great new issues from you all! ❤️️ Keep it up!</p>
<h3><a class="anchor" id="autotoc_md4132"></a>
YUP STILL BETA, PLEASE PAY ATTENTION</h3>
<p>**_THIS IS BETA SOFTWARE_**. Yes, we're still reminding you of this. No, you can't be excused. <code>npm@3</code> will remain in beta until we're confident that it's stable and have assessed the effect of the breaking changes on the community. During that time we will still be doing <code>npm@2</code> releases, with <code>npm@2</code> tagged as <code>latest</code> and <code>next</code>. We'll <em>also</em> be publishing new releases of <code>npm@3</code> as <code>npm@v3.x-next</code> and <code>npm@v3.x-latest</code> alongside those versions until we're ready to switch everyone over to <code>npm@3</code>. We need your help to find and fix its remaining bugs. It's a significant rewrite, so we are <em>sure</em> there still significant bugs remaining. So do us a solid and deploy it in non-critical CI environments and for day-to-day use, but maybe don't use it for production maintenance or frontline continuous deployment just yet.</p>
<h3><a class="anchor" id="autotoc_md4133"></a>
BOOGS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/9babfd63f19f2d80b2d2624e0963b0bdb0d76ef4"><code>9badfd6</code></a> <a href="https://github.com/npm/npm/issues/8608">#8608</a> Make global installs and uninstalls MUCH faster by only reading the directories of modules referred to by arguments. (<a href="https://github.com/iarna">@iarna</a></li>
<li><a href="https://github.com/npm/npm/commit/075a5f046ab6837f489b08d44cb601e9fdb369b7"><code>075a5f0</code></a> <a href="https://github.com/npm/npm/issues/8660">#8660</a> Failed optional deps would still result in the optional deps own dependencies being installed. We now find them and fail them out of the tree. (<a href="https://github.com/iarna">@iarna</a></li>
<li><a href="https://github.com/npm/npm/commit/c9fbbb540083396ea58fd179d81131d959d8e049"><code>c9fbbb5</code></a> <a href="https://github.com/npm/npm/issues/8863">#8863</a> The "no compatible version found" error message was including only the version requested, not the name of the package we wanted. Ooops! (<a href="https://github.com/iarna">@iarna</a></li>
<li><a href="https://github.com/npm/npm/commit/32e6bbd21744dcbe8c0720ab53f60caa7f2a0588"><code>32e6bbd</code></a> <a href="https://github.com/npm/npm/issues/8806">#8806</a> The "uninstall" lifecycle was being run after all of a module's dependencies has been removed. This reverses that order&ndash; this means "uninstall" lifecycles can make use of the package's dependencies. (<a href="https://github.com/iarna">@iarna</a></li>
</ul>
<h3><a class="anchor" id="autotoc_md4134"></a>
MERGED FORWARD</h3>
<ul>
<li>Check out the <a href="https://github.com/npm/npm/releases/tag/v2.13.1">v2.13.1 release notes</a> and see all the changes we ported from <code>npm@2</code>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md4135"></a>
v3.1.0 (2015-07-02):</h2>
<p>This has been a brief week of bug fixes, plus some fun stuff merged forward from this weeks 2.x release. See the <a href="https://github.com/npm/npm/releases/tag/v2.13.0">2.13.0 release notes</a> for details on that.</p>
<p>You all have been AWESOME with <a href="https://github.com/npm/npm/milestones/3.x">all</a> <a href="https://github.com/npm/npm/milestones/3.2.0">the</a> <code>npm@3</code> bug reports! Thank you and keep up the great work!</p>
<h3><a class="anchor" id="autotoc_md4136"></a>
NEW PLACE, SAME CODE</h3>
<p>Remember how last week we said <code>npm@3</code> would go to <code>3.0-next</code> and latest tags? Yeaaah, no, please use <code>npm@v3.x-next</code> and <code>npm@v3.x-latest</code> going forward.</p>
<p>I dunno why we said "suuure, we'll never do a feature release till we're out
of beta" when we're still forward porting <code>npm@2.x</code> features. <code>¯\_(ツ)_/¯</code></p>
<p>If you do accidentally use the old tag names, I'll be maintaining them for a few releases, but they won't be around forever.</p>
<h3><a class="anchor" id="autotoc_md4137"></a>
YUP STILL BETA, PLEASE PAY ATTENTION</h3>
<p>**_THIS IS BETA SOFTWARE_**. <code>npm@3</code> will remain in beta until we're confident that it's stable and have assessed the effect of the breaking changes on the community. During that time we will still be doing <code>npm@2</code> releases, with <code>npm@2</code> tagged as <code>latest</code> and <code>next</code>. We'll <em>also</em> be publishing new releases of <code>npm@3</code> as <code>npm@v3.x-next</code> and <code>npm@v3.x-latest</code> alongside those versions until we're ready to switch everyone over to <code>npm@3</code>. We need your help to find and fix its remaining bugs. It's a significant rewrite, so we are <em>sure</em> there still significant bugs remaining. So do us a solid and deploy it in non-critical CI environments and for day-to-day use, but maybe don't use it for production maintenance or frontline continuous deployment just yet.</p>
<h3><a class="anchor" id="autotoc_md4138"></a>
BUGS ON THE WINDOWS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/0030ade"><code>0030ade</code></a> <a href="https://github.com/npm/npm/issues/8685">#8685</a> Windows would hang when trying to clone git repos (<a href="https://github.com/npm/npm/pull/8777">@euprogramador</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b259bcc"><code>b259bcc</code></a> <a href="https://github.com/npm/npm/pull/8786">#8786</a> Windows permissions checks would cause installations to fail under some circumstances. We're disabling the checks entirely for this release. I'm hoping to check back with this next week to get a Windows friendly fix in. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4139"></a>
SO MANY BUGS SQUASHED, JUST CALL US RAID</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/0848698"><code>0848698</code></a> <a href="https://github.com/npm/npm/pull/8686">#8686</a> Stop leaving progress bar cruft on the screen during publication (<a href="https://github.com/ajcrites">@ajcrites</a>)</li>
<li><a href="https://github.com/npm/npm/commit/57c3cea"><code>57c3cea</code></a> <a href="https://github.com/npm/npm/pull/8695">#8695</a> Remote packages with shrinkwraps made npm cause node + iojs to explode and catch fire. NO MORE. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2875ba3"><code>2875ba3</code></a> <a href="https://github.com/npm/npm/pull/8723">#8723</a> I uh, told you that engineStrict checking had gone away last week. TURNS OUT I LIED. So this is making that actually be true. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/28064e5"><code>28064e5</code></a> <a href="https://github.com/npm/npm/issues/3358">#3358</a> Consistently allow Unicode BOMs at the start of package.json files. Previously this was allowed some of time, like when you were installing modules, but not others, like running npm version or installing w/ <code>--save</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3cb6ad2"><code>3cb6ad2</code></a> <a href="https://github.com/npm/npm/issues/8766">#8736</a> <code>npm@3</code> wasn't running the "install" lifecycle in your current (toplevel) module. This broke modules that relied on C compilation. BOO. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/68da583"><code>68da583</code></a> <a href="https://github.com/npm/npm/issues/8766">#8766</a> To my great shame, <code>npm link package</code> wasn't working AT ALL if you didn't have <code>package</code> already installed. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/edd7448"><code>edd7448</code></a> <code>read-package-tree@5.0.0</code>: This update makes read-package-tree not explode when there's bad data in your node_modules folder. <code>npm@2</code> silently ignores this sort of thing. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0bb08c8"><code>0bb08c8</code></a> <a href="https://github.com/npm/npm/pull/8778">#8778</a> RELATEDLY, we now show any errors from your node_modules folder after your installation completes as warnings. We're also reporting these in <code>npm ls</code> now. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6c248ff"><code>6c248ff</code></a> <a href="https://github.com/npm/npm/pull/8779">#8779</a> Hey, you know how we used to complain if your <code>package.json</code> was missing stuff? Well guess what, we are again. I know, I know, you can thank me later. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d6f7c98"><code>d6f7c98</code></a> So, when we were rolling back after errors we had untested code that tried to undo moves. Being untested it turns out it was very broken. I've removed it until we have time to do this right. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4140"></a>
NEW VERSION</h3>
<p>Just the one. Others came in via the 2.x release. Do check out its changelog, immediately following this message.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/4e602c5"><code>4e602c5</code></a> <code>lodash@3.2.2</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md4141"></a>
v3.0.0 (2015-06-25):</h2>
<p>Wow, it's finally here! This has been a long time coming. We are all delighted and proud to be getting this out into the world, and are looking forward to working with the npm user community to get it production-ready as quickly as possible.</p>
<p><code>npm@3</code> constitutes a nearly complete rewrite of npm's installer to be easier to maintain, and to bring a bunch of valuable new features and design improvements to you all.</p>
<p><a href="https://github.com/othiym23">@othiym23</a> and <a href="https://github.com/isaacs">@isaacs</a> have been <a href="http://blog.npmjs.org/post/91303926460/npm-cli-roadmap-a-periodic-update">talking about the changes</a> in this release for well over a year, and it's been the primary focus of <a href="https://github.com/iarna">@iarna</a> since she joined the team.</p>
<p>Given that this is a near-total rewrite, all changes listed here are <a href="https://github.com/iarna">@iarna</a>'s work unless otherwise specified.</p>
<h3><a class="anchor" id="autotoc_md4142"></a>
NO, REALLY, READ THIS PARAGRAPH. IT'S THE IMPORTANT ONE.</h3>
<p>**_THIS IS BETA SOFTWARE_**. <code>npm@3</code> will remain in beta until we're confident that it's stable and have assessed the effect of the breaking changes on the community. During that time we will still be doing <code>npm@2</code> releases, with <code>npm@2</code> tagged as <code>latest</code> and <code>next</code>. We'll <em>also</em> be publishing new releases of <code>npm@3</code> as <code>npm@3.0-next</code> and <code>npm@3.0-latest</code> alongside those versions until we're ready to switch everyone over to <code>npm@3</code>. We need your help to find and fix its remaining bugs. It's a significant rewrite, so we are <em>sure</em> there still significant bugs remaining. So do us a solid and deploy it in non-critical CI environments and for day-to-day use, but maybe don't use it for production maintenance or frontline continuous deployment just yet.</p>
<h3><a class="anchor" id="autotoc_md4143"></a>
BREAKING CHANGES</h3>
<h4><a class="anchor" id="autotoc_md4144"></a>
&lt;tt&gt;peerDependencies&lt;/tt&gt;</h4>
<p><code>grunt</code>, <code>gulp</code>, and <code>broccoli</code> plugin maintainers take note! You will be affected by this change!</p>
<ul>
<li><a href="https://github.com/npm/npm/issues/6930">#6930</a> (<a href="https://github.com/npm/npm/issues/6565">#6565</a>) <code>peerDependencies</code> no longer cause <em>anything</em> to be implicitly installed. Instead, npm will now warn if a packages <code>peerDependencies</code> are missing, but it's up to the consumer of the module (i.e. you) to ensure the peers get installed / are included in <code>package.json</code> as direct <code>dependencies</code> or <code>devDependencies</code> of your package.</li>
<li><a href="https://github.com/npm/npm/issues/3803">#3803</a> npm also no longer checks <code>peerDependencies</code> until after it has fully resolved the tree.</li>
</ul>
<p>This shifts the responsibility for fulfilling peer dependencies from library / framework / plugin maintainers to application authors, and is intended to get users out of the dependency hell caused by conflicting <code>peerDependency</code> constraints. npm's job is to keep you <em>out</em> of dependency hell, not put you in it.</p>
<h4><a class="anchor" id="autotoc_md4145"></a>
&lt;tt&gt;engineStrict&lt;/tt&gt;</h4>
<ul>
<li><a href="https://github.com/npm/npm/issues/6931">#6931</a> The rarely-used <code>package.json</code> option <code>engineStrict</code> has been deprecated for several months, producing warnings when it was used. Starting with <code>npm@3</code>, the value of the field is ignored, and engine violations will only produce warnings. If you, as a user, want strict <code>engines</code> field enforcement, just run <code>npm config set engine-strict true</code>.</li>
</ul>
<p>As with the peer dependencies change, this is about shifting control from module authors to application authors. It turns out <code>engineStrict</code> was very difficult to understand even harder to use correctly, and more often than not just made modules using it difficult to deploy.</p>
<h4><a class="anchor" id="autotoc_md4146"></a>
&lt;tt&gt;npm view&lt;/tt&gt;</h4>
<ul>
<li><a href="https://github.com/npm/npm/commit/77f1aec"><code>77f1aec</code></a> With <code>npm view</code> (aka <code>npm info</code>), always return arrays for versions, maintainers, etc. Previously npm would return a plain value if there was only one, and multiple values if there were more. (<a href="https://github.com/KenanY">@KenanY</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4147"></a>
KNOWN BUGS</h3>
<p>Again, this is a <em><b>BETA RELEASE</b></em>, so not everything is working just yet. Here are the issues that we already know about. If you run into something that isn't on this list, <a href="https://github.com/npm/npm/issues/new">let us know</a>!</p>
<ul>
<li><a href="https://github.com/npm/npm/issues/8575">#8575</a> Circular deps will never be removed by the prune-on-uninstall code.</li>
<li><a href="https://github.com/npm/npm/issues/8588">#8588</a> Local deps where the dep name and the name in the package.json differ don't result in an error.</li>
<li><a href="https://github.com/npm/npm/issues/8637">#8637</a> Modules can install themselves as direct dependencies. <code>npm@2</code> declined to do this.</li>
<li><a href="https://github.com/npm/npm/issues/8660">#8660</a> Dependencies of failed optional dependencies aren't rolled back when the optional dependency is, and then are reported as extraneous thereafter.</li>
</ul>
<h3><a class="anchor" id="autotoc_md4148"></a>
NEW FEATURES</h3>
<h4><a class="anchor" id="autotoc_md4149"></a>
The multi-stage installer!</h4>
<ul>
<li><p class="startli"><a href="https://github.com/npm/npm/issues/5919">#5919</a> Previously the installer had a set of steps it executed for each package and it would immediately start executing them as soon as it decided to act on a package.</p>
<p class="startli">But now it executes each of those steps at the same time for all packages, waiting for all of one stage to complete before moving on. This eliminates many race conditions and makes the code easier to reason about.</p>
</li>
</ul>
<p>This fixes, for instance:</p>
<ul>
<li><a href="https://github.com/npm/npm/issues/6926">#6926</a> (<a href="https://github.com/npm/npm/issues/5001">#5001</a>, <a href="https://github.com/npm/npm/issues/6170">#6170</a>) <code>install</code> and <code>postinstall</code> lifecycle scripts now only execute <code>after</code> all the module with the script's dependencies are installed.</li>
</ul>
<h4><a class="anchor" id="autotoc_md4150"></a>
Install: it looks different!</h4>
<p>You'll now get a tree much like the one produced by <code>npm ls</code> that highlights in orange the packages that were installed. Similarly, any removed packages will have their names prefixed by a <code>-</code>.</p>
<p>Also, <code>npm outdated</code> used to include the name of the module in the <code>Location</code> field:</p>
<div class="fragment"><div class="line">Package                Current  Wanted  Latest  Location</div>
<div class="line">deep-equal             MISSING   1.0.0   1.0.0  deep-equal</div>
<div class="line">glob                     4.5.3   4.5.3  5.0.10  rimraf &gt; glob</div>
</div><!-- fragment --><p>Now it shows the module that required it as the final point in the <code>Location</code> field:</p>
<div class="fragment"><div class="line">Package                Current  Wanted  Latest  Location</div>
<div class="line">deep-equal             MISSING   1.0.0   1.0.0  npm</div>
<div class="line">glob                     4.5.3   4.5.3  5.0.10  npm &gt; rimraf</div>
</div><!-- fragment --><p>Previously the <code>Location</code> field was telling you where the module was on disk. Now it tells you what requires the module. When more than one thing requires the module you'll see it listed once for each thing requiring it.</p>
<h4><a class="anchor" id="autotoc_md4151"></a>
Install: it works different!</h4>
<ul>
<li><a href="https://github.com/npm/npm/issues/6928">#6928</a> (<a href="https://github.com/npm/npm/issues/2931">#2931</a> <a href="https://github.com/npm/npm/issues/2950">#2950</a>) <code>npm install</code> when you have an <code>npm-shrinkwrap.json</code> will ensure you have the modules specified in it are installed in exactly the shape specified no matter what you had when you started.</li>
<li><a href="https://github.com/npm/npm/issues/6913">#6913</a> (<a href="https://github.com/npm/npm/issues/1341">#1341</a> <a href="https://github.com/npm/npm/issues/3124">#3124</a> <a href="https://github.com/npm/npm/issues/4956">#4956</a> <a href="https://github.com/npm/npm/issues/6349">#6349</a> <a href="https://github.com/npm/npm/issues/5465">#5465</a>) <code>npm install</code> when some of your dependencies are missing sub-dependencies will result in those sub-dependencies being installed. That is, <code>npm install</code> now knows how to fix broken installs, most of the time.</li>
<li><a href="https://github.com/npm/npm/issues/5465">#5465</a> If you directly <code>npm install</code> a module that's already a subdep of something else and your new version is incompatible, it will now install the previous version nested in the things that need it.</li>
<li><a href="https://github.com/npm/npm/commit/a2b50cf"><code>a2b50cf</code></a> <a href="https://github.com/npm/npm/issues/5693">#5693</a> When installing a new module, if it's mentioned in your <code>npm-shrinkwrap.json</code> or your <code>package.json</code> use the version specifier from there if you didn't specify one yourself.</li>
</ul>
<h4><a class="anchor" id="autotoc_md4152"></a>
Flat, flat, flat!</h4>
<p>Your dependencies will now be installed <em>maximally flat</em>. Insofar as is possible, all of your dependencies, and their dependencies, and THEIR dependencies will be installed in your project's <code>node_modules</code> folder with no nesting. You'll only see modules nested underneath one another when two (or more) modules have conflicting dependencies.</p>
<ul>
<li><a href="https://github.com/npm/npm/issues/3697">#3697</a> This will hopefully eliminate most cases where Windows users ended up with paths that were too long for Explorer and other standard tools to deal with.</li>
<li><a href="https://github.com/npm/npm/issues/6912">#6912</a> (<a href="https://github.com/npm/npm/issues/4761">#4761</a> <a href="https://github.com/npm/npm/issues/4037">#4037</a>) This also means that your installs will be deduped from the start.</li>
<li><a href="https://github.com/npm/npm/issues/5827">#5827</a> This deduping even extends to git deps.</li>
<li><a href="https://github.com/npm/npm/issues/6936">#6936</a> (<a href="https://github.com/npm/npm/issues/5698">#5698</a>) Various commands are dedupe aware now.</li>
</ul>
<p>This has some implications for the behavior of other commands:</p>
<ul>
<li><code>npm uninstall</code> removes any dependencies of the module that you specified that aren't required by any other module. Previously, it would only remove those that happened to be installed under it, resulting in left over cruft if you'd ever deduped.</li>
<li><code>npm ls</code> now shows you your dependency tree organized around what requires what, rather than where those modules are on disk.</li>
<li><a href="https://github.com/npm/npm/issues/6937">#6937</a> <code>npm dedupe</code> now flattens the tree in addition to deduping.</li>
</ul>
<p>And bundling of dependencies when packing or publishing changes too:</p>
<ul>
<li><a href="https://github.com/npm/npm/issues/2442">#2442</a> bundledDependencies no longer requires that you specify deduped sub deps. npm can now see that a dependency is required by something bundled and automatically include it. To put that another way, bundledDependencies should ONLY include things that you included in dependencies, optionalDependencies or devDependencies.</li>
<li><a href="https://github.com/npm/npm/issues/5437">#5437</a> When bundling a dependency that's both a <code>devDependency</code> and the child of a regular <code>dependency</code>, npm bundles the child dependency.</li>
</ul>
<p>As a demonstration of our confidence in our own work, npm's own dependencies are now flattened, deduped, and bundled in the <code>npm@3</code> style. This means that <code>npm@3</code> can't be packed or published by <code>npm@2</code>, which is something to be aware of if you're hacking on npm.</p>
<h4><a class="anchor" id="autotoc_md4153"></a>
Shrinkwraps: they are a-changin'!</h4>
<p>First of all, they should be idempotent now (<a href="https://github.com/npm/npm/issues/5779">#5779</a>). No more differences because the first time you install (without <code>npm-shrinkwrap.json</code>) and the second time (with <code>npm-shrinkwrap.json</code>).</p>
<ul>
<li><a href="https://github.com/npm/npm/issues/6781">#6781</a> Second, if you save your changes to <code>package.json</code> and you have <code>npm-shrinkwrap.json</code>, then it will be updated as well. This applies to all of the commands that update your tree:<ul>
<li><code>npm install --save</code></li>
<li><code>npm update --save</code></li>
<li><code>npm dedupe --save</code> (<a href="https://github.com/npm/npm/issues/6410">#6410</a>)</li>
<li><code>npm uninstall --save</code></li>
</ul>
</li>
<li><a href="https://github.com/npm/npm/issues/4944">#4944</a> (<a href="https://github.com/npm/npm/issues/5161">#5161</a> <a href="https://github.com/npm/npm/issues/5448">#5448</a>) Third, because <code>node_modules</code> folders are now deduped and flat, shrinkwrap has to also be smart enough to handle this.</li>
</ul>
<p>And finally, enjoy this shrinkwrap bug fix:</p>
<ul>
<li><a href="https://github.com/npm/npm/issues/3675">#3675</a> When shrinkwrapping a dependency that's both a <code>devDependency</code> and the child of a regular <code>dependency</code>, npm now correctly includes the child.</li>
</ul>
<h4><a class="anchor" id="autotoc_md4154"></a>
The Age of Progress (Bars)!</h4>
<ul>
<li><a href="https://github.com/npm/npm/issues/6911">#6911</a> (<a href="https://github.com/npm/npm/issues/1257">#1257</a> <a href="https://github.com/npm/npm/issues/5340">#5340</a> <a href="https://github.com/npm/npm/issues/6420">#6420</a>) The spinner is gone (yay? boo? will you miss it?), and in its place npm has <em>progress bars</em>, so you actually have some sense of how long installs will take. It's provided in Unicode and non-Unicode variants, and Unicode support is automatically detected from your environment.</li>
</ul>
<h3><a class="anchor" id="autotoc_md4155"></a>
TINY JEWELS</h3>
<p>The bottom is where we usually hide the less interesting bits of each release, but each of these are small but incredibly useful bits of this release, and very much worth checking out:</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/9ebe312"><code>9ebe312</code></a> Build system maintainers, rejoice: npm does a better job of cleaning up after itself in your temporary folder.</li>
<li><a href="https://github.com/npm/npm/issues/6942">#6942</a> Check for permissions issues prior to actually trying to install anything.</li>
<li>Emit warnings at the end of the installation when possible, so that they'll be on your screen when npm stops.</li>
<li><a href="https://github.com/npm/npm/issues/3505">#3505</a> <code>npm --dry-run</code>: You can now ask that npm only report what it <em>would have done</em> with the new <code>--dry-run</code> flag. This can be passed to any of the commands that change your <code>node_modules</code> folder: <code>install</code>, <code>uninstall</code>, <code>update</code> and <code>dedupe</code>.</li>
<li><a href="https://github.com/npm/npm/commit/81b46fb"><code>81b46fb</code></a> npm now knows the correct URLs for <code>npm bugs</code> and <code>npm repo</code> for repositories hosted on Bitbucket and GitLab, just like it does for GitHub (and GitHub support now extends to projects hosted as gists as well as traditional repositories).</li>
<li><a href="https://github.com/npm/npm/commit/5be4008a09730cfa3891d9f145e4ec7f2accd144"><code>5be4008a</code></a> npm has been cleaned up to pass the <a href="http://npm.im/standard"><code>standard</code></a> style checker. Forrest and Rebecca both feel this makes it easier to read and understand the code, and should also make it easier for new contributors to put merge-ready patches. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md4156"></a>
ZARRO BOOGS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/6401643"><code>6401643</code></a> Make sure the global install directory exists before installing to it. (<a href="https://github.com/thefourtheye">@thefourtheye</a>)</li>
<li><a href="https://github.com/npm/npm/issues/6158">#6158</a> When we remove modules we do so inside-out running unbuild for each one.</li>
<li><a href="https://github.com/npm/npm/commit/960a765"><code>960a765</code></a> The short usage information for each subcommand has been brought in sync with the documentation. (<a href="https://github.com/smikes">@smikes</a>) </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
