<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fuzzuf: include/fuzzuf/utils/interprocess_shared_object.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fuzzuf
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_bf43598f184c4738baed24c698eda399.html">fuzzuf</a></li><li class="navelem"><a class="el" href="dir_8730c7b0bd664d52517d857c1b40254f.html">utils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">interprocess_shared_object.hpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="shared__range_8hpp_source.html">fuzzuf/utils/shared_range.hpp</a>&quot;</code><br />
<code>#include &lt;boost/range/iterator_range.hpp&gt;</code><br />
<code>#include &lt;cstdint&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
<code>#include &lt;new&gt;</code><br />
<code>#include &lt;sys/mman.h&gt;</code><br />
<code>#include &lt;type_traits&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for interprocess_shared_object.hpp:</div>
<div class="dyncontent">
<div class="center"><img src="interprocess__shared__object_8hpp__incl.png" border="0" usemap="#include_2fuzzuf_2utils_2interprocess__shared__object_8hpp" alt=""/></div>
<map name="include_2fuzzuf_2utils_2interprocess__shared__object_8hpp" id="include_2fuzzuf_2utils_2interprocess__shared__object_8hpp">
<area shape="rect" title=" " alt="" coords="536,5,693,61"/>
<area shape="rect" href="shared__range_8hpp.html" title=" " alt="" coords="382,109,525,151"/>
<area shape="rect" title=" " alt="" coords="361,452,453,479"/>
<area shape="rect" title=" " alt="" coords="490,199,641,240"/>
<area shape="rect" title=" " alt="" coords="665,206,743,233"/>
<area shape="rect" title=" " alt="" coords="652,117,719,143"/>
<area shape="rect" title=" " alt="" coords="743,117,793,143"/>
<area shape="rect" title=" " alt="" coords="817,117,919,143"/>
<area shape="rect" href="range__traits_8hpp.html" title=" " alt="" coords="279,199,414,240"/>
<area shape="rect" href="remove__cvr_8hpp.html" title=" " alt="" coords="629,288,797,329"/>
<area shape="rect" href="check__capability_8hpp.html" title=" " alt="" coords="419,288,555,329"/>
<area shape="rect" href="void__t_8hpp.html" title=" " alt="" coords="470,377,637,404"/>
<area shape="rect" title=" " alt="" coords="94,295,165,322"/>
<area shape="rect" title=" " alt="" coords="189,295,259,322"/>
<area shape="rect" title=" " alt="" coords="283,295,343,322"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="interprocess__shared__object_8hpp__dep__incl.png" border="0" usemap="#include_2fuzzuf_2utils_2interprocess__shared__object_8hppdep" alt=""/></div>
<map name="include_2fuzzuf_2utils_2interprocess__shared__object_8hppdep" id="include_2fuzzuf_2utils_2interprocess__shared__object_8hppdep">
<area shape="rect" title=" " alt="" coords="188,5,345,61"/>
<area shape="rect" href="base__proxy__executor_8cpp_source.html" title=" " alt="" coords="5,109,163,151"/>
<area shape="rect" href="linux__fork__server__executor_8cpp_source.html" title=" " alt="" coords="187,109,346,151"/>
<area shape="rect" href="native__linux__executor_8cpp_source.html" title=" " alt="" coords="371,109,533,151"/>
</map>
</div>
</div>
<p><a href="interprocess__shared__object_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a31ff10c9531bf7077240a28c39505040"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a31ff10c9531bf7077240a28c39505040"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="interprocess__shared__object_8hpp.html#a31ff10c9531bf7077240a28c39505040">fuzzuf::utils::interprocess::create_shared_object</a> (const T &amp;v) -&gt; std::enable_if_t&lt; std::is_trivially_copyable_v&lt; T &gt;, std::shared_ptr&lt; T &gt;&gt;</td></tr>
<tr class="separator:a31ff10c9531bf7077240a28c39505040"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Ricerca Security <a href="#" onclick="location.href='mai'+'lto:'+'fuz'+'zu'+'f-d'+'ev'+'@ri'+'cs'+'ec.'+'co'+'.jp'; return false;">fuzzu<span style="display: none;">.nosp@m.</span>f-de<span style="display: none;">.nosp@m.</span>v@ric<span style="display: none;">.nosp@m.</span>sec.<span style="display: none;">.nosp@m.</span>co.jp</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="interprocess__shared__object_8hpp_source.html">interprocess_shared_object.hpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a31ff10c9531bf7077240a28c39505040"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31ff10c9531bf7077240a28c39505040">&#9670;&nbsp;</a></span>create_shared_object()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">auto fuzzuf::utils::interprocess::create_shared_object </td>
          <td>(</td>
          <td class="paramtype">const T &amp;&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td> -&gt; std::enable_if_t&lt;std::is_trivially_copyable_v&lt;T&gt;, std::shared_ptr&lt;T&gt;&gt; </td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generate instance of T that is shared with child processes T must satisfy trivially copyable concept The instance is initialized by argument values</p>
<p>The sharing is achieved by creating mmaped memory with MAP_SHARED|MAP_ANNONYMOUS Due to this implementation, even if the type T is smaller than page size, at least one page is allocated Furthermore, calling this function definitely cause system call For those reason, many small type values should be tied into one structure and call create_shared_object just once</p>
<p>The return value type is shared_ptr&lt; T &gt; with munmapping deleter</p>
<p>If mmap failed for some reason ( for example, out of memory ), std::bad_alloc is thrown </p>

<p class="definition">Definition at line <a class="el" href="interprocess__shared__object_8hpp_source.html#l00049">49</a> of file <a class="el" href="interprocess__shared__object_8hpp_source.html">interprocess_shared_object.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
