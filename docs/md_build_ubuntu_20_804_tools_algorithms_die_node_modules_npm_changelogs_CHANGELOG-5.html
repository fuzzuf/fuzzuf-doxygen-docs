<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fuzzuf: v5.10.0 (2018-05-10):</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fuzzuf
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">v5.10.0 (2018-05-10): </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md4246"></a>
AUDIT SHOULDN'T WAIT FOREVER</h2>
<p>This will likely be reduced further with the goal that the audit process shouldn't noticibly slow down your builds regardless of your network situation.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/3dcc240dba5258532990534f1bd8a25d1698b0bf"><code>3dcc240db</code></a> Timeout audit requests eventually. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4247"></a>
v5.10.0-next.1 (2018-05-07):</h1>
<h2><a class="anchor" id="autotoc_md4248"></a>
EXTENDED &lt;tt&gt;npm init&lt;/tt&gt; SCAFFOLDING</h2>
<p>Thanks to the wonderful efforts of <a href="https://github.com/jdalton">@jdalton</a> of lodash fame, <code>npm init</code> can now be used to invoke custom scaffolding tools!</p>
<p>You can now do things like <code>npm init react-app</code> or <code>npm init esm</code> to scaffold an npm package by running <code>create-react-app</code> and <code>create-esm</code>, respectively. This also adds an <code>npm create</code> alias, to correspond to Yarn's <code>yarn create</code> feature, which inspired this.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/adc009ed4114ed1e692f8ef15123af6040615cee"><code>adc009ed4</code></a> <a href="https://github.com/npm/npm/commit/f363edd04f474fa64e4d97228c0b2a7858f21e7c"><code>f363edd04</code></a> <a href="https://github.com/npm/npm/commit/f03b45fb217df066c3cb7715f9c0469d84e5aa8e"><code>f03b45fb2</code></a> <a href="https://github.com/npm/npm/commit/13adcbb527fb8214e5f2233706c6b72ce072f3fa"><code>13adcbb52</code></a> <a href="https://github.com/npm/npm/pull/20303">#20303</a> <a href="https://github.com/npm/npm/pull/20372">#20372</a> Add an <code>npm init</code> feature that calls out to <code>npx</code> when invoked with positional arguments. (<a href="https://github.com/jdalton">@jdalton</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4249"></a>
DEPENDENCY AUDITING</h2>
<p>This version of npm adds a new command, <code>npm audit</code>, which will run a security audit of your project's dependency tree and notify you about any actions you may need to take.</p>
<p>The registry-side services required for this command to work will be available on the main npm registry in the coming weeks. Until then, you won't get much out of trying to use this on the CLI.</p>
<p>As part of this change, the npm CLI now sends scrubbed and cryptographically anonymized metadata about your dependency tree to your configured registry, to allow notifying you about the existence of critical security flaws. For details about how the CLI protects your privacy when it shares this metadata, see <code>npm help audit</code>, or <a href="https://github.com/npm/npm/blob/release-next/doc/cli/npm-audit.md">read the docs for <code>npm audit</code> online</a>. You can disable this altogether by doing <code>npm config set audit false</code>, but will no longer benefit from the service.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/c81dfb91bc031f1f979fc200bb66718a7e8e1551"><code>c81dfb91b</code></a> <code>npm-registry-fetch@1.1.1</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b096f44a96d185c45305b9b6a5f26d3ccbbf759d"><code>b096f44a9</code></a> <code>npm-audit-report@1.0.9</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/43b20b204ff9a86319350988d6774397b7da4593"><code>43b20b204</code></a> <a href="https://github.com/npm/npm/pull/20389">#20389</a> Add new <code>npm audit</code> command. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/49ddb3f5669e90785217a639f936f4e38390eea2"><code>49ddb3f56</code></a> <a href="https://github.com/npm/npm/pull/20389">#20389</a> Temporarily suppress git metadata till there's an opt-in. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5f1129c4b072172c72cf9cff501885e2c11998ea"><code>5f1129c4b</code></a> <a href="https://github.com/npm/npm/pull/20389">#20389</a> Document the new command. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9a07b379d24d089687867ca34df6e1e6189c72f1"><code>9a07b379d</code></a> <a href="https://github.com/npm/npm/pull/20389">#20389</a> Default audit to off when running the npm test suite itself. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a6e2f12849b84709d89b3dc4f096e8c6f7db7ebb"><code>a6e2f1284</code></a> Make sure we hide stream errors on background audit submissions. Previously some classes of error could end up being displayed (harmlessly) during installs. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/aadbf3f4695e75b236ee502cbe41e51aec318dc3"><code>aadbf3f46</code></a> Include session and scope in requests (as we do in other requests to the registry). (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7d43ddf6366d3bfc18ea9ccef8c7b8e43d3b79f5"><code>7d43ddf63</code></a> Exit with non-zero status when vulnerabilities are found. So you can have <code>npm audit</code> as a test or prepublish step! (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/bc3fc55fae648da8efaf1be5b86078f0f736282e"><code>bc3fc55fa</code></a> Verify lockfile integrity before running. You'd get an error either way, but this way it's faster and can give you more concrete instructions on how to fix it. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2ac8edd4248f2393b35896f0300b530e7666bb0e"><code>2ac8edd42</code></a> Refuse to run in global mode. Audits require a lockfile and globals don't have one. Yet. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4250"></a>
CTRL-C OUT DURING PACKAGE EXTRACTION AS MUCH AS YOU WANT!</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/663d8b5e5427c2243149d2dd6968faa117e9db3f"><code>663d8b5e5</code></a> <a href="https://github.com/npm/lockfile/pull/29">npm/lockfile#29</a> <code>lockfile@1.0.4</code>: Switches to <code>signal-exit</code> to detect abnormal exits and remove locks. (<a href="https://github.com/Redsandro">@Redsandro</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4251"></a>
SHRONKWRAPS AND LACKFILES</h2>
<p>If a published modules had legacy <code>npm-shrinkwrap.json</code> we were saving ordinary registry dependencies (<code>name@version</code>) to your <code>package-lock.json</code> as <code><a href="https://">https://</a></code> URLs instead of versions.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/36f9984113e39d7b190010a2d0694ee025924dcb"><code>36f998411</code></a> When saving the lock-file compute how the dependency is being required instead of using <code>_resolved</code> in the <code>package.json</code>. This fixes the bug that was converting registry dependencies into <code><a href="https://">https://</a></code> dependencies. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/113e1a3af2f487c753b8871d51924682283c89fc"><code>113e1a3af</code></a> When encountering a <code><a href="https://">https://</a></code> URL in our lockfiles that point at our default registry, extract the version and use them as registry dependencies. This lets us heal <code>package-lock.json</code> files produced by 6.0.0 (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4252"></a>
MORE &lt;tt&gt;package-lock.json&lt;/tt&gt; FORMAT CHANGES?!</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/0745029168dfdfee0d1823137550e6ebccf741a5"><code>074502916</code></a> <a href="https://github.com/npm/npm/pull/20384">#20384</a> Add <code>from</code> field back into package-lock for git dependencies. This will give npm the information it needs to figure out whether git deps are valid, specially when running with legacy install metadata or in <code>--package-lock-only</code> mode when there's no <code>node_modules</code>. This should help remove a significant amount of git-related churn on the lock-file. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4253"></a>
DOCUMENTATION IMPROVEMENTS</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/e0235ebb6e560f0114b8babedb6949385ab9bd57"><code>e0235ebb6</code></a> <a href="https://github.com/npm/npm/pull/20384">#20384</a> Update the lock-file spec doc to mention that we now generate the from field for <code>git</code>-type dependencies. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/35de04676a567ef11e1dd031d566231021d8aff2"><code>35de04676</code></a> <a href="https://github.com/npm/npm/pull/20408">#20408</a> Describe what the colors in outdated mean. (<a href="https://github.com/teameh">@teameh</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4254"></a>
BUGFIXES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/1b535cb9d4a556840aeab2682cc8973495c9919a"><code>1b535cb9d</code></a> <a href="https://github.com/npm/npm/pull/20358">#20358</a> <code>npm install-test</code> (aka <code>npm it</code>) will no longer generate <code>package-lock.json</code> when running with <code>--no-package-lock</code> or <code>package-lock=false</code>. (<a href="https://github.com/raymondfeng">@raymondfeng</a>)</li>
<li><a href="https://github.com/npm/npm/commit/268f7ac508cda352d61df63a2ae7148c54bdff7c"><code>268f7ac50</code></a> <a href="https://github.com/npm/npm/commit/5f84ebdb66e35486d1dec1ca29e9ba0e4c5b6d5f"><code>5f84ebdb6</code></a> <a href="https://github.com/npm/npm/commit/c12e61431ecf4f77e56dc8aa55c41d5d7eeaacad"><code>c12e61431</code></a> <a href="https://github.com/npm/npm/pull/20390">#20390</a> Fix a scenario where a git dependency had a comittish associated with it that was not a complete commitid. <code>npm</code> would never consider that entry in the <code>package.json</code> as matching the entry in the <code>package-lock.json</code> and this resulted in inappropriate pruning or reinstallation of git dependencies. This has been addressed in two ways, first, the addition of the <code>from</code> field as described in <a href="https://github.com/npm/npm/pull/20384">#20384</a> means we can exactly match the <code>package.json</code>. Second, when that's missing (when working with older <code>package-lock.json</code> files), we assume that the match is ok. (If it's not, we'll fix it up when a real installation is done.) (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4255"></a>
DOCS</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/7b13bf5e373e2ae2466ecaa3fd6dcba67a97f462"><code>7b13bf5e3</code></a> <a href="https://github.com/npm/npm/pull/20331">#20331</a> Fix broken link to 'private-modules' page. The redirect went away when the new npm website went up, but the new URL is better anyway. (<a href="https://github.com/vipranarayan14">@vipranarayan14</a>)</li>
<li><a href="https://github.com/npm/npm/commit/1c4ffddce05c25ef51e254dfc6a9a97e03c711ce"><code>1c4ffddce</code></a> <a href="https://github.com/npm/npm/pull/20279">#20279</a> Document the <code>--if-present</code> option for <code>npm run-script</code>. (<a href="https://github.com/aleclarson">@aleclarson</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4256"></a>
DEPENDENCY UPDATES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/815d91ce0e8044775e884c1dab93052da57f6650"><code>815d91ce0</code></a> <code>libnpx@10.2.0</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/02715f19fbcdecec8990b92fc60b1a022c59613b"><code>02715f19f</code></a> <code>update-notifier@2.5.0</code> (<a href="https://github.com/alexccl">@alexccl</a>)</li>
<li><a href="https://github.com/npm/npm/commit/08c4ddd9eb560aa6408a1bb1c1d2d9aa6ba46ba0"><code>08c4ddd9e</code></a> <code>tar@4.4.2</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/53718cb126956851850839b4d7d3041d4e9a80d0"><code>53718cb12</code></a> <code>tap@11.1.4</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0a20cf546a246ac12b5fe2b6235ffb8649336ec4"><code>0a20cf546</code></a> <code>safe-buffer@5.1.2</code> (<a href="https://github.com/feross">@feross</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e8c8e844c194351fe2d65cf3af79ef318bbc8bec"><code>e8c8e844c</code></a> <code>retry@0.12.0</code> (<a href="https://github.com/tim-kos">@tim-kos</a>)</li>
<li><a href="https://github.com/npm/npm/commit/76c7f21bd04407d529edc4a76deaa85a2d6b6e6f"><code>76c7f21bd</code></a> <code>read-package-tree@5.2.1</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c8b0aa07b34a0b0f8bc85154da75d9fb458eb504"><code>c8b0aa07b</code></a> <code>query-string@6.1.0</code> (<a href="https://github.com/sindresorhus">@sindresorhus</a>)</li>
<li><a href="https://github.com/npm/npm/commit/abfd366b4709325f954f2b1ee5bd475330aab828"><code>abfd366b4</code></a> <code>npm-package-arg@6.1.0</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/bd29baf834c3e16a9b3d7b60cdb4f462889800bf"><code>bd29baf83</code></a> <code>lock-verify@2.0.2</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4257"></a>
v5.10.0-next.0 (2018-04-12):</h1>
<h2><a class="anchor" id="autotoc_md4258"></a>
NEW FEATURES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/32ec2f54b2ad7370f2fd17e6e2fbbb2487c81266"><code>32ec2f54b</code></a> <a href="https://github.com/npm/npm/pull/20257">#20257</a> Add shasum and integrity to the new <code>npm view</code> output. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a22153be239dfd99d87a1a1c7d2c3700db0bebf3"><code>a22153be2</code></a> <a href="https://github.com/npm/npm/pull/20126">#20126</a> Add <code>npm cit</code> command that's equivalent of <code>npm ci &amp;&amp; npm t</code> that's equivalent of <code>npm it</code>. (<a href="https://github.com/SimenB">@SimenB</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4259"></a>
BUG FIXES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/089aeaf4479f286b1ce62716c6442382ff0f2150"><code>089aeaf44</code></a> Fix a bug where OTPs passed in via the commandline would have leading zeros deleted resulted in authentication failures. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/6eaa860ead3222a6dbd6d370b4271e7bf242b30b"><code>6eaa860ea</code></a> Eliminate direct use of <code>new Buffer</code> in <code>npm</code>. While the use of it in <code>npm</code> was safe, there are two other reasons for this change:</p><ol type="1">
<li>Node 10 emits warnings about its use.</li>
<li>Users who require npm as a library (which they definitely should not do) can call the functions that call <code>new Buffer</code> in unsafe ways, if they try really hard.</li>
</ol>
<p class="startli">(<a href="https://github.com/iarna">@iarna</a>)</p>
</li>
<li><a href="https://github.com/npm/npm/commit/85900a2944fed14bc8f59c48856fb797faaafedc"><code>85900a294</code></a> Starting with 5.8.0 the <code>requires</code> section of the lock-file saved version ranges instead of specific versions. Due to a bug, further actions on the same lock-file would result in the range being switched back to a version. This corrects that, keeping ranges when they appear. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/0dffa9c2ae20b669f65c8e596dafd63e52248250"><code>0dffa9c2a</code></a> <a href="https://github.com/npm/npm/commit/609d6f6e1b39330b64ca4677a531819f2143a283"><code>609d6f6e1</code></a> <a href="https://github.com/npm/npm/commit/08f81aa94171987a8e1b71a87034e7b028bb9fc7"><code>08f81aa94</code></a> <a href="https://github.com/npm/npm/commit/f8b76e0764b606e2c129cbaa66e48ac6a3ebdf8a"><code>f8b76e076</code></a> <a href="https://github.com/npm/npm/commit/6d609822d00da7ab8bd05c24ec4925094ecaef53"><code>6d609822d</code></a> <a href="https://github.com/npm/npm/commit/59d080a22f7314a8e4df6e4f85c84777c1e4be42"><code>59d080a22</code></a> Restore the ability to bundle dependencies that are uninstallable from the registry. This also eliminates needless registry lookups for bundled dependencies.</p>
<p class="startli">Fixed a bug where attempting to install a dependency that is bundled inside another module without reinstalling that module would result in ENOENT errors. (<a href="https://github.com/iarna">@iarna</a>)</p>
</li>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/db846c2d57399f277829036f9d96cd767088097e"><code>db846c2d5</code></a> <a href="https://github.com/npm/npm/pull/20029">#20029</a> Allow packages with non-registry specifiers to follow the fast path that the we use with the lock-file for registry specifiers. This will improve install time especially when operating only on the package-lock (<code>--package-lock-only</code>).</p>
<p class="startli">(<a href="https://github.com/zkat">@zkat</a>)</p>
<p class="startli">Fix the a bug where <code>npm i --only=prod</code> could remove development dependencies from lock-file. (<a href="https://github.com/iarna">@iarna</a>)</p>
</li>
<li><a href="https://github.com/npm/npm/commit/3e12d2407446661d3dd226b03a2b6055b7932140"><code>3e12d2407</code></a> <a href="https://github.com/npm/npm/pull/20122">#20122</a> Improve the update-notifier messaging (borrowing ideas from pnpm) and eliminate false positives. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f18be9b39888d05c7f98946c53214f40914f6284"><code>f18be9b39</code></a> <a href="https://github.com/npm/npm/pull/20154">#20154</a> Let version succeed when <code>package-lock.json</code> is gitignored. (<a href="https://github.com/nwoltman">@nwoltman</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ced29253df6c6d67e4bf47ca83e042db4fb19034"><code>ced29253d</code></a> <a href="https://github.com/npm/npm/pull/20212">#20212</a> Ensure that we only create an <code>etc</code> directory if we are actually going to write files to it. (<a href="https://github.com/buddydvd">@buddydvd</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8e21b19a8c5e7d71cb51f3cc6a8bfaf7749ac2c5"><code>8e21b19a8</code></a> <a href="https://github.com/npm/npm/pull/20140">#20140</a> Note in documentation that <code>package-lock.json</code> version gets touched by <code>npm version</code>. (<a href="https://github.com/srl295">@srl295</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5d17c87d8d27caeac71f291fbd62628f2765fda2"><code>5d17c87d8</code></a> <a href="https://github.com/npm/npm/pull/20032">#20032</a> Fix bug where unauthenticated errors would get reported as both 404s and 401s, i.e. <code>npm ERR! 404 Registry returned 401</code>. In these cases the error message will now be much more informative. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/05ff6c9b14cb095988b768830e51789d6b6b8e6e"><code>05ff6c9b1</code></a> <a href="https://github.com/npm/npm/pull/20082">#20082</a> Allow optional @ prefix on scope with <code>npm team</code> commands for parity with other commands. (<a href="https://github.com/bcoe">@bcoe</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6bef538919825b8cd2e738333bdd7b6ca2e2e0e3"><code>6bef53891</code></a> <a href="https://github.com/npm/npm/pull/19580">#19580</a> Improve messaging when two-factor authentication is required while publishing. (<a href="https://github.com/jdeniau">@jdeniau</a>)</li>
<li><a href="https://github.com/npm/npm/commit/155dab2bd7b06724eca190abadd89c9f03f85446"><code>155dab2bd</code></a> Fix a bug where optional status of a dependency was not being saved to the package-lock on the initial install. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8d6a4cafc2e6963d9ec7c828e1af6f2abc12e7f3"><code>8d6a4cafc</code></a> <a href="https://github.com/npm/npm/commit/a0937e9afe126dce7a746c1a6270b1ac69f2a9b3"><code>a0937e9af</code></a> Ensure that <code>--no-optional</code> does not remove optional dependencies from the lock-file. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4260"></a>
DEPENDENCY UPDATES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/8baa37551945bc329a6faf793ec5e3e2feff489b"><code>8baa37551</code></a> <a href="https://github.com/zkat/cipm/pull/46">zkat/cipm#46</a> <code>libcipm@1.6.2</code>: Detect binding.gyp for default install lifecycle. Let's <code>npm ci</code> work on projects that have their own C code. (<a href="https://github.com/caleblloyd">@caleblloyd</a>)</li>
<li><a href="https://github.com/npm/npm/commit/323f74242066c989f7faf94fb848ff8f3b677619"><code>323f74242</code></a> <a href="https://github.com/zkat/json-parse-better-errors/pull/1">zkat/json-parse-better-errors#1</a> <code>json-parse-better-errors@1.0.2</code> (<a href="https://github.com/Hoishin">@Hoishin</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d0cf1f11e5947446f74881a3d15d6a504baea619"><code>d0cf1f11e</code></a> <code>readable-stream@2.3.6</code> (<a href="https://github.com/mcollina">@mcollina</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9e9fdba5e7b7f3a1dd73530dadb96d9e3445c48d"><code>9e9fdba5e</code></a> <code>update-notifier@2.4.0</code> (<a href="https://github.com/sindersorhus">@sindersorhus</a>)</li>
<li><a href="https://github.com/npm/npm/commit/57fa338706ab122ab7e13d2206016289c5bdacf3"><code>57fa33870</code></a> <code>marked@0.3.1</code> (<a href="https://github.com/joshbruce">@joshbruce</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d2b20d34b60f35eecf0d51cd1f05de79b0e15096"><code>d2b20d34b</code></a> <a href="https://github.com/npm/npm/pull/20276">#20276</a> <code>node-gyp@3.6.2</code></li>
<li><a href="https://github.com/npm/npm/commit/2b5700679fce9ee0c24c4509618709a4a35a3d27"><code>2b5700679</code></a> <a href="https://github.com/zkat/npx/pull/172">zkat/npx#172</a> <code>libnpx@10.1.1</code> (<a href="https://github.com/jdalton">@jdalton</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4261"></a>
v5.9.0 (2018-03-23):</h1>
<p>Coming to you this week are a fancy new package view, pack/publish previews and a handful of bug fixes! Let's get right in!</p>
<h2><a class="anchor" id="autotoc_md4262"></a>
NEW PACKAGE VIEW</h2>
<p>There's a new <code>npm view</code> in town. You might it as <code>npm info</code> or <code>npm show</code>. The new output gives you a nicely summarized view that for most packages fits on one screen. If you ask it for <code>--json</code> you'll still get the same results, so your scripts should still work fine.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/143cdbf1327f7d92ccae405bc05d95d28939a837"><code>143cdbf13</code></a> <a href="https://github.com/npm/npm/pull/19910">#19910</a> Add humanized default view. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ca84be91c434fb7fa472ee4c0b7341414acf52b5"><code>ca84be91c</code></a> <a href="https://github.com/npm/npm/pull/19910">#19910</a> <code>tiny-relative-date@1.3.0</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9a5807c4f813c49b854170b6111c099b3054faa2"><code>9a5807c4f</code></a> <a href="https://github.com/npm/npm/pull/19910">#19910</a> <code>cli-columns@3.1.2</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/23b4a4fac0fbfe8e03e2f65d9f674f163643d15d"><code>23b4a4fac</code></a> <a href="https://github.com/npm/npm/pull/19910">#19910</a> <code>byte-size@4.0.2</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md4263"></a>
PACK AND PUBLISH PREVIEWS</h2>
<p>The <code>npm pack</code> and <code>npm publish</code> commands print out a summary of the files included in the package. They also both now take the <code>--dry-run</code> flag, so you can double check your <code>.npmignore</code> settings before doing a publish.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/116e9d8271d04536522a7f02de1dde6f91ca5e6e"><code>116e9d827</code></a> <a href="https://github.com/npm/npm/pull/19908">#19908</a> Add package previews to pack and publish. Also add &ndash;dry-run and &ndash;json flags. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4264"></a>
MERGE CONFLICT, SMERGE CONFLICT</h2>
<p>If you resolve a <code>package-lock.json</code> merge conflict with <code>npm install</code> we now suggest you setup a merge driver to handle these automatically for you. If you're reading this and you'd like to set it up now, run:</p>
<div class="fragment"><div class="line">npx npm-merge-driver install -g</div>
</div><!-- fragment --><ul>
<li><a href="https://github.com/npm/npm/commit/5ebe99719d11fedeeec7a55f1b389dcf556f32f3"><code>5ebe99719</code></a> <a href="https://github.com/npm/npm/pull/20071">#20071</a> suggest installing the merge driver (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4265"></a>
MISC BITS</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/a05e27b7104f9a79f5941e7458c4658872e5e0cd"><code>a05e27b71</code></a> Going forward, record requested ranges not versions in the package-lock. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f721eec599df4bdf046d248e0f50822d436654b4"><code>f721eec59</code></a> Add 10 to Node.js supported version list. It's not out yet, but soon my pretties... (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4266"></a>
DEPENDENCY UPDATES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/40aabb94e3f24a9feabb9c490403e10ec9dc254f"><code>40aabb94e</code></a> <code>libcipm@1.6.1</code>: Fix bugs on docker and with some <code>prepare</code> scripts and <code>npm ci</code>. Fix a bug where script hooks wouldn't be called with <code>npm ci</code>. Fix a bug where <code>npm ci</code> and <code>--prefix</code> weren't compatible. (<a href="https://github.com/isaacseymour">@isaacseymour</a>) (<a href="https://github.com/umarov">@umarov</a>) (<a href="https://github.com/mikeshirov">@mikeshirov</a>) (<a href="https://github.com/billjanitsch">@billjanitsch</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a85372e671eab46e62caa46631baa30900e32114"><code>a85372e67</code></a> <code>tar@4.4.1</code>: Switch to safe-buffer and Buffer.from. (<a href="https://github.com/isaacs">@isaacs</a>) (<a href="https://github.com/ChALkeR">@ChALkeR</a>)</li>
<li><a href="https://github.com/npm/npm/commit/588eabd23fa04420269b9326cab26d974d9c151f"><code>588eabd23</code></a> <code>lru-cache@4.1.2</code>:</li>
<li><a href="https://github.com/npm/npm/commit/07f27ee898f3c3199e75427017f2b6a189b1a85b"><code>07f27ee89</code></a> <code>qrcode-terminal@0.12.0</code>:</li>
<li><a href="https://github.com/npm/npm/commit/01e4e29bc879bdaa0e92f0b58e3725a41377d21c"><code>01e4e29bc</code></a> <code>request@2.85.0</code></li>
<li><a href="https://github.com/npm/npm/commit/344ba8819f485c72e1c7ac3e656d7e9210ccf607"><code>344ba8819</code></a> <code>worker-farm@1.6.0</code></li>
<li><a href="https://github.com/npm/npm/commit/dc6df1bc4677164b9ba638e87c1185b857744720"><code>dc6df1bc4</code></a> <code>validate-npm-package-license@3.0.3</code></li>
<li><a href="https://github.com/npm/npm/commit/97a9766962ab5125af3b2a1f7b4ef550a2e3599b"><code>97a976696</code></a> <code>ssri@5.3.0</code></li>
<li><a href="https://github.com/npm/npm/commit/9b629d0c69599635ee066cb71fcc1b0155317f19"><code>9b629d0c6</code></a> <code>query-string@5.1.1</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md4267"></a>
v5.8.0 (2018-03-08):</h1>
<p>Hey again, everyone! While last release was focused largely around PRs from the CLI team, this release is mostly pulling in community PRs in npm itself and its dependencies! We've got a good chunk of wonderful contributions for y'all, and even new features and performance improvements! 🎉</p>
<p>We're hoping to continue our biweekly (as in every-other-week biweekly) release schedule from now on, so you should be seeing more steady npm releases from here on out. And that's good, 'cause we've got a <em>ton</em> of new stuff on our roadmap for this year. Keep an eye out for exciting news. 👀</p>
<h2><a class="anchor" id="autotoc_md4268"></a>
FEATURES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/2f513fe1ce6db055b04a63fe4360212a83f77b34"><code>2f513fe1c</code></a> <a href="https://github.com/npm/npm/pull/19904">#19904</a> Make a best-attempt at preserving line ending style when saving <code>package.json</code>/<code>package-lock.json</code>/<code>npm-shrinkwrap.json</code>. This goes hand-in-hand with a previous patch to preserve detected indentation style. (<a href="https://github.com/tuananh">@tuananh</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d3cfd41a28253db5a18260f68642513cbbc93e3b"><code>d3cfd41a2</code></a> <code>pacote@7.6.1</code> (<a href="https://github.com/zkat">@zkat</a>)<ul>
<li>Enable <code>file:</code>-based <code>resolved</code> URIs in <code>package-lock.json</code>.</li>
<li>Retry git-based operations on certain types of failure.</li>
</ul>
</li>
<li><a href="https://github.com/npm/npm/commit/ecfbb16dc705f28aa61b3223bdbf9e47230a0fa4"><code>ecfbb16dc</code></a> <a href="https://github.com/npm/npm/pull/19929">#19929</a> Add support for the <a href="http://no-color.org"><code>NO_COLOR</code> standard</a>. This gives a cross-application, consistent way of disabling ANSI color code output. Note that npm already supported this through <code>--no-color</code> or &lsquo;npm_config_color='false&rsquo;` configurations, so this is just another way to do it. (<a href="https://github.com/chneukirchen">@chneukirchen</a>)</li>
<li><a href="https://github.com/npm/npm/commit/fc8761daf1e8749481457973890fa516eb96a195"><code>fc8761daf</code></a> <a href="https://github.com/npm/npm/pull/19629">#19629</a> Give more detailed, contextual information when npm fails to parse <code>package-lock.json</code> and <code>npm-shrinkwrap.json</code>, instead of saying <code>JSON parse error</code> and leaving you out in the cold. (<a href="https://github.com/JoshuaKGoldberg">@JoshuaKGoldberg</a>)</li>
<li><a href="https://github.com/npm/npm/commit/1d368e1e63229f236b9dbabf628989fa3aa98bdb"><code>1d368e1e6</code></a> <a href="https://github.com/npm/npm/pull/19157">#19157</a> Add <code>--no-proxy</code> config option. Previously, you needed to use the <code>NO_PROXY</code> environment variable to use this feature &ndash; now it's an actual npm option. (<a href="https://github.com/Saturate">@Saturate</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f0e998daa049810d5f928615132250021e46451d"><code>f0e998daa</code></a> <a href="https://github.com/npm/npm/pull/18426">#18426</a> Do environment variable replacement in config files even for config keys or fragments of keys. (<a href="https://github.com/misak113">@misak113</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9847c82a8528cfdf5968e9bb00abd8ed47903b5c"><code>9847c82a8</code></a> <a href="https://github.com/npm/npm/pull/18384">#18384</a> Better error messaging and suggestions when users get <code>EPERM</code>/<code>EACCES</code> errors. (<a href="https://github.com/chrisjpatty">@chrisjpatty</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b9d0c0c0173542a8d741a9a17b9fb34fbaf5068e"><code>b9d0c0c01</code></a> <a href="https://github.com/npm/npm/pull/19448">#19448</a> Holiday celebrations now include all JavaScripters, not just Node developers. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4269"></a>
NPM CI</h2>
<p>I hope y'all have been having fun with <code>npm ci</code> so far! Since this is the first release since that went out, we've had a few fixes and improvements now that folks have actually gotten their hands on it! Benchmarks have been super promising so far, and I've gotten messages from a lot of you saying you've sped up your CI work by <b>2-5x</b> in some cases! Have a good example? Tell us on Twitter!</p>
<p><code>npm ci</code> is, right now, <a href="http://blog.npmjs.org/post/171556855892/introducing-npm-ci-for-faster-more-reliable">the fastest installer</a> you can use in CI situations, so go check it out if you haven't already! We'll continue doing performance improvements on it, and a lot of those will help make <code>npm install</code> fast as well. 🏎😎</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/0d7f203d9e86cc6c8d69107689ea60fc7cbab424"><code>0d7f203d9</code></a> <code>libcipm@1.6.0</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<p>This <code>libcipm</code> release includes a number of improvements:</p>
<ul>
<li><b>PERFORMANCE</b> Reduce calls to <code>read-package-json</code> and separate JSON update phase from man/bin linking phase. <code>npm ci</code> should be noticeably faster.</li>
<li><b>FEATURE</b> Progress bar now fills up as packages are installed, instead of sitting there doing nothing.</li>
<li><b>BUGFIX</b> Add support for <code>--only</code> and <code>--also</code> options.</li>
<li><b>BUFGIX</b> Linking binaries and running scripts in parallel was causing packages to sometimes clobber each other when hoisted, as well as potentially running too many run-scripts in parallel. This is now a serial operation, and it turns out to have had relatively little actual performance impact.</li>
<li><b>BUGFIX</b> Stop adding <code>_from</code> to directory deps (aka <code><a href="file:packages/my-dep">file:packages/my-dep</a></code>).</li>
</ul>
<h2><a class="anchor" id="autotoc_md4270"></a>
BUGFIXES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/58d2aa58d5f9c4db49f57a5f33952b3106778669"><code>58d2aa58d</code></a> <a href="https://github.com/npm/npm/pull/20027">#20027</a> Use a specific mtime when packing tarballs instead of the beginning of epoch time. This should allow <code>npm pack</code> to generate tarballs with identical hashes for identical contents, while fixing issues with some <code>zip</code> implementations that do not support pre-1980 timestamps. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4f319de1d6e8aca5fb68f78023425233da4f07f6"><code>4f319de1d</code></a> Don't fall back to couch adduser if we didn't try couch login. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c8230c9bbd596156a4a8cfe62f2370f81d22bd9f"><code>c8230c9bb</code></a> <a href="https://github.com/npm/npm/pull/19608">#19608</a> Fix issue where using the npm-bundled <code>npx</code> on Windows was invoking <code>npx prefix</code> (and downloading that package). (<a href="https://github.com/laggingreflex">@laggingreflex</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d70c01970311f4e84b35eef8559c114136a9ebc7"><code>d70c01970</code></a> <a href="https://github.com/npm/npm/pull/18953">#18953</a> Avoid using code that depends on <code>node@&gt;=4</code> in the <code>unsupported</code> check, so npm can report the issue normally instead of syntax-crashing. (<a href="https://github.com/deployable">@deployable</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4271"></a>
DOCUMENTATION</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/4477ca2d993088ac40ef5cf39d1f9c68be3d6252"><code>4477ca2d9</code></a> <code>marked@0.3.17</code>: Fixes issue preventing correct rendering of backticked strings. man pages should be rendering correctly now instead of having empty spaces wherever backticks were used. (<a href="https://github.com/joshbruce">@joshbruce</a>)</li>
<li><a href="https://github.com/npm/npm/commit/71076ebdaddd04f2bf330fe668f15750bcff00ea"><code>71076ebda</code></a> <a href="https://github.com/npm/npm/pull/19950">#19950</a> Add a note to install &ndash;production. (<a href="https://github.com/kyranet">@kyranet</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3a33400b89a8dd00fa9a49fcb57a8add36f79fa6"><code>3a33400b8</code></a> <a href="https://github.com/npm/npm/pull/19957">#19957</a> nudge around some details in ci docs (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/06038246a3fa58d6f42bb4ab897aa534ff6ed282"><code>06038246a</code></a> <a href="https://github.com/npm/npm/pull/19893">#19893</a> Add a common open reason to the issue template. (<a href="https://github.com/MrStonedOne">@MrStonedOne</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7376dd8afb654929adade126b4925461aa52da12"><code>7376dd8af</code></a> <a href="https://github.com/npm/npm/pull/19870">#19870</a> Fix typo in <code>npm-config.md</code> (<a href="https://github.com/joebowbeer">@joebowbeer</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5390ed4fa2b480f7c58fff6ee670120149ec2d45"><code>5390ed4fa</code></a> <a href="https://github.com/npm/npm/pull/19858">#19858</a> Fix documented default value for config save option. It was still documented as <code>false</code>, even though <code>npm@5.0.0</code> set it to <code>true</code> by default. (<a href="https://github.com/nalinbhardwaj">@nalinbhardwaj</a>)</li>
<li><a href="https://github.com/npm/npm/commit/dc36d850a1d763f71a98c99db05ca875dab124ed"><code>dc36d850a</code></a> <a href="https://github.com/npm/npm/pull/19552">#19552</a> Rework <code>npm update</code> docs now that <code>--save</code> is on by default. (<a href="https://github.com/selbekk">@selbekk</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5ec5dffc80527d9330388ff82926dd890f4945af"><code>5ec5dffc8</code></a> <a href="https://github.com/npm/npm/pull/19726">#19726</a> Clarify that <code>name</code> and <code>version</code> fields are optional if your package is not supposed to be installable as a dependency. (<a href="https://github.com/ngarnier">@ngarnier</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0465009942d6423f878c1359e91972fa5990f996"><code>046500994</code></a> <a href="https://github.com/npm/npm/pull/19676">#19676</a> Fix documented cache location on Windows. (<a href="https://github.com/VladRassokhin">@VladRassokhin</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ffa84cd0f43c07858506764b4151ba6af11ea120"><code>ffa84cd0f</code></a> <a href="https://github.com/npm/npm/pull/19475">#19475</a> Added example for <code>homepage</code> field from <code>package.json</code>. (<a href="https://github.com/cg-cnu">@cg-cnu</a>)</li>
<li><a href="https://github.com/npm/npm/commit/de72d9a18ae650ebaee0fdd6694fc89b1cbe8e95"><code>de72d9a18</code></a> <a href="https://github.com/npm/npm/pull/19307">#19307</a> Document the <code>requires</code> field in <code>npm help package-lock.json</code>. (<a href="https://github.com/jcrben">@jcrben</a>)</li>
<li><a href="https://github.com/npm/npm/commit/35c4abdedfa622f27e8ee47aa6e293f435323623"><code>35c4abded</code></a> <a href="https://github.com/npm/npm/pull/18976">#18976</a> Typo fix in coding style documentation. (<a href="https://github.com/rinfan">@rinfan</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0616fd22a4e4f2b2998bb70d86d269756aab64be"><code>0616fd22a</code></a> <a href="https://github.com/npm/npm/pull/19216">#19216</a> Add <code>edit</code> section to description in <code>npm-team.md</code>. (<a href="https://github.com/WispProxy">@WispProxy</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c2bbaaa582d024cc48b410757efbb81d95837d43"><code>c2bbaaa58</code></a> <a href="https://github.com/npm/npm/pull/19194">#19194</a> Tiny style fix in <code>npm.md</code>. (<a href="https://github.com/WispProxy">@WispProxy</a>)</li>
<li><a href="https://github.com/npm/npm/commit/dcdfdcbb0035ef3290bd0912f562e26f6fc4ea94"><code>dcdfdcbb0</code></a> <a href="https://github.com/npm/npm/pull/19192">#19192</a> Document <code>--development</code> flag in <code>npm-ls.md</code>. (<a href="https://github.com/WispProxy">@WispProxy</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d7ff07135a685dd89c15e29d6a28fca33cf448b0"><code>d7ff07135</code></a> <a href="https://github.com/npm/npm/pull/18514">#18514</a> Make it so <code>javascript</code> -&gt; <code>JavaScript</code>. This is important. (<a href="https://github.com/masonpawsey">@masonpawsey</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7a870511327d31e8921d6afa845ec8065c60064b"><code>7a8705113</code></a> <a href="https://github.com/npm/npm/pull/18407">#18407</a> Clarify the mechanics of the <code>file</code> field in <code>package.json</code> a bit. (<a href="https://github.com/bmacnaughton">@bmacnaughton</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b2a1cf0844ceaeb51ed04f3ae81678527ec9ae68"><code>b2a1cf084</code></a> <a href="https://github.com/npm/npm/pull/18382">#18382</a> Document the <a href="https://github.com/defunctzombie/package-browser-field-spec"><code>browser</code> field</a> in <code>package.json</code>. (<a href="https://github.com/mxstbr">@mxstbr</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4272"></a>
MISC</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/b8a48a9595b379cfc2a2c576f61062120ea0caf7"><code>b8a48a959</code></a> <a href="https://github.com/npm/npm/pull/19907">#19907</a> Consolidate code for stringifying <code>package.json</code> and package locks. Also adds tests have been added to test that <code>package[-lock].json</code> files are written to disk with their original line endings. (<a href="https://github.com/nwoltman">@nwoltman</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b4f707d9f543f0995ed5811827a892fc8b2192b5"><code>b4f707d9f</code></a> <a href="https://github.com/npm/npm/pull/19879">#19879</a> Remove unused devDependency <code>nock</code> from <code>.gitignore</code>. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8150dd5f72520eb143f75e44787a5775bd8b8ebc"><code>8150dd5f7</code></a> <a href="https://github.com/npm/npm/pull/16540">#16540</a> Stop doing an <code>uninstall</code> when using <code>make clean</code>. (<a href="https://github.com/metux">@metux</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4273"></a>
OTHER DEPENDENCY BUMPS</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/ab237a2a5dcf70ee490e2f0322dfedb1560251d4"><code>ab237a2a5</code></a> <code>init-package-json@1.10.3</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f6d6689414f00a67a1f34afc6791bdc7d7be4d9b"><code>f6d668941</code></a> <code>npm-lifecycle@2.0.1</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/882bfbdfaa3eb09b35875e648545cb6967f72562"><code>882bfbdfa</code></a> <code>npm-registry-client@8.5.1</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6ae38055ba69db5785ee6c394372de0333763822"><code>6ae38055b</code></a> <code>read-package-json@2.0.1</code>: Support git packed refs <code>--all</code> mode. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/89db703ae4e25b9fb6c9d7c5119520107a23a752"><code>89db703ae</code></a> <code>readable-stream@2.3.5</code> (<a href="https://github.com/mcollina">@mcollina</a>)</li>
<li><a href="https://github.com/npm/npm/commit/634dfa5f476b7954b136105a8f9489f5631085a3"><code>634dfa5f4</code></a> <code>worker-farm@1.5.4</code> (<a href="https://github.com/rvagg">@rvagg</a>)</li>
<li><a href="https://github.com/npm/npm/commit/92ad344399f7a23e308d0f3f02547656a47ae6c5"><code>92ad34439</code></a> <code>hosted-git-info@2.6.0</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/75279c4884d02bd7d451b66616e320eb8cb03bcb"><code>75279c488</code></a> <code>tar@4.4.0</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/228aba276b19c987cd5989f9bb9ffbe25edb4030"><code>228aba276</code></a> <code>write-file-atomic@2.3.0</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/006e9d272914fc3ba016f110b1411dd20f8a937d"><code>006e9d272</code></a> <code>libnpx@10.0.1</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9985561e666473deeb352c1d4252adf17c2fa01d"><code>9985561e6</code></a> <code>mississippi@3.0.0</code> (<a href="https://github.com/bcomnes">@bcomnes</a>)</li>
<li><a href="https://github.com/npm/npm/commit/1dc6b3b525967bc8526aa4765e987136cb570e8e"><code>1dc6b3b52</code></a> <code>tap@11.1.2</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4274"></a>
v5.7.1 (2018-02-22):</h1>
<p>This release reverts a patch that could cause some ownership changes on system files when running from some directories when also using <code>sudo</code>. 😲</p>
<p>Thankfully, it only affected users running <code>npm@next</code>, which is part of our staggered release system, which we use to prevent issues like this from going out into the wider world before we can catch them. Users on <code>latest</code> would have never seen this!</p>
<p>The original patch was added to increase consistency and reliability of methods npm uses to avoid writing files as <code>root</code> in places it shouldn't, but the change was applied in places that should have used regular <code>mkdirp</code>. This release reverts that patch.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/74e149da6efe6ed89477faa81fef08eee7999ad0"><code>74e149da6</code></a> <a href="https://github.com/npm/npm/issue/19883"><code>#19883</code></a> Revert "*: Switch from mkdirp to correctMkdir to preserve perms and owners" This reverts commit <a href="https://github.com/npm/npm/commit/94227e15eeced836b3d7b3d2b5e5cc41d4959cff"><code>94227e15</code></a>. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4275"></a>
v5.7.0 (2018-02-20):</h1>
<p>Hey y'all, it's been a while. Expect our release rate to increase back to normal here, as we've got a lot in the pipeline. Right now we've got a bunch of things from folks at npm. In the next release we'll be focusing on user contributions and there are a lot of them queued up!</p>
<p>This release brings a bunch of exciting new features and bug fixes.</p>
<h2><a class="anchor" id="autotoc_md4276"></a>
PACKAGE-LOCK GIT MERGE CONFLICT RESOLUTION</h2>
<p>Allow <code>npm install</code> to fix <code>package-lock.json</code> and <code>npm-shrinkwrap.json</code> files that have merge conflicts in them without your having to edit them. It works in conjunction with <a href="https://www.npmjs.com/package/npm-merge-driver"><code>npm-merge-driver</code></a> to entirely eliminate package-lock merge conflicts.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/e27674c221dc17473f23bffa50123e49a021ae34"><code>e27674c22</code></a> Automatically resolve merge conflicts in lock-files. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4277"></a>
NPM CI</h2>
<p>The new <code>npm ci</code> command installs from your lock-file ONLY. If your <code>package.json</code> and your lock-file are out of sync then it will report an error.</p>
<p>It works by throwing away your <code>node_modules</code> and recreating it from scratch.</p>
<p>Beyond guaranteeing you that you'll only get what is in your lock-file it's also much faster (2x-10x!) than <code>npm install</code> when you don't start with a <code>node_modules</code>.</p>
<p>As you may take from the name, we expect it to be a big boon to continuous integration environments. We also expect that folks who do production deploys from git tags will see major gains.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/5e4de9c99c934e25ef7b9c788244cc3c993da559"><code>5e4de9c99</code></a> Add new <code>npm ci</code> installer. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4278"></a>
OTHER NEW FEATURES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/4d418c21b051f23a3b6fb085449fdf4bf4f826f5"><code>4d418c21b</code></a> <a href="https://github.com/npm/npm/pull/19817">#19817</a> Include contributor count in installation summary. (<a href="https://github.com/kemitchell">@kemitchell</a>)</li>
<li><a href="https://github.com/npm/npm/commit/17079c2a880d3a6f8a67c8f17eedc7eb51b8f0f8"><code>17079c2a8</code></a> Require password to change email through <code>npm profile</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e7c5d226ac0ad3da0e38f16721c710909d0a9847"><code>e7c5d226a</code></a> <a href="https://github.com/npm/npm/commit/4f5327c0556764aa1bbc9b58b1a8c8a84136c56a"><code>4f5327c05</code></a> <a href="https://github.com/npm/npm/pull/19780">#19780</a> Add support for web-based logins. This is not yet available on the registry, however. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4279"></a>
BIG FIXES TO PRUNING</h2>
<ul>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/8279515903cfa3026cf7096189485cdf29f74a8f"><code>827951590</code></a> Handle running <code>npm install package-name</code> with a <code>node_modules</code> containing packages without sufficient metadata to verify their origin. The only way to get install packages like this is to use a non-<code>npm</code> package manager. Previously <code>npm</code> removed any packages that it couldn't verify. Now it will leave them untouched as long as you're not asking for a full install. On a full install they will be reinstalled (but the same versions will be maintained).</p>
<p class="startli">This will fix problems for folks who are using a third party package manager to install packages that have <code>postinstall</code> scripts that run <code>npm install</code>. (<a href="https://github.com/iarna">@iarna</a>)</p>
</li>
<li><a href="https://github.com/npm/npm/commit/3b305ee71e2bf852ff3037366a1774b8c5fcc0a5"><code>3b305ee71</code></a> Only auto-prune on installs that will create a lock-file. This restores <code>npm@4</code> compatible behavior when the lock-file is disabled. When using a lock-file <code>npm</code> will continue to remove anything in your <code>node_modules</code> that's not in your lock-file. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/cec5be5427f7f5106a905de8630e1243e9b36ef4"><code>cec5be542</code></a> Fix bug where <code>npm prune --production</code> would remove dev deps from the lock file. It will now only remove them from <code>node_modules</code> not from your lock file. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/857dab03f2d58586b45d41d3e5af0fb2d4e824d0"><code>857dab03f</code></a> Fix bug where git dependencies would be removed or reinstalled when installing other dependencies. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4280"></a>
BUG FIXES TO TOKENS AND PROFILES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/a66e0cd0314893b745e6b9f6ca1708019b1d7aa3"><code>a66e0cd03</code></a> For CIDR filtered tokens, allow comma separated CIDR ranges, as documented. Previously you could only pass in multiple cidr ranges with multiple <code>--cidr</code> command line options. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d259ab014748634a89cad5b20eb7a40f3223c0d5"><code>d259ab014</code></a> Fix token revocation when an OTP is required. Previously you had to pass it in via <code>--otp</code>. Now it will prompt you for an OTP like other <code>npm token</code> commands. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f8b1f6aecadd3b9953c2b8b05d15f3a9cff67cfd"><code>f8b1f6aec</code></a> Update token and profile commands to support legacy (username/password) authentication. (The npm registry uses tokens, not username/password pairs, to authenticate commands.) (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4281"></a>
OTHER BUG FIXES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/6954dfc192f88ac263f1fcc66cf820a21f4379f1"><code>6954dfc19</code></a> Fix a bug where packages would get pushed deeper into the tree when upgrading without an existing copy on disk. Having packages deeper in the tree ordinarily is harmless but is not when peerDependencies are in play. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/1ca916a1e9cf94691d1ff2e5e9d0204cfaba39e1"><code>1ca916a1e</code></a> Fix bug where when switching from a linked module to a non-linked module, the dependencies of the module wouldn't be installed on the first run of <code>npm install</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8c120ebb28e87bc6fe08a3fad1bb87b50026a33a"><code>8c120ebb2</code></a> Fix integrity matching to eliminate spurious EINTEGRITY errors. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/94227e15eeced836b3d7b3d2b5e5cc41d4959cff"><code>94227e15e</code></a> More consistently make directories using perm and ownership preserving features. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4282"></a>
DEPENDENCY UPDATES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/364b23c7f8a231c0df3866d6a8bde4d3f37bbc00"><code>364b23c7f</code></a> <a href="https://github.com/npm/npm/commit/f2049f9e7992e6edcfce8619b59746789367150f"><code>f2049f9e7</code></a> <code>cacache@10.0.4</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d183d76757e8a29d63a999d7fb4edcc1486c25c1"><code>d183d7675</code></a> <code>find-npm-prefix@1.0.2</code>: (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ffd6ea62ce583baff38cf4901cf599639bc193c8"><code>ffd6ea62c</code></a> <code>fs-minipass@1.2.5</code></li>
<li><a href="https://github.com/npm/npm/commit/ee63b8a311ac53b0cf2efa79babe61a2c4083ef6"><code>ee63b8a31</code></a> <code>ini@1.3.5</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6f73f5509e9e8d606526565c7ceb71c62642466e"><code>6f73f5509</code></a> <code>JSONStream@1.3.2</code> (<a href="https://github.com/dominictarr">@dominictarr</a>)</li>
<li><a href="https://github.com/npm/npm/commit/26cd648697c1324979289e381fe837f9837f3874"><code>26cd64869</code></a> <a href="https://github.com/npm/npm/commit/9bc6230cf34a09b7e4358145ff0ac3c69c23c3f6"><code>9bc6230cf</code></a> <code>libcipm@1.3.3</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/21a39be4241a60a898d11a5967f3fc9868ef70c9"><code>21a39be42</code></a> <code>marked@0.3.1</code>:5 (<a href="https://github.com/joshbruce">@joshbruce</a>)</li>
<li><a href="https://github.com/npm/npm/commit/dabdf57b2d60d665728894b4c1397b35aa9d41c0"><code>dabdf57b2</code></a> <code>mississippi@2.0.0</code></li>
<li><a href="https://github.com/npm/npm/commit/2594c586723023edb1db172779afb2cbf8b30c08"><code>2594c5867</code></a> <code>npm-registry-couchapp@2.7.1</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8abb3f230f119fe054353e70cb26248fc05db0b9"><code>8abb3f230</code></a> <code>osenv@0.1.5</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/11a0b00bd3c18625075dcdf4a5cb6500b33c6265"><code>11a0b00bd</code></a> <code>pacote@7.3.3</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9b6bdb2c77e49f6d473e70de4cd83c58d7147965"><code>9b6bdb2c7</code></a> <code>query-string@5.1.0</code> (<a href="https://github.com/sindresorhus">@sindresorhus</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d6d17d6b532cf4c3461b1cf2e0404f7c62c47ec4"><code>d6d17d6b5</code></a> <code>readable-stream@2.3.4</code> (<a href="https://github.com/mcollina">@mcollina</a>)</li>
<li><a href="https://github.com/npm/npm/commit/51370aad561b368ccc95c1c935c67c8cd2844d40"><code>51370aad5</code></a> <code>semver@5.5.0</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0db14bac762dd59c3fe17c20ee96d2426257cdd5"><code>0db14bac7</code></a> <a href="https://github.com/npm/npm/commit/81da938ab6efb881123cdcb44f7f84551924c988"><code>81da938ab</code></a> <a href="https://github.com/npm/npm/commit/9999e83f87c957113a12a6bf014a2099d720d716"><code>9999e83f8</code></a> <code>ssri@5.2.4</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f526992ab6f7322a0b3a8d460dc48a2aa4a59a33"><code>f526992ab</code></a> <code>tap@11.1.1</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/be096b4090e2a33ae057912d28fadc5a53bd3391"><code>be096b409</code></a> <a href="https://github.com/npm/npm/commit/dc3059522758470adc225f0651be72c274bd29ef"><code>dc3059522</code></a> <code>tar@4.3.3</code></li>
<li><a href="https://github.com/npm/npm/commit/6b552daac952f413ed0e2df762024ad219a8dc0a"><code>6b552daac</code></a> <code>uuid@3.2.1</code> (<a href="https://github.com/broofa">@broofa</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8c9011b724ad96060e7e82d9470e9cc3bb64e9c6"><code>8c9011b72</code></a> <code>worker-farm@1.5.2</code> (<a href="https://github.com/rvagg">@rvagg</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4283"></a>
v5.6.0 (2017-11-27):</h1>
<h2><a class="anchor" id="autotoc_md4284"></a>
Features!</h2>
<p>You may have noticed this is a semver-minor bump. Wondering why? This is why!</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/bc263c3fde6ff4b04deee132d0a9d89379e28c27"><code>bc263c3fd</code></a> <a href="https://github.com/npm/npm/pull/19054">#19054</a> <b>Fully cross-platform <code>package-lock.json</code></b>. Installing a failing optional dependency on one platform no longer removes it from the dependency tree, meaning that <code>package-lock.json</code> should now be generated consistently across platforms! 🎉 (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f94fcbc50d8aec7350164df898d1e12a1e3da77f"><code>f94fcbc50</code></a> <a href="https://github.com/npm/npm/pull/19160">#19160</a> Add <code>--package-lock-only</code> config option. This makes it so you can generate a target <code>package-lock.json</code> without performing a full install of <code>node_modules</code>. (<a href="https://github.com/alopezsanchez">@alopezsanchez</a>)</li>
<li><a href="https://github.com/npm/npm/commit/66d18280ca320f880f4377cf80a8052491bbccbe"><code>66d18280c</code></a> <a href="https://github.com/npm/npm/pull/19104">#19104</a> Add new <code>--node-options</code> config to pass through a custom <code>NODE_OPTIONS</code> for lifecycle scripts. (<a href="https://github.com/bmeck">@bmeck</a>)</li>
<li><a href="https://github.com/npm/npm/commit/114d518c75732c42acbef3acab36ba1d0fd724e2"><code>114d518c7</code></a> Ignore mtime when packing tarballs: This means that doing <code>npm pack</code> on the same repository should yield two tarballs with the same checksum. This will also help prevent cache bloat when using git dependencies. In the future, this will allow npm to explicitly cache git dependencies. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4285"></a>
Node 9</h2>
<p>Previously, it turns out npm broke on the latest Node, <code>node@9</code>. We went ahead and fixed it up so y'all should be able to use the latest npm again!</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/4ca6958196ae41cef179473e3f7dbed9df9a32f1"><code>4ca695819</code></a> <code>minizlib@1.0.4</code>: <code>Fix node@9</code> incompatibility. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c851bb503a756b7cd48d12ef0e12f39e6f30c577"><code>c851bb503</code></a> <code>tar@4.0.2</code>: Fix <code>node@9</code> incompatibility. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6caf2309613d14ce77923ad3d1275cb89c6cf223"><code>6caf23096</code></a> Remove "unsupported" warning for Node 9 now that things are fixed. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/1930b0f8c44373301edc9fb6ccdf7efcb350fa42"><code>1930b0f8c</code></a> Update test matrix with <code>node@8</code> LTS and <code>node@9</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4286"></a>
Bug Fixes</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/b7032173361665a12c9e4200bdc3f0eb4dee682f"><code>b70321733</code></a> <a href="https://github.com/npm/npm/pull/18881">#18881</a> When dealing with a <code>node_modules</code> that was created with older versions of npm (and thus older versions of npa) we need to gracefully handle older spec entries. Failing to do so results in us treating those packages as if they were http remote deps, which results in invalid lock files with <code>version</code> set to tarball URLs. This should now be fixed. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2f9c5dd0046a53ece3482e92a412413f5aed6955"><code>2f9c5dd00</code></a> <a href="https://github.com/npm/npm/pull/18880">#18880</a> Stop overwriting version in package data on disk. This is another safeguard against the version overwriting that's plagued some folks upgrading from older package-locks. (<a href="https://github.com/iarna">@iarna</a>) (<a href="https://github.com/joshclow">@joshclow</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a93e0a51d3dafc31c809ca28cd7dfa71b2836f86"><code>a93e0a51d</code></a> <a href="https://github.com/npm/npm/pull/18846">#18846</a> Correctly save transitive dependencies when using <code>npm update</code> in <code>package-lock.json</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/fdde7b649987b2acd9a37ef203f1e263fdf6fece"><code>fdde7b649</code></a> <a href="https://github.com/npm/npm/pull/18825">#18825</a> Fix typo and concatenation in error handling. (<a href="https://github.com/alulsh">@alulsh</a>)</li>
<li><a href="https://github.com/npm/npm/commit/be67de7b90790cef0a9f63f91c2f1a00942205ee"><code>be67de7b9</code></a> <a href="https://github.com/npm/npm/pull/18711">#18711</a> Upgrade to bearer tokens from legacy auth when enabling 2FA. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/bfdf0fd39646b03db8e543e2bec7092da7880596"><code>bfdf0fd39</code></a> <a href="https://github.com/npm/npm/pull/19033">#19033</a> Fix issue where files with <code>@</code> signs in their names would not get included when packing tarballs. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b65b89bdeaa65516f3e13afdb6e9aeb22d8508f4"><code>b65b89bde</code></a> <a href="https://github.com/npm/npm/pull/19048">#19048</a> Fix problem where <code>npm login</code> was ignoring various networking-related options, such as custom certs. (<a href="https://github.com/wejendorp">@wejendorp</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8c194b86ec9617e2bcc31f30ee4772469a0bb440"><code>8c194b86e</code></a> <code>npm-packlist@1.1.10</code>: Include <code>node_modules/</code> directories not in the root. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d7ef6a20b44e968cb92babab1beb51f99110781d"><code>d7ef6a20b</code></a> <code>libnpx@9.7.1</code>: Fix some *nix binary path escaping issues. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/981828466a5936c70abcccea319b227c443e812b"><code>981828466</code></a> <code>cacache@10.0.1</code>: Fix fallback to <code>copy-concurrently</code> when file move fails. This might fix permissions and such issues on platforms that were getting weird filesystem errors during install. (<a href="https://github.com/karolba">@karolba</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a0be6bafb6dd7acb3e7b717c27c8575a2215bfff"><code>a0be6bafb</code></a> <code>pacote@7.0.2</code>: Includes a bunch of fixes, specially for issues around git dependencies. Shasum-related errors should be way less common now, too. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b80d650def417645d2525863e9f17af57a917b42"><code>b80d650de</code></a> <a href="https://github.com/npm/npm/pull/19163">#19163</a> Fix a number of git and tarball specs and checksum errors. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/cac225025fa06cd055286e75541138cd95f52def"><code>cac225025</code></a> <a href="https://github.com/npm/npm/pull/19054">#19054</a> Don't count failed optionals when summarizing installed packages. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4287"></a>
UX</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/b1ec2885c43f8038c4e05b83253041992fdfe382"><code>b1ec2885c</code></a> <a href="https://github.com/npm/npm/pull/18326">#18326</a> Stop truncating output of <code>npm view</code>. This means, for example, that you no longer need to use <code>--json</code> when a package has a lot of versions, to see the whole list. (<a href="https://github.com/SimenB">@SimenB</a>)</li>
<li><a href="https://github.com/npm/npm/commit/55a124e0aa6097cb46f1484f666444b2a445ba57"><code>55a124e0a</code></a> <a href="https://github.com/npm/npm/pull/18884">#18884</a> Profile UX improvements: better messaging on unexpected responses, and stop claiming we set passwords to null when resetting them. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/635481c6143bbe10a6f89747795bf4b83f75a7e9"><code>635481c61</code></a> <a href="https://github.com/npm/npm/pull/18844">#18844</a> Improve error messaging for OTP/2FA. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/52b142ed5e0f13f23c99209932e8de3f7649fd47"><code>52b142ed5</code></a> <a href="https://github.com/npm/npm/pull/19054">#19054</a> Stop running the same rollback multiple times. This should address issues where Windows users saw strange failures when <code>fsevents</code> failed to install. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/798428b0b7b6cfd6ce98041c45fc0a36396e170c"><code>798428b0b</code></a> <a href="https://github.com/npm/npm/pull/19172">#19172</a> <code>bin-links@1.1.0</code>: Log the fact line endings are being changed upon install. (<a href="https://github.com/marcosscriven">@marcosscriven</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4288"></a>
Refactors</h2>
<p>Usually, we don't include internal refactor stuff in our release notes, but it's worth calling out some of them because they're part of a larger effort the CLI team and associates are undertaking to modularize npm itself so other package managers and associated tools can reuse all that code!</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/9d22c96b7160729c8126a38dcf554611b9e3ba87"><code>9d22c96b7</code></a> <a href="https://github.com/npm/npm/pull/18500">#18500</a> Extract bin-links and gentle-fs to a separate library. This will allow external tools to do bin linking and certain fs operations in an npm-compatible way! (<a href="https://github.com/mikesherov">@mikesherov</a>)</li>
<li><a href="https://github.com/npm/npm/commit/015a7803b7b63bc8543882196d987b92b461932d"><code>015a7803b</code></a> <a href="https://github.com/npm/npm/pull/18883">#18883</a> Capture logging from log events on the process global. This allows npm to use npmlog to report logging from external libraries like <code>npm-profile</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c930e98adc03cef357ae5716269a04d74744a852"><code>c930e98ad</code></a> <code>npm-lifecycle@2.0.0</code>: Use our own <code>node-gyp</code>. This means npm no longer needs to pull some maneuvers to make sure <code>node-gyp</code> is in the right place, and that external packages using <code>npm-lifecycle</code> will get working native builds without having to do their own <code>node-gyp</code> maneuvers. (<a href="https://github.com/zkochan">@zkochan</a>)</li>
<li><a href="https://github.com/npm/npm/commit/876f0c8f341f8915e338b409f4b8616bb5263500"><code>876f0c8f3</code></a> <a href="https://github.com/npm/npm/commit/829893d617bf81bba0d1ce4ea303f76ea37a2b2d"><code>829893d61</code></a> <a href="https://github.com/npm/npm/pull/19099">#19099</a> <code>find-npm-prefix@1.0.1</code>: npm's prefix-finding logic is now a standalone module. That is, the logic that figures out where the root of your project is if you've <code>cd</code>'d into a subdirectory. Did you know you can run <code>npm install</code> from these subdirectories, and it'll only affect the root? It works like git! (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4289"></a>
Docs</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/7ae12b21cc841f76417d3bb13b74f177319d4deb"><code>7ae12b21c</code></a> <a href="https://github.com/npm/npm/pull/18823">#18823</a> Fix spelling of the word authenticator. Because English is hard. (<a href="https://github.com/tmcw">@tmcw</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5dfc3ab7bc2cb0fa7d9a8c00aa95fecdd14d7ae1"><code>5dfc3ab7b</code></a> <a href="https://github.com/npm/npm/pull/18742">#18742</a> Explicitly state 'github:foo/bar' as a valid shorthand for hosted git specs. (<a href="https://github.com/felicio">@felicio</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a9dc098a6eb7a87895f52a101ac0d41492da698e"><code>a9dc098a6</code></a> <a href="https://github.com/npm/npm/pull/18679">#18679</a> Add some documentation about the <code>script-shell</code> config. (<a href="https://github.com/gszabo">@gszabo</a>)</li>
<li><a href="https://github.com/npm/npm/commit/24d7734d1a1e906c83c53b6d1853af8dc758a998"><code>24d7734d1</code></a> <a href="https://github.com/npm/npm/pull/18571">#18571</a> Change <code>verboten</code> to <code>forbidden</code>. (<a href="https://github.com/devmount">@devmount</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a8a45668fb9b8eb84234fe89234bdcdf644ead58"><code>a8a45668f</code></a> <a href="https://github.com/npm/npm/pull/18568">#18568</a> Improve wording for the docs for the "engines" section of package.json files. (<a href="https://github.com/apitman">@apitman</a>)</li>
<li><a href="https://github.com/npm/npm/commit/dbc7e5b602870330a8cdaf63bd303cd9050f792f"><code>dbc7e5b60</code></a> <a href="https://github.com/npm/npm/pull/19118">#19118</a> Use valid JSON in example for bundledDependencies. (<a href="https://github.com/charmander">@charmander</a>)</li>
<li><a href="https://github.com/npm/npm/commit/779339485bab5137d0fdc68d1ed6fa987aa8965a"><code>779339485</code></a> <a href="https://github.com/npm/npm/pull/19162">#19162</a> Remove trailing white space from <code>npm access</code> docs. (<a href="https://github.com/WispProxy">@WispProxy</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4290"></a>
Dependency Bumps</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/0e7cac9413ff1104cf242cc3006f42aa1c2ab63f"><code>0e7cac941</code></a> <code>bluebird@3.5.1</code> (<a href="https://github.com/petkaantonov">@petkaantonov</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c4d5887d978849ddbe2673630de657f141ae5bcf"><code>c4d5887d9</code></a> <code>update-notifier@2.3.0</code> (<a href="https://github.com/sindresorhus">@sindresorhus</a>)</li>
<li><a href="https://github.com/npm/npm/commit/eb19a9691cf76fbc9c5b66aa7aadb5d905af467a"><code>eb19a9691</code></a> <code>npm-package-arg@6.0.0</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/91d5dca96772bc5c45511ddcbeeb2685c7ea68e8"><code>91d5dca96</code></a> <code>npm-profile@2.0.5</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8de66c46e57e4b449c9540c8ecafbc4fd58faff5"><code>8de66c46e</code></a> <code>ssri@5.0.0</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/cfbc3ea69a8c62dc8e8543193c3ac472631dcef9"><code>cfbc3ea69</code></a> <code>worker-farm@1.5.1</code> (<a href="https://github.com/rvagg">@rvagg</a>)</li>
<li><a href="https://github.com/npm/npm/commit/60c228160f22d41c2b36745166c9e8c2d84fee58"><code>60c228160</code></a> <code>query-string@5.0.1</code> (<a href="https://github.com/sindresorhus">@sindresorhus</a>)</li>
<li><a href="https://github.com/npm/npm/commit/72cad8c664efd8eb1bec9a418bccd6c6ca9290de"><code>72cad8c66</code></a> <code>copy-concurrently@1.0.5</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4291"></a>
v5.5.1 (2017-10-04):</h1>
<p>A very quick, record time, patch release, of a bug fix to a (sigh) last minute bug fix.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/e628e058b"><code>e628e058b</code></a> Fix login to properly recognize OTP request and store bearer tokens. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4292"></a>
v5.5.0 (2017-10-04):</h1>
<p>Hey y'all, this is a big new feature release! We've got some security related goodies plus a some quality-of-life improvements for anyone who uses the public registry (so, virtually everyone).</p>
<p>The changes largely came together in one piece, so I'm just gonna leave the commit line here:</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/f6ebf5e8bd6a212c7661e248c62c423f2b54d978"><code>f6ebf5e8b</code></a> <a href="https://github.com/npm/npm/commit/f97ad6a38412581d059108ea29be470acb4fa510"><code>f97ad6a38</code></a> <a href="https://github.com/npm/npm/commit/f644018e6ef1ff7523c6ec60ae55a24e87a9d9ae"><code>f644018e6</code></a> <a href="https://github.com/npm/npm/commit/8af91528ce6277cd3a8c7ca8c8102671baf10d2f"><code>8af91528c</code></a> <a href="https://github.com/npm/npm/commit/346a34260b5fba7de62717135f3e083cc4820853"><code>346a34260</code></a> Two factor authentication, profile editing and token management. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4293"></a>
TWO FACTOR AUTHENTICATION</h2>
<p>You can now enable two-factor authentication for your npm account. You can even do it from the CLI. In fact, you have to, for the time being:</p>
<div class="fragment"><div class="line">npm profile enable-tfa</div>
</div><!-- fragment --><p>With the default two-factor authentication mode you'll be prompted to enter a one-time password when logging in, when publishing and when modifying access rights to your modules.</p>
<h2><a class="anchor" id="autotoc_md4294"></a>
TOKEN MANAGEMENT</h2>
<p>You can now create, list and delete authentication tokens from the comfort of the command line. Authentication tokens created this way can have NEW restrictions placed on them. For instance, you can create a <code>read-only</code> token to give to your CI. It will be able to download your private modules but it won't be able to publish or modify modules. You can also create tokens that can only be used from certain network addresses. This way you can lock down access to your corporate VPN or other trusted machines.</p>
<p>Deleting tokens isn't new, you could <a href="https://www.npmjs.com/settings/tokens">do it via the website</a> but now you can do it via the CLI as well.</p>
<h2><a class="anchor" id="autotoc_md4295"></a>
CHANGE YOUR PASSWORD, SET YOUR EMAIL</h2>
<p>You can finally change your password from the CLI with <code>npm profile set password</code>! You can also update your email address with <code>npm profile set email &lt;address&gt;</code>. If you change your email address we'll send you a new verification email so you verify that its yours.</p>
<h2><a class="anchor" id="autotoc_md4296"></a>
AND EVERYTHING ELSE ON YOUR PROFILE</h2>
<p>You can also update all of the other attributes of your profile that previously you could only update via the website: <code>fullname</code>, <code>homepage</code>, <code>freenode</code>, <code>twitter</code> and <code>github</code>.</p>
<h2><a class="anchor" id="autotoc_md4297"></a>
AVAILABLE STAND ALONE</h2>
<p>All of these features were implemented in a stand alone library, so if you have use for them in your own project you can find them in <a href="https://www.npmjs.com/package/npm-profile">npm-profile</a> on the registry. There's also a little mini-cli written just for it at <a href="https://www.npmjs.com/package/npm-profile-cli">npm-profile-cli</a>. You might also be interested in the <a href="https://github.com/npm/registry/tree/master/docs">API documentation</a> for these new features: <a href="https://github.com/npm/registry/blob/master/docs/user/profile.md">user profile editing</a> and <a href="https://github.com/npm/registry/blob/master/docs/user/authentication.md">authentication</a>.</p>
<h2><a class="anchor" id="autotoc_md4298"></a>
BUG FIXES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/5ee55dc71b8b74b8418c3d5ec17483a07b3b6777"><code>5ee55dc71</code></a> install.sh: Drop support for upgrading from npm@1 as npm@5 can't run on any Node.js version that ships npm@1. This fixes an issue some folks were seeing when trying to upgrade using <code>curl | <a href="http://npmjs.com/install.sh">http://npmjs.com/install.sh</a></code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5cad1699a7a0fc85ac7f77a95087a9647f75e344"><code>5cad1699a</code></a> <code>npm-lifecycle@1.0.3</code> Fix a bug where when more than one lifecycle script got queued to run, npm would crash. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/cd256cbb2f97fcbcb82237e94b66eac80e493626"><code>cd256cbb2</code></a> <code>npm-packlist@1.1.9</code> Fix a bug where test directories would always be excluded from published modules. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2a11f021561acb1eb1ad4ad45ad955793b1eb4af"><code>2a11f0215</code></a> Fix formatting of unsupported version warning (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4299"></a>
DEPENDENCY UPDATES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/6d2a285a58655f10834f64d38449eb1f3c8b6c47"><code>6d2a285a5</code></a> <code>npm-registry-client@8.5.0</code></li>
<li><a href="https://github.com/npm/npm/commit/69e64e27bf58efd0b76b3cf6e8182c77f8cc452f"><code>69e64e27b</code></a> <code>request@2.83.0</code></li>
<li><a href="https://github.com/npm/npm/commit/34e0f42090f6153eb5462f742e402813e4da56c8"><code>34e0f4209</code></a> <code>abbrev@1.1.1</code></li>
<li><a href="https://github.com/npm/npm/commit/10d31739d39765f1f0249f688bd934ffad92f872"><code>10d31739d</code></a> <code>aproba@1.2.0</code></li>
<li><a href="https://github.com/npm/npm/commit/2b02e86c06cf2a5fe7146404f5bfd27f190ee4f4"><code>2b02e86c0</code></a> <code>meant@1.0.1</code></li>
<li><a href="https://github.com/npm/npm/commit/b81fff808ee269361d3dcf38c1b6019f1708ae02"><code>b81fff808</code></a> <code>rimraf@2.6.2</code>: Fixes a long standing bug in rimraf's attempts to work around Windows limitations where it owns a file and can change its perms but can't remove it without first changing its perms. This <em>may</em> be an improvement for Windows users of npm under some circumstances. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4300"></a>
v5.4.2 (2017-09-14):</h1>
<p>This is a small bug fix release wrapping up most of the issues introduced with 5.4.0.</p>
<h2><a class="anchor" id="autotoc_md4301"></a>
Bugs</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/0b28ac72d29132e9b761717aba20506854465865"><code>0b28ac72d</code></a> <a href="https://github.com/npm/npm/pull/18458">#18458</a> Fix a bug on Windows where rolling back of failed optional dependencies would fail. (<a href="https://github.com/marcins">@marcins</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3a1b299913ce94fdf25ed3ae5c88fe6699b04e24"><code>3a1b29991</code></a> <code>write-file-atomic@2.1.0</code> Revert update of <code>write-file-atomic</code>. There were changes made to it that were resulting in EACCES errors for many users. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/cd8687e1257f59a253436d69e8d79a29c85d00c8"><code>cd8687e12</code></a> Fix a bug where if npm decided it needed to move a module during an upgrade it would strip out much of the <code>package.json</code>. This would result in broken trees after package updates.</li>
<li><a href="https://github.com/npm/npm/commit/5bd0244eec347ce435e88ff12148c35da7c69efe"><code>5bd0244ee</code></a> <a href="https://github.com/npm/npm/pull/18385">#18385</a> Fix <code>npm outdated</code> when run on non-registry dependencies. (<a href="https://github.com/joshclow">@joshclow</a>) (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4302"></a>
Ux</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/339f17b1e6816eccff7df97875db33917eccdd13"><code>339f17b1e</code></a> Report unsupported node versions with greater granularity. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4303"></a>
Docs</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/b2ab6f43b8ae645134238acd8dd3083e5ba8846e"><code>b2ab6f43b</code></a> <a href="https://github.com/npm/npm/pull/18397">#18397</a> Document that the default loglevel with <code>npm@5</code> is <code>notice</code>. (<a href="https://github.com/KenanY">@KenanY</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e5aedcd82af81fa9e222f9210f6f890c72a18dd3"><code>e5aedcd82</code></a> <a href="https://github.com/npm/npm/pull/18372">#18372</a> In npm-config documentation, note that env vars use _ in place of -. (<a href="https://github.com/jakubholynet">@jakubholynet</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4304"></a>
v5.4.1 (2017-09-06):</h1>
<p>This is a very small bug fix release to fix a problem where permissions on installed binaries were being set incorrectly.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/767ff6eee7fa3a0f42ad677dedc0ec1f0dc15e7c"><code>767ff6eee</code></a> <a href="https://github.com/zkat/pacote/pull/117">zkat/pacote#117</a> <a href="https://github.com/npm/npm/issues/18324">#18324</a> <code>pacote@6.0.2</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4305"></a>
v5.4.0 (2017-08-22):</h1>
<p>Here's another <strike>small</strike> big release, with a <strike>handful</strike> bunch of fixes and a couple of <strike>small</strike> new features! This release has been incubating rather longer than usual and it's grown quite a bit in that time. I'm also excited to say that it has contributions from <b>27</b> different folks, which is a new record for us. Our previous record was 5.1.0 at 21. Before that the record had been held by 1.3.16 since <em>December of 2013</em>.</p>
<p><img src="https://pbs.twimg.com/media/DH38rbZUwAAf9hS.jpg" alt="chart of contributor counts by version, showing an increasing rate over time and spikes mid in the 1.x series and later at 5.x" class="inline"/></p>
<p>If you can't get enough of the bleeding edge, I encourage you to check out our canary release of npm. Get it with <code>npm install -g npmc</code>. It's going to be seeing some exciting stuff in the next couple of weeks, starting with a rewritten <code>npm dedupe</code>, but moving on to… well, you'll just have to wait and find out.</p>
<h2><a class="anchor" id="autotoc_md4306"></a>
PERFORMANCE</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/d080379f620c716afa2c1d2e2ffc0a1ac3459194"><code>d080379f6</code></a> <code>pacote@6.0.1</code> Updates extract to use tar@4, which is much faster than the older tar@2. It reduces install times by as much as 10%. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4cd6a1774f774506323cae5685c9ca9a10deab63"><code>4cd6a1774</code></a> <a href="https://github.com/npm/npm/commit/0195c0a8cdf816834c2f737372194ddc576c451d"><code>0195c0a8c</code></a> <a href="https://github.com/npm/npm/pull/16804">#16804</a> <code>tar@4.0.1</code> Update publish to use tar@4. tar@4 brings many advantages over tar@2: It's faster, better tested and easier to work with. It also produces exactly the same byte-for-byte output when producing tarballs from the same set of files. This will have some nice carry on effects for things like caching builds from git. And finally, last but certainly not least, upgrading to it also let's us finally eliminate <code>fstream</code>—if you know what that is you'll know why we're so relieved. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4307"></a>
FEATURES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/1ac470dd283cc7758dc37721dd6331d5b316dc99"><code>1ac470dd2</code></a> <a href="https://github.com/npm/npm/pull/10382">#10382</a> If you make a typo when writing a command now, npm will print a brief "did you
  mean..." message with some possible alternatives to what you meant. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/20c46228d8f9243910f8c343f4830d52455d754e"><code>20c46228d</code></a> <a href="https://github.com/npm/npm/pull/12356">#12356</a> When running lifecycle scripts, <code>INIT_CWD</code> will now contain the original working directory that npm was executed from. Remember that you can use <code>npm run-script</code> even if you're not inside your package root directory! (<a href="https://github.com/MichaelQQ">@MichaelQQ</a>)</li>
<li><a href="https://github.com/npm/npm/commit/be91e1726e9c21c4532723e4f413b73a93dd53d1"><code>be91e1726</code></a> <a href="https://github.com/npm/npm/commit/4e7c41f4a29744a9976cc22c77eee9d44172f21e"><code>4e7c41f4a</code></a> <code>libnpx@9.6.0</code>: Fixes a number of issues on Windows and adds support for several more languages: Korean, Norwegian (bokmål and nynorsk), Ukrainian, Serbian, Bahasa Indonesia, Polish, Dutch and Arabic. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2dec601c6d5a576751d50efbcf76eaef4deff31e"><code>2dec601c6</code></a> <a href="https://github.com/npm/npm/pull/17142">#17142</a> Add the new <code>commit-hooks</code> option to <code>npm version</code> so that you can disable commit hooks when committing the version bump. (<a href="https://github.com/faazshift">@faazshift</a>)</li>
<li><a href="https://github.com/npm/npm/commit/bde15190230b5c62dbd98095311eab71f6b52321"><code>bde151902</code></a> <a href="https://github.com/npm/npm/pull/14461">#14461</a> Make output from <code>npm ping</code> clear as to its success or failure. (<a href="https://github.com/legodude17">@legodude17</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4308"></a>
BUGFIXES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/b6d5549d2c2d38dd0e4319c56b69ad137f0d50cd"><code>b6d5549d2</code></a> <a href="https://github.com/npm/npm/pull/17844">#17844</a> Make package-lock.json sorting locale-agnostic. Previously, sorting would vary by locale, due to using <code>localeCompare</code> for key sorting. This'll give you a little package-lock.json churn as it reshuffles things, sorry! (<a href="https://github.com/LotharSee">@LotharSee</a>)</li>
<li><a href="https://github.com/npm/npm/commit/44b98b9ddcfcccf68967fdf106fca52bf0c3da4b"><code>44b98b9dd</code></a> <a href="https://github.com/npm/npm/pull/17919">#17919</a> Fix a crash where <code>npm prune --production</code> would fail while removing <code>.bin</code>. (<a href="https://github.com/fasterthanlime">@fasterthanlime</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c3d1d3ba82aa41dfb2bd135e6cdc59f8d33cd9fb"><code>c3d1d3ba8</code></a> <a href="https://github.com/npm/npm/pull/17816">#17816</a> Fail more smoothly when attempting to install an invalid package name. (<a href="https://github.com/SamuelMarks">@SamuelMarks</a>)</li>
<li><a href="https://github.com/npm/npm/commit/55ac2fca81bf08338302dc7dc2070494e71add5c"><code>55ac2fca8</code></a> <a href="https://github.com/npm/npm/pull/12784">#12784</a> Guard against stack overflows when marking packages as failed. (<a href="https://github.com/vtravieso">@vtravieso</a>)</li>
<li><a href="https://github.com/npm/npm/commit/597cc0e4b5e6ee719014e3171d4e966df42a275c"><code>597cc0e4b</code></a> <a href="https://github.com/npm/npm/pull/15087">#15087</a> Stop outputting progressbars or using color on dumb terminals. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7a7710ba72e6f82414653c2e7e91fea9a1aba7e2"><code>7a7710ba7</code></a> <a href="https://github.com/npm/npm/pull/15088">#15088</a> Don't exclude modules that are both dev &amp; prod when using <code>npm ls --production</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/867df2b0214689822b87b51578e347f353be97e8"><code>867df2b02</code></a> <a href="https://github.com/npm/npm/pull/18164">#18164</a> Only do multiple procs on OSX for now. We've seen a handful of issues relating to this in Docker and in on Windows with antivirus. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/23540af7b0ec5f12bbdc1558745c8c4f0861042b"><code>23540af7b</code></a> <a href="https://github.com/npm/npm/pull/18117">#18117</a> Some package managers would write spaces to the _from field in package.json's in the form of <code>name @spec</code>. This was causing npm to fail to interpret them. We now handle that correctly and doubly make sure we don't do that ourselves. (<a href="https://github.com/IgorNadj">@IgorNadj</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0ef320cb40222693b7367b97c60ddffabc2d58c5"><code>0ef320cb4</code></a> <a href="https://github.com/npm/npm/pull/16634">#16634</a> Convert any bin script with a shbang a the start to Unix line-endings. (These sorts of scripts are not compatible with Windows line-endings even on Windows.) (<a href="https://github.com/ScottFreeCode">@ScottFreeCode</a>)</li>
<li><a href="https://github.com/npm/npm/commit/71191ca2227694355c49dfb187104f68df5126bd"><code>71191ca22</code></a> <a href="https://github.com/npm/npm/pull/16476">#16476</a> <code>npm-lifecycle@1.0.2</code> Running an install with <code>--ignore-scripts</code> was resulting in the the package object being mutated to have the lifecycle scripts removed from it and that in turn was being written out to disk, causing further problems. This fixes that: No more mutation, no more unexpected changes. (<a href="https://github.com/addaleax">@addaleax</a>)</li>
<li><a href="https://github.com/npm/npm/commit/459fa9d51600904ee75ed6267b159367a1209793"><code>459fa9d51</code></a> <a href="https://github.com/npm/read-package-json/pull/74">npm/read-package-json#74</a> <a href="https://github.com/npm/npm/pull/17802">#17802</a> <code>read-package-json@2.0.1</code> Use unix-style slashes for generated bin entries, which lets them be cross platform even when produced on Windows. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5ec72ab5b27c5c83cee9ff568cf75a9479d4b83a"><code>5ec72ab5b</code></a> <a href="https://github.com/npm/npm/pull/18229">#18229</a> Make install.sh find nodejs on debian. (<a href="https://github.com/cebe">@cebe</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4309"></a>
DOCUMENTATION</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/b019680db78ae0a6dff2289dbfe9f61fccbbe824"><code>b019680db</code></a> <a href="https://github.com/npm/npm/pull/10846">#10846</a> Remind users that they have to install missing <code>peerDependencies</code> manually. (<a href="https://github.com/ryanflorence">@ryanflorence</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3aee5986a65add2f815b24541b9f4b69d7fb445f"><code>3aee5986a</code></a> <a href="https://github.com/npm/npm/pull/17898">#17898</a> Minor punctuation fixes to the README. (<a href="https://github.com/AndersDJohnson">@AndersDJohnson</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e0d0a7e1dda2c43822b17eb71f4d51900575cc61"><code>e0d0a7e1d</code></a> <a href="https://github.com/npm/npm/pull/17832">#17832</a> Fix grammar, format, and spelling in documentation for <code>run-script</code>. (<a href="https://github.com/simonua">@simonua</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3fd6a5f2f8802a9768dba2ec32c593b5db5a878d"><code>3fd6a5f2f</code></a> <a href="https://github.com/npm/npm/pull/17897">#17897</a> Add more info about using <code>files</code> with <code>npm pack</code>/<code>npm publish</code>. (<a href="https://github.com/davidjgoss">@davidjgoss</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f00cdc6eb90a0735bc3c516720de0b1428c79c31"><code>f00cdc6eb</code></a> <a href="https://github.com/npm/npm/pull/17785">#17785</a> Add a note about filenames for certificates on Windows, which use a different extension and file type. (<a href="https://github.com/lgp1985">@lgp1985</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0cea6f9741243b1937abfa300c2a111d9ed79143"><code>0cea6f974</code></a> <a href="https://github.com/npm/npm/pull/18022">#18022</a> Clarify usage for the <code>files</code> field in <code>package.json</code>. (<a href="https://github.com/xcambar">@xcambar</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a0fdd15710971234cbc57086cd1a4dc037a39471"><code>a0fdd1571</code></a> <a href="https://github.com/npm/npm/pull/15234">#15234</a> Clarify the behavior of the <code>files</code> array in the package-json docs. (<a href="https://github.com/jbcpollak">@jbcpollak</a>)</li>
<li><a href="https://github.com/npm/npm/commit/cecd6aa5d4dd04af765b26b749c1cd032f7eb913"><code>cecd6aa5d</code></a> <a href="https://github.com/npm/npm/pull/18137">#18137</a> Clarify interaction between npmignore and files in package.json. (<a href="https://github.com/supertong">@supertong</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6b89720396767961001e727fc985671ce88b901b"><code>6b8972039</code></a> <a href="https://github.com/npm/npm/pull/18044">#18044</a> Corrected the typo in package-locks docs. (<a href="https://github.com/vikramnr">@vikramnr</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6e012924f99c475bc3637c86ab6a113875405fc7"><code>6e012924f</code></a> <a href="https://github.com/npm/npm/pull/17667">#17667</a> Fix description of package.json in npm-scripts docs. (<a href="https://github.com/tripu">@tripu</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4310"></a>
POSSIBLY INTERESTING DEPENDENCY UPDATES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/48d84171a302fde2510b3f31e4a004c5a4d39c73"><code>48d84171a</code></a> <a href="https://github.com/npm/npm/commit/f60b05d6307a7c46160ce98d6f3ccba89411c4ba"><code>f60b05d63</code></a> <code>semver@5.4.1</code> Perf improvements. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f4650b5d4b2be2c04c229cc53aa930e260af9b4e"><code>f4650b5d4</code></a> <code>write-file-atomic@2.3.0</code>: Serialize writes to the same file so that results are deterministic. Cleanup tempfiles when process is interrupted or killed. (<a href="https://github.com/ferm10n">@ferm10n</a>) (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4311"></a>
CHORES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/96d78df9843187bc53be2c93913e8567003ccb73"><code>96d78df98</code></a> <a href="https://github.com/npm/npm/commit/80e2f4960691bc5dbd8320002e4d9143784b9ce9"><code>80e2f4960</code></a> <a href="https://github.com/npm/npm/commit/4f49f687bbd54b6a0e406936ae35593d8e971e1e"><code>4f49f687b</code></a> <a href="https://github.com/npm/npm/commit/07d2296b10e3d8d6f079eba3a61f0258501d7161"><code>07d2296b1</code></a> <a href="https://github.com/npm/npm/commit/a267ab4309883012a9d55934533c5915e9842277"><code>a267ab430</code></a> <a href="https://github.com/npm/npm/pull/18176">#18176</a> <a href="https://github.com/npm/npm/pull/18025">#18025</a> Move the lifecycle code out of npm into a separate library, <a href="https://github.com/npm/lifecycle"><code>npm-lifecycle</code></a>. Shh, I didn't tell you this, but this portends to some pretty cool stuff to come very soon now. (<a href="https://github.com/mikesherov">@mikesherov</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0933c7eaf9cfcdf56471fe4e71c403e2016973da"><code>0933c7eaf</code></a> <a href="https://github.com/npm/npm/pull/18025">#18025</a> Force Travis to use Precise instead of Trusty. We have issues with our couchdb setup and Trusty. =/ (<a href="https://github.com/mikesherov">@mikesherov</a>)</li>
<li><a href="https://github.com/npm/npm/commit/afb086230223f3c4fcddee4e958d18fce5db0ff9"><code>afb086230</code></a> <a href="https://github.com/npm/npm/pull/18138">#18138</a> Fix typos in files-and-ignores test. (<a href="https://github.com/supertong">@supertong</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3e6d11cde096b4ee7b07e7569b37186aa2115b1a"><code>3e6d11cde</code></a> <a href="https://github.com/npm/npm/pull/18175">#18175</a> Update dependencies to eliminate transitive dependencies with the WTFPL license, which some more serious corporate lawyery types aren't super comfortable with. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ee4c9bd8ae574a0d6b24725ba6c7b718d8aaad8d"><code>ee4c9bd8a</code></a> <a href="https://github.com/npm/npm/pull/16474">#16474</a> The tests in <code>test/tap/lifecycle-signal.js</code>, as well as the features they are testing, are partially broken. This moves them from being skipped in CI to being disabled only for certain platforms. In particular, because <code>npm</code> spawns its lifecycle scripts in a shell, signals are not necessarily forwarded by the shell and won’t cause scripts to exit; also, shells may report the signal they receive using their exit status, rather than terminating themselves with a signal. (<a href="https://github.com/addaleax">@addaleax</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9462e5d9cfbaa50218de6d0a630d6552e72ad0a8"><code>9462e5d9c</code></a> <a href="https://github.com/npm/npm/pull/16547">#16547</a> Remove unused file: bin/read-package-json.js (<a href="https://github.com/metux">@metux</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0756d687d4ccfcd4a7fd83db0065eceb9261befb"><code>0756d687d</code></a> <a href="https://github.com/npm/npm/pull/16550">#16550</a> The build tools for the documentation need to be built/installed before the documents, even with parallel builds. Make has a simple mechanism which was made exactly for that: target dependencies. (<a href="https://github.com/metux">@metux</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4312"></a>
v5.3.0 (2017-07-12):</h1>
<p>As mentioned before, we're continuing to do relatively rapid, smaller releases as we keep working on stomping out <code>npm@5</code> issues! We've made a lot of progress since 5.0 already, and this release is no exception.</p>
<h2><a class="anchor" id="autotoc_md4313"></a>
FEATURES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/1e3a469448b5db8376e6f64022c4c0c78cdb1686"><code>1e3a46944</code></a> <a href="https://github.com/npm/npm/pull/17616">#17616</a> Add <code>--link</code> filter option to <code>npm ls</code>. (<a href="https://github.com/richardsimko">@richardsimko</a>)</li>
<li><a href="https://github.com/npm/npm/commit/33df0aaaa7271dac982b86f2701d10152c4177c8"><code>33df0aaa</code></a> <code>libnpx@9.2.0</code>:<ul>
<li>4 new languages - Czech, Italian, Turkish, and Chinese (Traditional)! This means npx is available in 14 different languages!</li>
<li>New &ndash;node-arg option lets you pass CLI arguments directly to node when the target binary is found to be a Node.js script. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md4314"></a>
BUGFIXES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/33df0aaaa7271dac982b86f2701d10152c4177c8"><code>33df0aaa</code></a> <code>libnpx@9.2.0</code>:<ul>
<li>npx should now work on (most) Windows installs. A couple of issues remain.</li>
<li>Prevent auto-fallback from going into an infinite loop when npx disappears.</li>
<li><code>npx npx npx npx npx npx npx npx</code> works again.</li>
<li><code>update-notifier</code> will no longer run for the npx bundled with npm.</li>
<li><code>npx &lt;cmd&gt;</code> in a subdirectory of your project should be able to find your <code>node_modules/.bin</code> now. Oops (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
</li>
<li><a href="https://github.com/npm/npm/commit/8e979bf80fb93233f19db003f08443e26cfc5e64"><code>8e979bf80</code></a> Revert change where npm stopped flattening modules that required peerDeps. This caused problems because folks were using peer deps to indicate that the target of the peer dep needed to be able to require the dependency and had been relying on the fact that peer deps didn't change the shape of the tree (as of npm@3). The fix that will actually work for people is for a peer dep to insist on never being installed deeper than the the thing it relies on. At the moment this is tricky because the thing the peer dep relies on may not yet have been added to the tree, so we don't know where it is. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7f28a77f33ef501065f22e8d5e8cffee3195dccd"><code>7f28a77f3</code></a> <a href="https://github.com/npm/npm/pull/17733">#17733</a> Split remove and unbuild actions into two to get uninstall lifecycles and the removal of transitive symlinks during uninstallation to run in the right order. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/637f2548facae011eebf5e5c38bfe56a6c2db9fa"><code>637f2548f</code></a> <a href="https://github.com/npm/npm/pull/17748">#17748</a> When rolling back use symlink project-relative path, fixing some issues with <code>fs-vacuum</code> getting confused while removing symlinked things. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f153b5b22f647d4d403f5b8cecd2ce63ac75b07c"><code>f153b5b22</code></a> <a href="https://github.com/npm/npm/pull/17706">#17706</a> Use semver to compare node versions in npm doctor instead of plain <code>&gt;</code> comparison. (<a href="https://github.com/leo-shopify">@leo-shopify</a>)</li>
<li><a href="https://github.com/npm/npm/commit/542f7561d173eca40eb8d838a16a0ed582fef989"><code>542f7561</code></a> <a href="https://github.com/npm/npm/pull/17742">#17742</a> Fix issue where <code>npm version</code> would sometimes not commit package-locks. (<a href="https://github.com/markpeterfejes">@markpeterfejes</a>)</li>
<li><a href="https://github.com/npm/npm/commit/51a9e63d31cb5ac52259dcf1c364004286072426"><code>51a9e63d</code></a> <a href="https://github.com/npm/npm/pull/17777">#17777</a> Fix bug exposed by other bugfixes where the wrong package would be removed. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4315"></a>
DOCUMENTATION</h2>
<p>Have we mentioned we really like documentation patches? Keep sending them in! Small patches are just fine, and they're a great way to get started contributing to npm!</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/fb42d55a9a97afa5ab7db38b3b99088cf68684ea"><code>fb42d55a9</code></a> <a href="https://github.com/npm/npm/pull/17728">#17728</a> Document semver git urls in package.json docs. (<a href="https://github.com/sankethkatta">@sankethkatta</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f398c700fb0f2f3665ebf45995a910ad16cd8d05"><code>f398c700f</code></a> <a href="https://github.com/npm/npm/pull/17684">#17684</a> Tweak heading hierarchy in package.json docs. (<a href="https://github.com/sonicdoe">@sonicdoe</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d5ad65e50a573cdf9df4155225e869cd6c88ca5e"><code>d5ad65e50</code></a> <a href="https://github.com/npm/npm/pull/17691">#17691</a> Explicitly document <code>--no-save</code> flag for uninstall. (<a href="https://github.com/timneedham">@timneedham</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4316"></a>
v5.2.0 (2017-07-05):</h1>
<p>It's only been a couple of days but we've got some bug fixes we wanted to get out to you all. We also believe that <a href="https://medium.com/@maybekatz/introducing-npx-an-npm-package-runner-55f7d4bd282b"><code>npx</code></a> is ready to be bundled with npm, which we're really excited about!</p>
<h2><a class="anchor" id="autotoc_md4317"></a>
npx!!!</h2>
<p>npx is a tool intended to help round out the experience of using packages from the npm registry — the same way npm makes it super easy to install and manage dependencies hosted on the registry, npx is meant to make it easy to use CLI tools and other executables hosted on the registry. It greatly simplifies a number of things that, until now, required a bit of ceremony to do with plain npm.</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*OlIRsvVO5aK7ja9HmwXz_Q.gif" alt="" class="inline"/></p>
<p><a href="https://github.com/zkat">@zkat</a> has a <a href="https://medium.com/@maybekatz/introducing-npx-an-npm-package-runner-55f7d4bd282b">great introduction post to npx</a> that I highly recommend you give a read</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/fb040bee0710759c60e45bf8fa2a3b8ddcf4212a"><code>fb040bee0</code></a> <a href="https://github.com/npm/npm/pull/17685">#17685</a> Bundle npx with npm itself. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4318"></a>
BUG FIXES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/9fe905c399d07a3c00c7b22035ddb6b7762731e6"><code>9fe905c39</code></a> <a href="https://github.com/npm/npm/pull/17652">#17652</a> Fix max callstack exceeded loops with trees with circular links. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c0a289b1ba6b99652c43a955b23acbf1de0b56ae"><code>c0a289b1b</code></a> <a href="https://github.com/npm/npm/pull/17606">#17606</a> Make sure that when write package.json and package-lock.json we always use unix path separators. (<a href="https://github.com/Standard8">@Standard8</a>)</li>
<li><a href="https://github.com/npm/npm/commit/1658b79cad89ccece5ae5ce3c2f691d44b933116"><code>1658b79ca</code></a> <a href="https://github.com/npm/npm/pull/17654">#17654</a> Make <code>npm outdated</code> show results for globals again. Previously it never thought they were out of date. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/06c154fd653d18725d2e760ba825d43cdd807420"><code>06c154fd6</code></a> <a href="https://github.com/npm/npm/pull/17678">#17678</a> Stop flattening modules that have peer dependencies. We're making this change to support scenarios where the module requiring a peer dependency is flattened but the peer dependency itself is not, due to conflicts. In those cases the module requiring the peer dep can't be flattened past the location its peer dep was placed in. This initial fix is naive, never flattening peer deps, and we can look into doing something more sophisticated later on. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/88aafee8b5b232b7eeb5690279a098d056575791"><code>88aafee8b</code></a> <a href="https://github.com/npm/npm/pull/17677">#17677</a> There was an issue where updating a flattened dependency would sometimes unflatten it. This only happened when the dependency had dependencies that in turn required the original dependency. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b58ec8eab3b4141e7f1b8b42d8cc24f716a804d8"><code>b58ec8eab</code></a> <a href="https://github.com/npm/npm/pull/17626">#17626</a> Integrators who were building their own copies of npm ran into issues because <code>make install</code> and <a href="https://npmjs.com/install.sh">https://npmjs.com/install.sh</a> weren't aware that <code>npm install</code> creates links now when given a directory to work on. This does not impact folks installing npm with <code>npm install -g npm</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4319"></a>
DOC FIXES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/10bef735e825acc8278827d34df415dfcd8c67d4"><code>10bef735e</code></a> <a href="https://github.com/npm/npm/pull/17645">#17645</a> Fix some github issue links in the 5.1.0 changelog (<a href="https://github.com/schmod">@schmod</a>)</li>
<li><a href="https://github.com/npm/npm/commit/85fa9dcb2f0b4f51b515358e0184ec82a5845227"><code>85fa9dcb2</code></a> <a href="https://github.com/npm/npm/pull/17634">#17634</a> Fix typo in package-lock docs. (<a href="https://github.com/sonicdoe">@sonicdoe</a>)</li>
<li><a href="https://github.com/npm/npm/commit/688699befc2d147288c69a9405fb8354ecaebe36"><code>688699bef</code></a> <a href="https://github.com/npm/npm/pull/17628">#17628</a> Recommend that folks looking for support join us on <a href="https://package.community/">https://package.community/</a> or message <a href="https://twitter.com/npm_support">@npm_support</a> on Twitter. (<a href="https://github.com/strugee">@strugee</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4320"></a>
v5.1.0 (2017-07-05):</h1>
<p>Hey y'all~</p>
<p>We've got some goodies for you here, including <code>npm@5</code>'s first semver-minor release! This version includes a huge number of fixes, particularly for some of the critical bugs users were running into after upgrading npm. You should overall see a much more stable experience, and we're going to continue hacking on fixes for the time being. Semver-major releases, specially for tools like npm, are bound to cause some instability, and getting <code>npm@5</code> stable is the CLI team's top priority for now!</p>
<p>Not that bugfixes are the only things that landed, either: between improvements that fell out of the bugfixes, and some really cool work by community members like <a href="https://github.com/mikesherov">@mikesherov</a>, <code>npm@5.1.0</code> is **_twice as fast_** as <code>npm@5.0.0</code> in some benchmarks. We're not stopping there, either: you can expect a steady stream of speed improvements over the course of the year. It's not <em>top</em> priority, but we'll keep doing what we can to make sure npm saves its users as much time as possible.</p>
<p>Hang on to your seats. At <b>100 commits</b>, this release is a bit of a doozy. 😎</p>
<h2><a class="anchor" id="autotoc_md4321"></a>
FEATURES</h2>
<p>Semver-minor releases, of course, mean that there's a new feature somewhere, right? Here's what's bumping that number for us this time:</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/a09c1a69df05b753464cc1272cdccc6af0f4da5a"><code>a09c1a69d</code></a> <a href="https://github.com/npm/npm/pull/16687">#16687</a> Allow customizing the shell used to execute <code>run-script</code>s. (<a href="https://github.com/mmkal">@mmkal</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4f45ba222e2ac6dbe6d696cb7a8e678bbda7c839"><code>4f45ba222</code></a> <a href="https://github.com/npm/npm/commit/a489585985540deed4edc03418636c9e97aa9e40"><code>a48958598</code></a> <a href="https://github.com/npm/npm/commit/901bef0e1ea806fc08d8d58744a9f813b6c020ab"><code>901bef0e1</code></a> <a href="https://github.com/npm/npm/pull/17508">#17508</a> Add a new <code>requires</code> field to <code>package-lock.json</code> with information about the <em>logical</em> dependency tree. This includes references to the specific version each package is intended to see, and can be used for many things, such as <a href="https://twitter.com/maybekatz/status/880578566907248640">converting <code>package-lock.json</code> to other lockfile formats</a>, various optimizations, and verifying correctness of a package tree. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/47e8fc8eb9b5faccef9e03ab991cf37458c16249"><code>47e8fc8eb</code></a> <a href="https://github.com/npm/npm/pull/17508">#17508</a> Make <code>npm ls</code> take package locks (and shrinkwraps) into account. This means <code>npm ls</code> can now be used to see <a href="https://twitter.com/maybekatz/status/880446509547794437">which dependencies are missing</a>, so long as a package lock has been previously generated with it in. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f0075e7caa3e151424a254d7809ae4489ed8df90"><code>f0075e7ca</code></a> <a href="https://github.com/npm/npm/pull/17508">#17508</a> Take <code>package.json</code> changes into account when running installs &ndash; if you remove or add a dependency to <code>package.json</code> manually, npm will now pick that up and update your tree and package lock accordingly. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/83a5455aac3c5cc2511ab504923b652b13bd66a0"><code>83a5455aa</code></a> <a href="https://github.com/npm/npm/pull/17205">#17205</a> Add <code>npm udpate</code> as an alias for <code>npm update</code>, for symmetry with <code>install</code>/<code>isntall</code>. (<a href="https://github.com/gdassori">@gdassori</a>)</li>
<li><a href="https://github.com/npm/npm/commit/57225d394b6174eb0be48393d8e18da0991f67b6"><code>57225d394</code></a> <a href="https://github.com/npm/npm/pull/17120">#17120</a> npm will no longer warn about <code>preferGlobal</code>, and the option is now deprecated. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/82df7bb16fc29c47a024db4a8c393e55f883744b"><code>82df7bb16</code></a> <a href="https://github.com/npm/npm/pull/17351">#17351</a> As some of you may already know <code>npm build</code> doesn't do what a lot of people expect: It's mainly an npm plumbing command, and is part of the more familiar <code>npm rebuild</code> command. That said, a lot of users assume that this is the way to run an npm <code>run-script</code> named <code>build</code>, which is an incredibly common script name to use. To clarify things for users, and encourage them to use <code>npm run build</code> instead, npm will now warn if <code>npm build</code> is run without any arguments. (<a href="https://github.com/lennym">@lennym</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4322"></a>
PERFORMANCE</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/59f86ef90a58d8dc925c9613f1c96e68bee5ec7b"><code>59f86ef90</code></a> <a href="https://github.com/npm/npm/commit/43be9d2222b23ebb0a427ed91824ae217e6d077a"><code>43be9d222</code></a> <a href="https://github.com/npm/npm/commit/e906cdd980b4722e66618ce295c682b9a8ffaf8f"><code>e906cdd98</code></a> <a href="https://github.com/npm/npm/pull/16633">#16633</a> npm now parallelizes tarball extraction across multiple child process workers. This can significantly speed up installations, specially when installing from cache, and will improve with number of processors. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e0849878dd248de8988c2ef3fc941054625712ca"><code>e0849878d</code></a> <a href="https://github.com/npm/npm/pull/17441">#17441</a> Avoid building environment for empty lifecycle scripts. This change alone accounted for as much as a 15% speed boost for npm installations by outright skipping entire steps of the installer when not needed. (<a href="https://github.com/mikesherov">@mikesherov</a>)</li>
<li><a href="https://github.com/npm/npm/commit/265c2544c8ded10854909243482e6437ed03c261"><code>265c2544c</code></a> <a href="https://github.com/npm/hosted-git-info/pull/24">npm/hosted-git-info#24</a> <code>hosted-git-info@2.5.0</code>: Add caching to <code>fromURL</code>, which gets called many, many times by the installer. This improved installation performance by around 10% on realistic application repositories. (<a href="https://github.com/mikesherov">@mikesherov</a>)</li>
<li><a href="https://github.com/npm/npm/commit/901d26cb656e7e773d9a38ef4eac9263b95e07c8"><code>901d26cb</code></a> <a href="https://github.com/npm/read-package-json/pull/70">npm/read-package-json#20</a> <code>read-package-json@2.0.9</code>: Speed up installs by as much as 20% by reintroducing a previously-removed cache and making it actually be correct this time around. (<a href="https://github.com/mikesherov">@mikesherov</a>)</li>
<li><a href="https://github.com/npm/npm/commit/44e37045d77bc40adf339b423d42bf5e9b4d4d91"><code>44e37045d</code></a> Eliminate <code>Bluebird.promisifyAll</code> from our codebase. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3b4681b53db7757985223932072875d099694677"><code>3b4681b53</code></a> <a href="https://github.com/npm/npm/pull/17508">#17508</a> Stop calling <code>addBundle</code> on locked deps, speeding up the <code>package-lock.json</code>-based fast path. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4323"></a>
BUGFIXES</h2>
<ul>
<li><a href="https://github.com/npm/npm/pull/17508">#17508</a> This is a big PR that fixes a variety of issues when installing from package locks. If you were previously having issues with missing dependencies or unwanted removals, this might have fixed it:<ul>
<li>It introduces a new <code>package-lock.json</code> field, called <code>requires</code>, which tracks which modules a given module requires.</li>
<li>It fixes <a href="https://github.com/npm/npm/issues/16839">#16839</a> which was caused by not having this information available, particularly when git dependencies were involved.</li>
<li>It fixes <a href="https://github.com/npm/npm/issues/16866">#16866</a>, allowing the <code>package.json</code> to trump the <code>package-lock.json</code>.</li>
<li><code>npm ls</code> now loads the shrinkwrap, which opens the door to showing a full tree of dependencies even when nothing is yet installed. (It doesn't do that yet though.) (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
</li>
<li><a href="https://github.com/npm/npm/commit/656544c31cdef3cef64fc10c24f03a8ae2685e35"><code>656544c31</code></a> <a href="https://github.com/npm/npm/commit/d21ab57c3ef4f01d41fb6c2103debe884a17dc22"><code>d21ab57c3</code></a> <a href="https://github.com/npm/npm/pull/16637">#16637</a> Fix some cases where <code>npm prune</code> was leaving some dependencies unpruned if to-be-pruned dependencies depended on them. (<a href="https://github.com/exogen">@exogen</a>)</li>
<li><a href="https://github.com/npm/npm/commit/394436b098dcca2d252061f95c4eeb92c4a7027c"><code>394436b09</code></a> <a href="https://github.com/npm/npm/pull/17552">#17552</a> Make <code>refresh-package-json</code> re-verify the package platform. This fixes an issue most notably experienced by Windows users using <code>create-react-app</code> where <code>fsevents</code> would not short-circuit and cause a crash during its otherwise-skipped native build phase. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9e5a943547b29c8d022192afd9398b3a136a7e5a"><code>9e5a94354</code></a> <a href="https://github.com/npm/npm/pull/17590">#17590</a> Fix an issue where <code>npm@5</code> would crash when trying to remove packages installed with <code>npm@&lt;5</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c3b586aafa9eabac572eb6e2b8a7266536dbc65b"><code>c3b586aaf</code></a> <a href="https://github.com/npm/npm/issues/17141">#17141</a> Don't update the package.json when modifying packages that don't go there. This was previously causing <code>package.json</code> to get a <code>"false": {}</code> field added. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d04a23de21dd9991b32029d839b71e10e07b400d"><code>d04a23de2</code></a> <a href="https://github.com/npm/npm/commit/4a5b360d561f565703024085da0927ccafe8793e"><code>4a5b360d5</code></a> <a href="https://github.com/npm/npm/commit/d9e53db48ca227b21bb67df48c9b3580cb390e9e"><code>d9e53db48</code></a> <code>pacote@2.7.38</code>:<ul>
<li><a href="https://github.com/zkat/pacote/pull/102">zkat/pacote#102</a> Fix issue with tar extraction and special characters.</li>
<li>Enable loose semver parsing in some missing corner cases. (<a href="https://github.com/colinrotherham">@colinrotherham</a>, <a href="https://github.com/zkat">@zkat</a>, <a href="https://github.com/mcibique">@mcibique</a>)</li>
</ul>
</li>
<li><a href="https://github.com/npm/npm/commit/e2f815f87676b7c50b896e939cee15a01aa976e4"><code>e2f815f87</code></a> <a href="https://github.com/npm/npm/pull/17104">#17104</a> Write an empty str and wait for flush to exit to reduce issues with npm exiting before all output is complete when it's a child process. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/835fcec601204971083aa3a281c3a9da6061a7c2"><code>835fcec60</code></a> <a href="https://github.com/npm/npm/pull/17060">#17060</a> Make git repos with prepare scripts always install with both dev and prod flags. (<a href="https://github.com/intellix">@intellix</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f1dc8a175eed56f1ed23bd5773e5e10beaf6cb31"><code>f1dc8a175</code></a> <a href="https://github.com/npm/npm/pull/16879">#16879</a> Fix support for <code>always-auth</code> and <code>_auth</code>. They are now both available in both unscoped and registry-scoped configurations. (<a href="https://github.com/jozemlakar">@jozemlakar</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ddd8a1ca2fa3377199af74ede9d0c1a406d19793"><code>ddd8a1ca2</code></a> Serialize package specs to prevent <code>[object Object]</code> showing up in logs during extraction. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/99ef3b52caa7507e87a4257e622f8964b1c1f5f3"><code>99ef3b52c</code></a> <a href="https://github.com/npm/npm/pull/17505">#17505</a> Stop trying to commit updated <code>npm-shrinkwrap.json</code> and <code>package-lock.json</code> if they're <code>.gitignore</code>d. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/58be2ec596dfb0353ad2570e6750e408339f1478"><code>58be2ec59</code></a> Make sure uid and gid are getting correctly set even when they're <code>0</code>. This should fix some Docker-related issues with bad permissions/broken ownership. (<a href="https://github.com/rgrove">@rgrove</a>) (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9d1e3b6fa01bb563d76018ee153259d9507658cf"><code>9d1e3b6fa</code></a> <a href="https://github.com/npm/npm/pull/17506">#17506</a> Skip writing package.json and locks if on-disk version is identical to the new one. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3fc6477a89773786e6c43ef43a23e5cdc662ff8e"><code>3fc6477a8</code></a> <a href="https://github.com/npm/npm/pull/17592">#17592</a> Fix an issue where <code>npm install -g .</code> on a package with no <code>name</code> field would cause the entire global <code>node_modules</code> directory to be replaced with a symlink to <code>$CWD</code>. lol. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/06ba0a14a6c1c8cdcc8c062b68c8c63041b0cec0"><code>06ba0a14a</code></a> <a href="https://github.com/npm/npm/pull/17591">#17591</a> Fix spurious removal reporting: if you tried to remove something that didn't actually exist, npm would tell you it removed 1 package even though there was nothing to do. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/20ff05f8fe0ad8c36e1323d30b63b4d2ff7e11ef"><code>20ff05f8</code></a> <a href="https://github.com/npm/npm/pull/17629">#17629</a> When removing a link, keep dependencies installed inside of it instead of removing them, if the link is outside the scope of the current project. This fixes an issue where removing globally-linked packages would remove all their dependencies in the source directory, as well as some ergonomic issues when using links in other situations. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4324"></a>
DOCS</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/fd5fab5955a20a9bb8c0e77092ada1435f73a8d2"><code>fd5fab595</code></a> <a href="https://github.com/npm/npm/pull/16441">#16441</a> Add spec for <code>npm-shrinkwrap.json</code> and <code>package-lock.json</code> from RFC. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9589c1ccb3f794abaaa48c2a647ada311dd881ef"><code>9589c1ccb</code></a> <a href="https://github.com/npm/npm/pull/17451">#17451</a> Fix typo in changelog. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f8e76d8566ae1965e57d348df74edad0643b66a6"><code>f8e76d856</code></a> <a href="https://github.com/npm/npm/pull/17370">#17370</a> Correct the default prefix config path for Windows operating systems in the documentation for npm folders. (<a href="https://github.com/kierendixon">@kierendixon</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d0f3b5a127718b0347c6622a2b9c28341c530d36"><code>d0f3b5a12</code></a> <a href="https://github.com/npm/npm/pull/17369">#17369</a> Fix <code>npm-config</code> reference to <code>userconfig</code> &amp; <code>globalconfig</code> environment variables. (<a href="https://github.com/racztiborzoltan">@racztiborzoltan</a>)</li>
<li><a href="https://github.com/npm/npm/commit/87629880a71baec352c1b5345bc29268d6212467"><code>87629880a</code></a> <a href="https://github.com/npm/npm/pull/17336">#17336</a> Remove note in docs about <code>prepublish</code> being entirely removed. (<a href="https://github.com/Hirse">@Hirse</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a1058afd9a7a569bd0ac65b86eadd4fe077a7221"><code>a1058afd9</code></a> <a href="https://github.com/npm/npm/pull/17169">#17169</a> Document <code>--no-package-lock</code> flag. (<a href="https://github.com/leggsimon">@leggsimon</a>)</li>
<li><a href="https://github.com/npm/npm/commit/32fc6e41a2ce4dbcd5ce1e5f291e2e2efc779d48"><code>32fc6e41a</code></a> <a href="https://github.com/npm/npm/pull/17250">#17250</a> Fix a typo in the shrinkwrap docs. (<a href="https://github.com/Zarel">@Zarel</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f19bd3c8cbd37c8a99487d6b5035282580ac3e9d"><code>f19bd3c8c</code></a> <a href="https://github.com/npm/npm/pull/17249">#17249</a> Fix a package-lock.json cross-reference link. (<a href="https://github.com/not-an-aardvark">@not-an-aardvark</a>)</li>
<li><a href="https://github.com/npm/npm/commit/153245edc4845db670ada5e95ef384561706a751"><code>153245edc</code></a> <a href="https://github.com/npm/npm/pull/17075/files">#17075</a> Fix a typo in <code>npm-config</code> docs. (<a href="https://github.com/KennethKinLum">@KennethKinLum</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c9b534a148818d1a97787c0dfdba5f64ce3618a6"><code>c9b534a14</code></a> <a href="https://github.com/npm/npm/pull/17074">#17074</a> Clarify config documentation with multiple boolean flags. (<a href="https://github.com/KennethKinLum">@KennethKinLum</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e111b0a40c4bc6691d7b8d67ddce5419e67bfd27"><code>e111b0a40</code></a> <a href="https://github.com/npm/npm/pull/16768">#16768</a> Document the <code>-l</code> option to <code>npm config list</code>. (<a href="https://github.com/happylynx">@happylynx</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5a803ebadd61229bca3d64fb3ef1981729b2548e"><code>5a803ebad</code></a> <a href="https://github.com/npm/npm/pull/16548">#16548</a> Fix permissions for documentation files. Some of them had <code>+x</code> set. (???) (<a href="https://github.com/metux">@metux</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d57d4f48c6cd00fdf1e694eb49e9358071d8e105"><code>d57d4f48c</code></a> <a href="https://github.com/npm/npm/pull/17319">#17319</a> Document that the <code>--silent</code> option for <code>npm run-script</code> can be used to suppress <code>npm ERR!</code> output on errors. (<a href="https://github.com/styfle">@styfle</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4325"></a>
MISC</h2>
<p>Not all contributions need to be visible features, docs, or bugfixes! It's super helpful when community members go over our code and help clean it up, too!</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/9e5b76140ffdb7dcd12aa402793644213fb8c5d7"><code>9e5b76140</code></a> <a href="https://github.com/npm/npm/pull/17411">#17411</a> Convert all callback-style <code>move</code> usage to use Promises. (<a href="https://github.com/vramana">@vramana</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0711c08f779ac641ec42ecc96f604c8861008b28"><code>0711c08f7</code></a> <a href="https://github.com/npm/npm/pull/17394">#17394</a> Remove unused argument in <code>deepSortObject</code>. (<a href="https://github.com/vramana">@vramana</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7d650048c8ed5faa0486492f1eeb698e7383e32f"><code>7d650048c</code></a> <a href="https://github.com/npm/npm/pull/17563">#17563</a> Refactor some code to use <code>Object.assign</code>. (<a href="https://github.com/vramana">@vramana</a>)</li>
<li><a href="https://github.com/npm/npm/commit/993f673f056aea5f602ea04b1e697b027c267a2d"><code>993f673f0</code></a> <a href="https://github.com/npm/npm/pull/17600">#17600</a> Remove an old comment. (<a href="https://github.com/vramana">@vramana</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4326"></a>
v5.0.4 (2017-06-13):</h1>
<p>Hey y'all. This is another minor patch release with a variety of little fixes we've been accumulating~</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/f0a37ace9ab7879cab20f2b0fcd7840bfc305feb"><code>f0a37ace9</code></a> Fix <code>npm doctor</code> when hitting registries without <code>ping</code>. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/64f0105e81352b42b72900d83b437b90afc6d9ce"><code>64f0105e8</code></a> Fix invalid format error when setting cache-related headers. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d2969c80e4178faebf0f7c4cab6eb610dd953cc6"><code>d2969c80e</code></a> Fix spurious <code>EINTEGRITY</code> issue. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/800cb2b4e2d0bd00b5c9082a896f2110e907eb0b"><code>800cb2b4e</code></a> <a href="https://github.com/npm/npm/pull/17076">#17076</a> Use legacy <code>from</code> field to improve upgrade experience from legacy shrinkwraps and installs. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4100d47ea58b4966c02604f71350b5316108df6a"><code>4100d47ea</code></a> <a href="https://github.com/npm/npm/pull/17007">#17007</a> Restore loose semver parsing to match older npm behavior when running into invalid semver ranges in dependencies. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/35316cce2ca2d8eb94161ec7fe7e8f7bec7b3aa7"><code>35316cce2</code></a> <a href="https://github.com/npm/npm/pull/17005">#17005</a> Emulate npm@4's behavior of simply marking the peerDep as invalid, instead of crashing. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e7e8ee5c57c7238655677e118a8809b652019f53"><code>e7e8ee5c5</code></a> <a href="https://github.com/npm/npm/pull/16937">#16937</a> Workaround for separate bug where <code>requested</code> was somehow null. (<a href="https://github.com/forivall">@forivall</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2d9629bb2043cff47eaad2654a64d2cef5725356"><code>2d9629bb2</code></a> Better logging output for git errors. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2235aea73569fb9711a06fa6344ef31247177dcd"><code>2235aea73</code></a> More scp-url fixes: parsing only worked correctly when a committish was present. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/80c33cf5e6ef207450949764de41ea96538c636e"><code>80c33cf5e</code></a> Standardize package permissions on tarball extraction, instead of using perms from the tarball. This matches previous npm behavior and fixes a number of incompatibilities in the wild. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2b1e40efba0b3d1004259efa4275cf42144e3ce3"><code>2b1e40efb</code></a> Limit shallow cloning to hosts which are known to support it. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4327"></a>
v5.0.3 (2017-06-05)</h1>
<p>Happy Monday, y'all! We've got another npm release for you with the fruits of our ongoing bugsquashing efforts. You can expect at least one more this week, but probably more &ndash; and as we announced last week, we'll be merging fixes more rapidly into the <code>npmc</code> canary so you can get everything as soon as possible!</p>
<p>Hope y'all are enjoying npm5 in the meantime, and don't hesitate to file issues for anything you find! The goal is to get this release rock-solid as soon as we can. 💚</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/6e12a5cc022cb5a157a37df7283b6d7b3d49bdab"><code>6e12a5cc0</code></a> Bump several dependencies to get improvements and bugfixes:<ul>
<li><code>cacache</code>: content files (the tarballs) are now read-only.</li>
<li><code>pacote</code>: fix failing clones with bad heads, send extra TLS-related opts to proxy, enable global auth configurations and <code>_auth</code>-based auth.</li>
<li><code>ssri</code>: stop crashing with <code>can't call method find of undefined</code> when running into a weird <code>opts.integrity</code>/<code>opts.algorithms</code> conflict during verification. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
</li>
<li><a href="https://github.com/npm/npm/commit/89cc8e3e12dad67fd9844accf4d41deb4c180c5c"><code>89cc8e3e1</code></a> <a href="https://github.com/npm/npm/pull/16917">#16917</a> Send <code>ca</code>, <code>cert</code> and <code>key</code> config through to network layer. (<a href="https://github.com/colinrotherham">@colinrotherham</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6a9b51c67ba3df0372991631992748329b84f2e7"><code>6a9b51c67</code></a> <a href="https://github.com/npm/npm/pull/16929">#16929</a> Send <code>npm-session</code> header value with registry requests again. (<a href="https://github.com/zarenner">@zarenner</a>)</li>
<li><a href="https://github.com/npm/npm/commit/662a15ab7e790e87f5e5a35252f05d5a4a0724a1"><code>662a15ab7</code></a> Fix <code>npm doctor</code> so it stop complaining about read-only content files in the cache. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/191d10a6616d72e26d89fd00f5a4f6158bfbc526"><code>191d10a66</code></a> <a href="https://github.com/npm/npm/pull/16918">#16918</a> Clarify prepublish deprecation message. (<a href="https://github.com/Hirse">@Hirse</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4328"></a>
v5.0.2 (2017-06-02)</h1>
<p>Here's another patch release, soon after the other!</p>
<p>This particular release includes a slew of fixes to npm's git support, which was causing some issues for a chunk of people, specially those who were using self-hosted/Enterprise repos. All of those should be back in working condition now.</p>
<p>There's another shiny thing you might wanna know about: npm has a Canary release now! The <code>npm5</code> experiment we did during our beta proved to be incredibly successful: users were able to have a tight feedback loop between reports and getting the bugfixes they needed, and the CLI team was able to roll out experimental patches and have the community try them out right away. So we want to keep doing that.</p>
<p>From now on, you'll be able to install the 'npm canary' with <code>npm i -g npmc</code>. This release will be a separate binary (<code>npmc</code>. Because canary. Get it?), which will update independently of the main CLI. Most of the time, this will track <code>release-next</code> or something close to it. We might occasionally toss experimental branches in there to see if our more adventurous users run into anything interesting with it. For example, the current canary (<code>npmc@5.0.1-canary.6</code>) includes an <a href="https://github.com/npm/npm/pull/16633">experimental multiproc branch</a> that parallelizes tarball extraction across multiple processes.</p>
<p>If you find any issues while running the canary version, please report them and let us know it came from <code>npmc</code>! It would be tremendously helpful, and finding things early is a huge reason to have it there. Happy hacking!</p>
<h2><a class="anchor" id="autotoc_md4329"></a>
A NOTE ABOUT THE ISSUE TRACKER</h2>
<p>Just a heads up: We're preparing to do a massive cleanup of the issue tracker. It's been a long time since it was something we could really keep up with, and we didn't have a process for dealing with it that could actually be sustainable.</p>
<p>We're still sussing the details out, and we'll talk about it more when we're about to do it, but the plan is essentially to close old, abandoned issues and start over. We will also <a href="https://github.com/probot">add some automation</a> around issue management so that things that we can't keep up with don't just stay around forever.</p>
<p>Stay tuned!</p>
<h2><a class="anchor" id="autotoc_md4330"></a>
GIT YOLO</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/1f26e9567a6d14088704e121ebe787c38b6849a4"><code>1f26e9567</code></a> <code>pacote@2.7.27</code>: Fixes installing committishes that look like semver, even though they're not using the required <code>#semver:</code> syntax. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/85ea1e0b9478551265d03d545e7dc750b9edf547"><code>85ea1e0b9</code></a> <code>npm-package-arg@5.1.1</code>: This includes the npa git-parsing patch to make it so non-hosted SCP-style identifiers are correctly handled. Previously, npa would mangle them (even though hosted-git-info is doing the right thing for them). (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4331"></a>
COOL NEW OUTPUT</h2>
<p>The new summary output has been really well received! One downside that reared its head as more people used it, though, is that it doesn't really tell you anything about the toplevel versions it installed. So, if you did <code>npm i -g foo</code>, it would just say "added 1 package". This patch by <a href="https://github.com/rmg">@rmg</a> keeps things concise while still telling you what you got! So now, you'll see something like this:</p>
<div class="fragment"><div class="line">$ npm i -g foo bar</div>
<div class="line">+ foo@1.2.3</div>
<div class="line">+ bar@3.2.1</div>
<div class="line">added 234 packages in .005ms</div>
</div><!-- fragment --><ul>
<li><a href="https://github.com/npm/npm/commit/362f9fd5bec65301082416b4292b8fe3eb7f824a"><code>362f9fd5b</code></a> <a href="https://github.com/npm/npm/pull/16899">#16899</a> For every package that is given as an argument to install, print the name and version that was actually installed. (<a href="https://github.com/rmg">@rmg</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4332"></a>
OTHER BUGFIXES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/a47593a98a402143081d7077d2ac677d13083010"><code>a47593a98</code></a> <a href="https://github.com/npm/npm/pull/16835">#16835</a> Fix a crash while installing with <code>--no-shrinkwrap</code>. (<a href="https://github.com/jacknagel">@jacknagel</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4333"></a>
DOC UPDATES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/89e0cb8165dd9c3c7ac74d531617f367099608f4"><code>89e0cb816</code></a> <a href="https://github.com/npm/npm/pull/16818">#16818</a> Fixes a spelling error in the docs. Because the CLI team has trouble spelling "package", I guess. (<a href="https://github.com/ankon">@ankon</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c01fbc46e151bcfb359fd68dd7faa392789b4f55"><code>c01fbc46e</code></a> <a href="https://github.com/npm/npm/pull/16895">#16895</a> Remove <code>--save</code> from <code>npm init</code> instructions, since it's now the default. (<a href="https://github.com/jhwohlgemuth">@jhwohlgemuth</a>)</li>
<li><a href="https://github.com/npm/npm/commit/80c42d2181dd4d1b79fcee4e9233df268dfb30b7"><code>80c42d218</code></a> Guard against cycles when inflating bundles, as symlinks are bundles now. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7fe7f86658798db6667df89afc75588c0e43bc94"><code>7fe7f8665</code></a> <a href="https://github.com/npm/npm/issues/16674">#16674</a> Write the builtin config for <code>npmc</code>, not just <code>npm</code>. This is hardcoded for npm self-installations and is needed for Canary to work right. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4334"></a>
DEP UPDATES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/63df4fcddc7445efb50cc7d8e09cdd45146d3e39"><code>63df4fcdd</code></a> <a href="https://github.com/npm/npm/pull/16894">#16894</a> <a href="https://github.com/nodejs/node-gyp/blob/master/CHANGELOG.md#v362-2017-06-01"><code>node-gyp@3.6.2</code></a>: Fixes an issue parsing SDK versions on Windows, among other things. (<a href="https://github.com/refack">@refack</a>)</li>
<li><a href="https://github.com/npm/npm/commit/5bb15c3c4f0d7d77c73fd6dafa38ac36549b6e00"><code>5bb15c3c4</code></a> <code>read-package-tree@5.1.6</code>: Fixes some racyness while reading the tree. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a6f7a52e7"><code>a6f7a52e7</code></a> <code>aproba@1.1.2</code>: Remove nested function declaration for speed up (<a href="https://github.com/mikesherov">@mikesherov</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4335"></a>
v5.0.1 (2017-05-31):</h1>
<p>Hey y'all! Hope you're enjoying the new npm!</p>
<p>As you all know, fresh software that's gone through major overhauls tends to miss a lot of spots the old one used to handle well enough, and <code>npm@5</code> is no exception. The CLI team will be doing faster release cycles that go directly to the <code>latest</code> tag for a couple of weeks while 5 stabilizes a bit and we're confident the common low-hanging fruit people are running into are all taken care of.</p>
<p>With that said: this is our first patch release! The biggest focus is fixing up a number of git-related issues that folks ran into right out the door. It also fixes other things, like some proxy/auth-related issues, and even has a neat speed boost! (You can expect more speed bumps in the coming releases as pending work starts landing, too!)</p>
<p>Thanks everyone who's been reporting issues and submitting patches!</p>
<h2><a class="anchor" id="autotoc_md4336"></a>
BUGFIXES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/e61e68dac4fa51c0540a064204a75b19f8052e58"><code>e61e68dac</code></a> <a href="https://github.com/npm/npm/pull/16762">#16762</a> Make <code>npm publish</code> obey the <code>--tag</code> flag again. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/923fd58d312f40f8c17b232ad1dfc8e2ff622dbd"><code>923fd58d3</code></a> <a href="https://github.com/npm/npm/pull/16749">#16749</a> Speed up installations by nearly 20% by... removing one line of code. (hah) (<a href="https://github.com/mikesherov">@mikesherov</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9aac984cbbfef22182ee42b51a193c0b47146ad6"><code>9aac984cb</code></a> Guard against a particular failure mode for a bug still being hunted down. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/80ab521f18d34df109de0c5dc9eb1cde5ff6d7e8"><code>80ab521f1</code></a> Pull in dependency updates for various core deps:<ul>
<li>New <code>pacote</code> fixes several git-related bugs.</li>
<li><code>ssri</code> update fixes crash on early node@4 versions.</li>
<li><code>make-fetch-happen</code> update fixes proxy authentication issue.</li>
<li><code>npm-user-validate</code> adds regex for blocking usernames with illegal chars. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
</li>
<li><a href="https://github.com/npm/npm/commit/7e5ce87b84880c7433ee4c07d2dd6ce8806df436"><code>7e5ce87b8</code></a> <code>pacote@2.7.26</code>: Fixes various other git issues related to commit hashes. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/acbe85bfc1a68d19ca339a3fb71da0cffbf58926"><code>acbe85bfc</code></a> <a href="https://github.com/npm/npm/pull/16791">#16791</a> <code>npm view</code> was calling <code>cb</code> prematurely and giving partial output when called in a child process. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ebafe48af91f702ccefc8c619d52fed3b8dfd3c7"><code>ebafe48af</code></a> <a href="https://github.com/npm/npm/pull/16750">#16750</a> Hamilpatch the Musical: Talk less, complete more. (<a href="https://github.com/aredridel">@aredridel</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4337"></a>
DOCUMENTATION</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/dc2823a6c5fc098041e61515c643570819d059d2"><code>dc2823a6c</code></a> <a href="https://github.com/npm/npm/pull/16799">#16799</a> Document that <code>package-lock.json</code> is never allowed in tarballs. (<a href="https://github.com/sonicdoe">@sonicdoe</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f3cb84b446c51d628ee0033cdf13752c15b31a29"><code>f3cb84b44</code></a> <a href="https://github.com/npm/npm/pull/16771">#16771</a> Fix <code>npm -l</code> usage information for the <code>test</code> command. (<a href="https://github.com/grawlinson">@grawlinson</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4338"></a>
OTHER CHANGES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/66126230912ab5ab35287b40a9908e036fa73994"><code>661262309</code></a> <a href="https://github.com/npm/npm/pull/16756">#16756</a> remove unused argument (<a href="https://github.com/Aladdin-ADD">@Aladdin-ADD</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c3e0b4287ea69735cc367aa7bb7e7aa9a6d9804b"><code>c3e0b4287</code></a> <a href="https://github.com/npm/npm/pull/16296">#16296</a> preserve same name convention for command (<a href="https://github.com/desfero">@desfero</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9f814831d330dde7702973186aea06caaa77ff31"><code>9f814831d</code></a> <a href="https://github.com/npm/npm/pull/16757">#16757</a> remove unused argument (<a href="https://github.com/Aladdin-ADD">@Aladdin-ADD</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3cb8432397b3666d88c31131dbb4599016a983ff"><code>3cb843239</code></a> minor linter fix (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4339"></a>
v5.0.0 (2017-05-25)</h1>
<p>Wowowowowow npm@5!</p>
<p>This release marks months of hard work for the young, scrappy, and hungry CLI team, and includes some changes we've been hoping to do for literally years. npm@5 takes npm a pretty big step forward, significantly improving its performance in almost all common situations, fixing a bunch of old errors due to the architecture, and just generally making it more robust and fault-tolerant. It comes with changes to make life easier for people doing monorepos, for users who want consistency/security guarantees, and brings semver support to git dependencies. See below for all the deets!</p>
<h2><a class="anchor" id="autotoc_md4340"></a>
Breaking Changes</h2>
<ul>
<li>Existing npm caches will no longer be used: you will have to redownload any cached packages. There is no tool or intention to reuse old caches. (<a href="https://github.com/npm/npm/pull/15666">#15666</a>)</li>
<li><code>npm install ./packages/subdir</code> will now create a symlink instead of a regular installation. <code><a href="file://path/to/tarball.tgz">file://path/to/tarball.tgz</a></code> will not change &ndash; only directories are symlinked. (<a href="https://github.com/npm/npm/pull/15900">#15900</a>)</li>
<li>npm will now scold you if you capitalize its name. seriously it will fight you.</li>
<li><a href="https://twitter.com/maybekatz/status/859229741676625920">npm will <code>--save</code> by default now</a>. Additionally, <code>package-lock.json</code> will be automatically created unless an <code>npm-shrinkwrap.json</code> exists. (<a href="https://github.com/npm/npm/pull/15666">#15666</a>)</li>
<li>Git dependencies support semver through <code>user/repo#semver:^1.2.3</code> (<a href="https://github.com/npm/npm/pull/15308">#15308</a>) (<a href="https://github.com/npm/npm/pull/15666">#15666</a>) (<a href="https://github.com/sankethkatta">@sankethkatta</a>)</li>
<li>Git dependencies with <code>prepare</code> scripts will have their <code>devDependencies</code> installed, and <code>npm install</code> run in their directory before being packed.</li>
<li><code>npm cache</code> commands have been rewritten and don't really work anything like they did before. (<a href="https://github.com/npm/npm/pull/15666">#15666</a>)</li>
<li><code>--cache-min</code> and <code>--cache-max</code> have been deprecated. (<a href="https://github.com/npm/npm/pull/15666">#15666</a>)</li>
<li>Running npm while offline will no longer insist on retrying network requests. npm will now immediately fall back to cache if possible, or fail. (<a href="https://github.com/npm/npm/pull/15666">#15666</a>)</li>
<li>package locks no longer exclude <code>optionalDependencies</code> that failed to build. This means package-lock.json and npm-shrinkwrap.json should now be cross-platform. (<a href="https://github.com/npm/npm/pull/15900">#15900</a>)</li>
<li>If you generated your package lock against registry A, and you switch to registry B, npm will now try to <a href="https://twitter.com/maybekatz/status/862834964932435969">install the packages from registry B, instead of A</a>. If you want to use different registries for different packages, use scope-specific registries (<code>npm config set @myscope:registry=<a href="https://myownregist.ry/packages/">https://myownregist.ry/packages/</a></code>). Different registries for different unscoped packages are not supported anymore.</li>
<li>Shrinkwrap and package-lock no longer warn and exit without saving the lockfile.</li>
<li>Local tarballs can now only be installed if they have a file extensions <code>.tar</code>, <code>.tar.gz</code>, or <code>.tgz</code>.</li>
<li>A new loglevel, <code>notice</code>, has been added and set as default.</li>
<li>One binary to rule them all: <code>./cli.js</code> has been removed in favor of <code>./bin/npm-cli.js</code>. In case you were doing something with <code>./cli.js</code> itself. (<a href="https://github.com/npm/npm/pull/12096">#12096</a>) (<a href="https://github.com/watilde">@watilde</a>)</li>
<li>Stub file removed (<a href="https://github.com/npm/npm/pull/16204">#16204</a>) (<a href="https://github.com/watilde">@watilde</a>)</li>
<li>The "extremely legacy" <code>_token</code> couchToken has been removed. (<a href="https://github.com/npm/npm/pull/12986">#12986</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md4341"></a>
Feature Summary</h2>
<h3><a class="anchor" id="autotoc_md4342"></a>
Installer changes</h3>
<ul>
<li>A new, standardised lockfile feature meant for cross-package-manager compatibility (<code>package-lock.json</code>), and a new format and semantics for shrinkwrap. (<a href="https://github.com/npm/npm/pull/16441">#16441</a>)</li>
<li><code>--save</code> is no longer necessary. All installs will be saved by default. You can prevent saving with <code>--no-save</code>. Installing optional and dev deps is unchanged: use <code>-D/--save-dev</code> and <code>-O/--save-optional</code> if you want them saved into those fields instead. Note that since npm@3, npm will automatically update npm-shrinkwrap.json when you save: this will also be true for <code>package-lock.json</code>. (<a href="https://github.com/npm/npm/pull/15666">#15666</a>)</li>
<li>Installing a package directory now ends up creating a symlink and does the Right Thing™ as far as saving to and installing from the package lock goes. If you have a monorepo, this might make things much easier to work with, and probably a lot faster too. 😁 (<a href="https://github.com/npm/npm/pull/15900">#15900</a>)</li>
<li>Project-level (toplevel) <code>preinstall</code> scripts now run before anything else, and can modify <code>node_modules</code> before the CLI reads it.</li>
<li>Two new scripts have been added, <code>prepack</code> and <code>postpack</code>, which will run on both <code>npm pack</code> and <code>npm publish</code>, but NOT on <code>npm install</code> (without arguments). Combined with the fact that <code>prepublishOnly</code> is run before the tarball is generated, this should round out the general story as far as putzing around with your code before publication.</li>
<li>Git dependencies with <code>prepare</code> scripts will now <a href="https://twitter.com/maybekatz/status/860363896443371520">have their devDependencies installed, and their prepare script executed</a> as if under <code>npm pack</code>.</li>
<li>Git dependencies now support semver-based matching: <code>npm install git://github.com/npm/npm#semver:^5</code> (#15308, #15666)</li>
<li><code>node-gyp</code> now supports <code>node-gyp.cmd</code> on Windows (<a href="https://github.com/npm/npm/pull/14568">#14568</a>)</li>
<li>npm no longer blasts your screen with the whole installed tree. Instead, you'll see a summary report of the install that is much kinder on your shell real-estate. Specially for large projects. (<a href="https://github.com/npm/npm/pull/15914">#15914</a>): <div class="fragment"><div class="line">$ npm install</div>
<div class="line">npm added 125, removed 32, updated 148 and moved 5 packages in 5.032s.</div>
<div class="line">$</div>
</div><!-- fragment --></li>
<li><code>--parseable</code> and <code>--json</code> now work more consistently across various commands, particularly <code>install</code> and <code>ls</code>.</li>
<li>Indentation is now <a href="https://twitter.com/maybekatz/status/860690502932340737">detected and preserved</a> for <code>package.json</code>, <code>package-lock.json</code>, and <code>npm-shrinkwrap.json</code>. If the package lock is missing, it will default to <code>package.json</code>'s current indentation.</li>
</ul>
<h3><a class="anchor" id="autotoc_md4343"></a>
Publishing</h3>
<ul>
<li>New <a href="https://twitter.com/maybekatz/status/863201943082065920">publishes will now include <em>both</em> <code>sha512</code></a> and <code>sha1</code> checksums. Versions of npm from 5 onwards will use the strongest algorithm available to verify downloads. <a href="https://github.com/npm/npm-registry-client/pull/157">npm/npm-registry-client#157</a></li>
</ul>
<h3><a class="anchor" id="autotoc_md4344"></a>
Cache Rewrite!</h3>
<p>We've been talking about rewriting the cache for a loooong time. So here it is. Lots of exciting stuff ahead. The rewrite will also enable some exciting future features, but we'll talk about those when they're actually in the works. #15666 is the main PR for all these changes. Additional PRs/commits are linked inline.</p>
<ul>
<li>Package metadata, package download, and caching infrastructure replaced.</li>
<li>It's a bit faster. <a href="https://twitter.com/maybekatz/status/865393382260056064">Hopefully it will be noticeable</a>. 🤔</li>
<li>With the shrinkwrap and package-lock changes, tarballs will be looked up in the cache by content address (and verified with it).</li>
<li>Corrupted cache entries will <a href="https://twitter.com/maybekatz/status/854933138182557696">automatically be removed and re-fetched</a> on integrity check failure.</li>
<li>npm CLI now supports tarball hashes with any hash function supported by Node.js. That is, it will <a href="https://twitter.com/maybekatz/status/858137093624573953">use <code>sha512</code> for tarballs from registries that send a <code>sha512</code> checksum as the tarball hash</a>. Publishing with <code>sha512</code> is added by <a href="https://github.com/npm/npm-registry-client/pull/157">npm/npm-registry-client#157</a> and may be backfilled by the registry for older entries.</li>
<li>Remote tarball requests are now cached. This means that even if you're missing the <code>integrity</code> field in your shrinkwrap or package-lock, npm will be able to install from the cache.</li>
<li>Downloads for large packages are streamed in and out of disk. npm is now able to install packages of """any""" size without running out of memory. Support for publishing them is pending (due to registry limitations).</li>
<li><a href="https://twitter.com/maybekatz/status/854176565587984384">Automatic fallback-to-offline mode</a>. npm will seamlessly use your cache if you are offline, or if you lose access to a particular registry (for example, if you can no longer access a private npm repo, or if your git host is unavailable).</li>
<li>A new <code>--prefer-offline</code> option will make npm skip any conditional requests (304 checks) for stale cache data, and <em>only</em> hit the network if something is missing from the cache.</li>
<li>A new <code>--prefer-online</code> option that will force npm to revalidate cached data (with 304 checks), ignoring any staleness checks, and refreshing the cache with revalidated, fresh data.</li>
<li>A new <code>--offline</code> option will force npm to use the cache or exit. It will error with an <code>ENOTCACHED</code> code if anything it tries to install isn't already in the cache.</li>
<li>A new <code>npm cache verify</code> command that will garbage collect your cache, reducing disk usage for things you don't need (-handwave-), and will do full integrity verification on both the index and the content. This is also hooked into <code>npm doctor</code> as part of its larger suite of checking tools.</li>
<li>The new cache is <em>very</em> fault tolerant and supports concurrent access.<ul>
<li>Multiple npm processes will not corrupt a shared cache.</li>
<li>Corrupted data will not be installed. Data is checked on both insertion and extraction, and treated as if it were missing if found to be corrupted. I will literally bake you a cookie if you manage to corrupt the cache in such a way that you end up with the wrong data in your installation (installer bugs notwithstanding).</li>
<li><code>npm cache clear</code> is no longer useful for anything except clearing up disk space.</li>
</ul>
</li>
<li>Package metadata is cached separately per registry and package type: you can't have package name conflicts between locally-installed packages, private repo packages, and public repo packages. Identical tarball data will still be shared/deduplicated as long as their hashes match.</li>
<li>HTTP cache-related headers and features are "fully" (lol) supported for both metadata and tarball requests &ndash; if you have your own registry, you can define your own cache settings the CLI will obey!</li>
<li><code>prepublishOnly</code> now runs <em>before</em> the tarball to publish is created, after <code>prepare</code> has run. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
