<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fuzzuf: VUzzer ビルド手順</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fuzzuf
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">VUzzer ビルド手順 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>（参考情報）Why PolyTracker?</p>
<p>VUzzer には以下に示す追加の外部依存があります。</p>
<ul>
<li>Python 3.7以上</li>
<li>Intel Pin 3.7</li>
<li>fuzzuf/PolyTracker</li>
</ul>
<p>本手順では上記依存の解決方法について解説したのち、VUzzerのビルド方法を解説します。</p>
<h1><a class="anchor" id="autotoc_md406"></a>
Python</h1>
<p>Polytrackerの動作のため、バージョン3.7以上のPythonが必要です。</p>
<p>Ubuntu 20.04の場合、aptを通してインストール可能な <code>python3</code> パッケージ（バージョン3.8）が利用可能です。次のIntel Pinの節に進んでください。</p>
<p>Ubuntu 18.04またはその他の環境の場合、aptからインストール可能なpython3のバージョンは3.6であり要件を満たしません。したがって、<a href="https://github.com/pyenv/pyenv">pyenv</a> などを使ってバージョン3.7以上のPythonを別途インストールする必要があります。</p>
<p>以下は pyenv を使用する場合のインストール手順です。</p>
<div class="fragment"><div class="line">### 予めPythonが必要とする依存関係をインストールします。詳しくは各環境のドキュメントを参照してください。</div>
<div class="line">### https://github.com/pyenv/pyenv/wiki#suggested-build-environment</div>
<div class="line"> </div>
<div class="line">### pyenvをダウンロードし、パスを通します</div>
<div class="line">curl https://pyenv.run | bash</div>
<div class="line">export PATH=&quot;$HOME/.pyenv/bin:$PATH&quot;</div>
<div class="line">eval $(pyenv init --path)</div>
<div class="line"> </div>
<div class="line">### pyenv環境でPython 3.7をビルド＆インストールします</div>
<div class="line">pyenv install 3.7.12</div>
<div class="line">pyenv local 3.7.12</div>
</div><!-- fragment --><p>他のインストール方法を採用する場合、システムで認識されている <code>python3</code> がPython 3.7以上という要件を満たすようにセットアップをお願いします。</p>
<p>最後に、以下のようにお使いのシェルで <code>python3</code> のバージョンが3.7以上であることを確認できればOKです。 Intel Pinの節に進んでください。</p>
<div class="fragment"><div class="line">$ python3 --version</div>
<div class="line">Python 3.7.12</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md407"></a>
Intel Pin</h1>
<p>Intelの公式サイトからIntel Pin 3.7をダウンロードし、任意のディレクトリに展開してください。</p>
<div class="fragment"><div class="line">wget https://software.intel.com/sites/landingpage/pintool/downloads/pin-3.7-97619-g0d0c92f4f-gcc-linux.tar.gz</div>
<div class="line">tar -zxvf pin-3.7-97619-g0d0c92f4f-gcc-linux.tar.gz</div>
</div><!-- fragment --><p>手順は以上です。PolyTrackerの節に進んでください。</p>
<h1><a class="anchor" id="autotoc_md408"></a>
PolyTracker</h1>
<p>fuzzuf版VUzzerは、データフロー解析手段として <a href="https://github.com/fuzzuf/polytracker">fuzzuf/polytracker</a> を採用します。</p>
<p>&lt;details&gt;</p>
<p>参考実装とした <a href="https://github.com/vusec/vuzzer64">オリジナルのVUzzer</a> はデータフロー解析として <a href="https://github.com/vusec/vuzzer64/tree/master/libdft64">libdft64</a> を採用しています。われわれがlibdft64の代わりにPolyTrackerを採用する理由は、われわれがlibdft64のデータフロー解析の精度を評価した結果、Ubuntu 18.04や20.04ではVUzzerの再現に必要な解析精度が達成されないと結論したからです。</p>
<p>fuzzufが採用するPolyTrackerは、本家である <a href="https://github.com/trailofbits/polytracker">trailofbits/polytracker</a> に改造を施したものです。改造は、libdft64のデータフロー解析をPolyTrackerで再現することを目的とします。 &lt;/details&gt;</p>
<p>PolyTrackerのビルド＆インストールは <a href="https://github.com/fuzzuf/polytracker/blob/feature/make-polytracker-libdft64-compatible/README.md">PolyTrackerのREADME</a> で案内されている手順を実施してください。</p>
<h1><a class="anchor" id="autotoc_md409"></a>
fuzzuf</h1>
<p>最後にfuzzufをビルドします。レポジトリをクローンしたディレクトリまで移動し以下のコマンドを実行すれば完了です。 <br  />
 cmakeの <code>PIN_ROOT</code> パラメータにはIntel Pinの節で展開したIntel Pin 3.7のディレクトリを指定してください。</p>
<div class="fragment"><div class="line">cd /path/to/fuzzuf/directory</div>
<div class="line">### fuzzuf のルートディレクトリで実行</div>
<div class="line">cmake -B build -DCMAKE_BUILD_TYPE=Debug -DDEFAULT_RUNLEVEL=Debug -DPIN_ROOT=&lt;Intel Pinを展開したディレクトリへのパス&gt;</div>
<div class="line">cd build</div>
<div class="line">make</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
