<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fuzzuf: Installation notes for macOS Catalina (v10.15)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fuzzuf
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Installation notes for macOS Catalina (v10.15) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><em>This document specifically refers to upgrades from previous versions of macOS to Catalina (10.15). It should be removed from the source repository when Catalina ceases to be the latest macOS version or when future Catalina versions no longer raise these issues.</em></p>
<p><b>Upgrading to macOS Catalina may cause normal <code>node-gyp</code> installations to fail.</b></p>
<h2><a class="anchor" id="autotoc_md8480"></a>
Is my Mac running macOS Catalina?</h2>
<p>Let's first make sure that your Mac is running Catalina: </p><div class="fragment"><div class="line">% sw_vers</div>
<div class="line">    ProductName:    Mac OS X</div>
<div class="line">    ProductVersion: 10.15</div>
<div class="line">    BuildVersion:   19A602</div>
</div><!-- fragment --><p>If <code>ProductVersion</code> is less then <code>10.15</code> then this document is not for you. Normal install docs for <code>node-gyp</code> on macOS can be found at <a href="https://github.com/nodejs/node-gyp#on-macos">https://github.com/nodejs/node-gyp#on-macos</a></p>
<h2><a class="anchor" id="autotoc_md8481"></a>
The acid test</h2>
<p>To see if <code>Xcode Command Line Tools</code> is installed in a way that will work with <code>node-gyp</code>, run:</p><ol type="1">
<li><code>/usr/sbin/pkgutil --packages | grep CL</code><ul>
<li><code>com.apple.pkg.CLTools_Executables</code> should be listed. If it isn't, this test failed.</li>
</ul>
</li>
<li><code>/usr/sbin/pkgutil --pkg-info com.apple.pkg.CLTools_Executables</code><ul>
<li><code>version: 11.0.0</code> (or later) should be listed. If it isn't, this test failed.</li>
</ul>
</li>
</ol>
<p>If both tests succeeded, <em>you are done</em>! You should be ready to install <code>node-gyp</code>.</p>
<p>If either test failed, there is a problem with your Xcode Command Line Tools installation. <a href="#Solutions">Continue to Solutions</a>.</p>
<h2><a class="anchor" id="autotoc_md8482"></a>
Solutions</h2>
<p>There are three ways to install the Xcode libraries <code>node-gyp</code> needs on macOS. People running Catalina have had success with some but not others in a way that has been unpredictable.</p>
<ol type="1">
<li>With the full Xcode (~7.6 GB download) from the <code>App Store</code> app.</li>
<li>With the <em>much</em> smaller Xcode Command Line Tools via <code>xcode-select --install</code></li>
<li>With the <em>much</em> smaller Xcode Command Line Tools via manual download. <b>For people running the latest version of Catalina (10.15.2 at the time of this writing), this has worked when the other two solutions haven't.</b></li>
</ol>
<h2><a class="anchor" id="autotoc_md8483"></a>
Installing &lt;tt&gt;node-gyp&lt;/tt&gt; using the full Xcode</h2>
<ol type="1">
<li><code>xcodebuild -version</code> should show <code>Xcode 11.1</code> or later.<ul>
<li>If not, then install/upgrade Xcode from the App Store app.</li>
</ul>
</li>
<li>Open the Xcode app and...<ul>
<li>Under <b>Preferences &gt; Locations</b> select the tools if their location is empty.</li>
<li>Allow Xcode app to do an essential install of the most recent compiler tools.</li>
</ul>
</li>
<li>Once all installations are <em>complete</em>, quit out of Xcode.</li>
<li><code>sudo xcodebuild -license accept</code> # If you agree with the licensing terms.</li>
<li><code>softwareupdate -l</code> # No listing is a good sign.<ul>
<li>If Xcode or Tools upgrades are listed, use "Software Upgrade" to install them.</li>
</ul>
</li>
<li><code>xcode-select -version</code> # Should return <code>xcode-select version 2370</code> or later.</li>
<li><code>xcode-select -print-path</code> # Should return <code>/Applications/Xcode.app/Contents/Developer</code></li>
<li>Try the <a href="#The-acid-test"><em>acid test</em> steps above</a> to see if your Mac is ready.</li>
<li>If the <em>acid test</em> does <em>not</em> pass then...</li>
<li><code>sudo xcode-select --reset</code> # Enter root password. No output is normal.</li>
<li>Repeat step 7 above. Is the path different this time? Repeat the <em>acid test</em>.</li>
</ol>
<h2><a class="anchor" id="autotoc_md8484"></a>
Installing &lt;tt&gt;node-gyp&lt;/tt&gt; using the Xcode Command Line Tools via &lt;tt&gt;xcode-select --install&lt;/tt&gt;</h2>
<ol type="1">
<li>If the <em>acid test</em> has not succeeded, then try <code>xcode-select --install</code></li>
<li>Wait until the install process is <em>complete</em>.</li>
<li><code>softwareupdate -l</code> # No listing is a good sign.<ul>
<li>If Xcode or Tools upgrades are listed, use "Software Update" to install them.</li>
</ul>
</li>
<li><code>xcode-select -version</code> # Should return <code>xcode-select version 2370</code> or later.</li>
<li><code>xcode-select -print-path</code> # Should return <code>/Library/Developer/CommandLineTools</code></li>
<li>Try the <a href="#The-acid-test"><em>acid test</em> steps above</a> to see if your Mac is ready.</li>
<li>If the <em>acid test</em> does <em>not</em> pass then...</li>
<li><code>sudo xcode-select --reset</code> # Enter root password. No output is normal.</li>
<li>Repeat step 5 above. Is the path different this time? Repeat the <em>acid test</em>.</li>
</ol>
<h2><a class="anchor" id="autotoc_md8485"></a>
Installing &lt;tt&gt;node-gyp&lt;/tt&gt; using the Xcode Command Line Tools via manual download</h2>
<ol type="1">
<li>Download the appropriate version of the "Command Line Tools for Xcode" for your version of Catalina from developer.apple.com/download. As of MacOS 10.15.2, that's Command_Line_Tools_for_Xcode_11.3.dmg</li>
<li>Install the package.</li>
<li>Run the <em>acid test</em>.</li>
</ol>
<h2><a class="anchor" id="autotoc_md8486"></a>
I did all that and the acid test still does not pass :-(</h2>
<ol type="1">
<li><code>sudo rm -rf $(xcode-select -print-path)</code> # Enter root password. No output is normal.</li>
<li><code>xcode-select --install</code></li>
<li>If the <a href="#The-acid-test"><em>acid test</em></a> still does <em>not</em> pass then...</li>
<li><code>npm explore npm -g -- npm install node-gyp@latest</code></li>
<li><code>npm explore npm -g -- npm explore npm-lifecycle -- npm install node-gyp@latest</code></li>
<li>If the <em>acid test</em> still does <em>not</em> pass then...</li>
<li>Add a comment to <a href="https://github.com/nodejs/node-gyp/issues/1927">https://github.com/nodejs/node-gyp/issues/1927</a> so we can improve.</li>
</ol>
<p>Lessons learned from:</p><ul>
<li><a href="https://github.com/nodejs/node-gyp/issues/1779">https://github.com/nodejs/node-gyp/issues/1779</a></li>
<li><a href="https://github.com/nodejs/node-gyp/issues/1861">https://github.com/nodejs/node-gyp/issues/1861</a></li>
<li><a href="https://github.com/nodejs/node-gyp/issues/1927">https://github.com/nodejs/node-gyp/issues/1927</a> and elsewhere</li>
<li>Thanks to @rrrix for discovering Solution 3 </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
