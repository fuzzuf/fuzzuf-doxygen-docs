<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fuzzuf: libnpmpublish &lt;a href=&quot;https://npm.im/libnpmpublish&quot;&gt;&lt;img src=&quot;https://img.shields.io/npm/v/libnpmpublish.svg&quot; alt=&quot;npm version&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://npm.im/libnpmpublish&quot;&gt;&lt;img src=&quot;https://img.shields.io/npm/l/libnpmpublish.svg&quot; alt=&quot;license&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://travis-ci.org/npm/libnpmpublish&quot;&gt;&lt;img src=&quot;https://img.shields.io/travis/npm/libnpmpublish.svg&quot; alt=&quot;Travis&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://ci.appveyor.com/project/zkat/libnpmpublish&quot;&gt;&lt;img src=&quot;https://ci.appveyor.com/api/projects/status/github/zkat/libnpmpublish?svg=true&quot; alt=&quot;AppVeyor&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://coveralls.io/github/npm/libnpmpublish?branch=latest&quot;&gt;&lt;img src=&quot;https://coveralls.io/repos/github/npm/libnpmpublish/badge.svg?branch=latest&quot; alt=&quot;Coverage Status&quot;/&gt;&lt;/a&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fuzzuf
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">libnpmpublish <a href="https://npm.im/libnpmpublish"><object type="image/svg+xml" data="https://img.shields.io/npm/v/libnpmpublish.svg" style="pointer-events: none;">npm version</object></a> <a href="https://npm.im/libnpmpublish"><object type="image/svg+xml" data="https://img.shields.io/npm/l/libnpmpublish.svg" style="pointer-events: none;">license</object></a> <a href="https://travis-ci.org/npm/libnpmpublish"><object type="image/svg+xml" data="https://img.shields.io/travis/npm/libnpmpublish.svg" style="pointer-events: none;">Travis</object></a> <a href="https://ci.appveyor.com/project/zkat/libnpmpublish"><img src="https://ci.appveyor.com/api/projects/status/github/zkat/libnpmpublish?svg=true" alt="AppVeyor" class="inline"/></a> <a href="https://coveralls.io/github/npm/libnpmpublish?branch=latest"><object type="image/svg+xml" data="https://coveralls.io/repos/github/npm/libnpmpublish/badge.svg?branch=latest" style="pointer-events: none;">Coverage Status</object></a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://github.com/npm/libnpmpublish"><code>libnpmpublish</code></a> is a Node.js library for programmatically publishing and unpublishing npm packages. It does not take care of packing tarballs from source code, but once you have a tarball, it can take care of putting it up on a nice registry for you.</p>
<h1><a class="anchor" id="autotoc_md8151"></a>
Example</h1>
<div class="fragment"><div class="line">const { publish, unpublish } = require(&#39;libnpmpublish&#39;)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md8152"></a>
Install</h1>
<p><code>$ npm install libnpmpublish</code></p>
<h1><a class="anchor" id="autotoc_md8153"></a>
Table of Contents</h1>
<ul>
<li><a href="#example">Example</a></li>
<li><a href="#install">Install</a></li>
<li><a href="#api">API</a><ul>
<li><a href="#opts">publish/unpublish opts</a></li>
<li><a href="#publish"><code>publish()</code></a></li>
<li><a href="#unpublish"><code>unpublish()</code></a></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md8154"></a>
API</h2>
<h3><a class="anchor" id="autotoc_md8155"></a>
&lt;a name="opts"&gt;&lt;/a&gt; &lt;tt&gt;opts&lt;/tt&gt; for &lt;tt&gt;libnpmpublish&lt;/tt&gt; commands</h3>
<p><code>libnpmpublish</code> uses <a href="https://npm.im/npm-registry-fetch"><code>npm-registry-fetch</code></a>. Most options are passed through directly to that library, so please refer to <a href="https://www.npmjs.com/package/npm-registry-fetch#fetch-options">its own <code>opts</code> documentation</a> for options that can be passed in.</p>
<p>A couple of options of note for those in a hurry:</p>
<ul>
<li><code>opts.token</code> - can be passed in and will be used as the authentication token for the registry. For other ways to pass in auth details, see the n-r-f docs.</li>
<li><code>opts.Promise</code> - If you pass this in, the Promises returned by <code>libnpmpublish</code> commands will use this Promise class instead. For example: &lsquo;{Promise: require('bluebird&rsquo;)}`</li>
</ul>
<h3><a class="anchor" id="autotoc_md8156"></a>
&lt;a name="publish"&gt;&lt;/a&gt; &lt;tt&gt;&gt; libpub.publish(pkgJson, tarData, [opts]) -&gt; Promise&lt;/tt&gt;</h3>
<p>Publishes <code>tarData</code> to the appropriate configured registry. <code>pkgJson</code> should be the parsed <code>package.json</code> for the package that is being published.</p>
<p><code>tarData</code> can be a Buffer, a base64-encoded string, or a binary stream of data. Note that publishing itself can't be streamed, so the entire stream will be consumed into RAM before publishing (and are thus limited in how big they can be).</p>
<p>Since <code>libnpmpublish</code> does not generate tarballs itself, one way to build your own tarball for publishing is to do <code>npm pack</code> in the directory you wish to pack. You can then &lsquo;fs.createReadStream('my-proj-1.0.0.tgz&rsquo;)<code>and pass that to </code>libnpmpublish<code>, along with</code>require('./package.json')`.</p>
<p><code>publish()</code> does its best to emulate legacy publish logic in the standard npm client, and so should generally be compatible with any registry the npm CLI has been able to publish to in the past.</p>
<p>If <code>opts.npmVersion</code> is passed in, it will be used as the <code>_npmVersion</code> field in the outgoing packument. It's recommended you add your own user agent string in there!</p>
<p>If <code>opts.algorithms</code> is passed in, it should be an array of hashing algorithms to generate <code>integrity</code> hashes for. The default is &lsquo;['sha512&rsquo;]<code>, which means you end up with</code>dist.integrity = 'sha512-deadbeefbadc0ffee'`. Any algorithm supported by your current node version is allowed &ndash; npm clients that do not support those algorithms will simply ignore the unsupported hashes.</p>
<p>If <code>opts.access</code> is passed in, it must be one of <code>public</code> or <code>restricted</code>. Unscoped packages cannot be <code>restricted</code>, and the registry may agree or disagree with whether you're allowed to publish a restricted package.</p>
<h4><a class="anchor" id="autotoc_md8157"></a>
Example</h4>
<div class="fragment"><div class="line">const pkg = require(&#39;./dist/package.json&#39;)</div>
<div class="line">const tarball = fs.createReadStream(&#39;./dist/pkg-1.0.1.tgz&#39;)</div>
<div class="line">await libpub.publish(pkg, tarball, {</div>
<div class="line">  npmVersion: &#39;my-pub-script@1.0.2&#39;,</div>
<div class="line">  token: &#39;my-auth-token-here&#39;</div>
<div class="line">})</div>
<div class="line">// Package has been published to the npm registry.</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md8158"></a>
&lt;a name="unpublish"&gt;&lt;/a&gt; &lt;tt&gt;&gt; libpub.unpublish(spec, [opts]) -&gt; Promise&lt;/tt&gt;</h3>
<p>Unpublishes <code>spec</code> from the appropriate registry. The registry in question may have its own limitations on unpublishing.</p>
<p><code>spec</code> should be either a string, or a valid <a href="https://npm.im/npm-package-arg"><code>npm-package-arg</code></a> parsed spec object. For legacy compatibility reasons, only <code>tag</code> and <code>version</code> specs will work as expected. <code>range</code> specs will fail silently in most cases.</p>
<h4><a class="anchor" id="autotoc_md8159"></a>
Example</h4>
<div class="fragment"><div class="line">await libpub.unpublish(&#39;lodash&#39;, { token: &#39;i-am-the-worst&#39;})</div>
<div class="line">//</div>
<div class="line">// `lodash` has now been unpublished, along with all its versions, and the world</div>
<div class="line">// devolves into utter chaos.</div>
<div class="line">//</div>
<div class="line">// That, or we all go home to our friends and/or family and have a nice time</div>
<div class="line">// doing nothing having to do with programming or JavaScript and realize our</div>
<div class="line">// lives are just so much happier now, and we just can&#39;t understand why we ever</div>
<div class="line">// got so into this JavaScript thing but damn did it pay well. I guess you&#39;ll</div>
<div class="line">// settle for gardening or something.</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
