<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fuzzuf: How to use Eclipser on fuzzuf</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fuzzuf
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">How to use Eclipser on fuzzuf </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md11773"></a>
Usage</h1>
<div class="fragment"><div class="line">$ fuzzuf eclipser [options]</div>
</div><!-- fragment --><p>Eclipser is a gray-box concolic testing tool expected to run as a side car of AFL fuzzer. Eclipser retrieves branch condition using QEMU based tracer and find change of branch operand values that depends on inputs. The algorithm first try to describe relation between inputs and operand values in linear equation. If that fit, the input value causing pass the branch is generated by the linear equation. Otherwise, the algorithm try to find input value causing pass the branch by binary search. This expects that the relation of the input and operand values is monotonic. Monotonic means, during the input value is increasing or decreasing in one direction, the operand value will change in one direction or stay in same value. If relation of inputs and operand values is not linear nor monotonic, the algorithm fail to generate the input value that can pass the branch. Although, Eclipser may fail to generate an appropriate input, as combined fuzzer generates randomly mutated inputs to take over, the failure is not critical.</p>
<p>Since the algorithm instrument binary dynamically using QEMU, PUT need not to be built using special compiler to insert instrumentation. The patch for QEMU is implemented intrusively in the i386 to TCG translator. This causes Eclipser only works for x86 or x86_64 binaries.</p>
<p>Basic usage is shown below.</p>
<div class="fragment"><div class="line">$ ./fuzzuf eclipser --out_dir &lt;SYNCDIR&gt;/eclipser -s &lt;SYNCDIR&gt; --program &lt;PUT&gt; --noforkserver --filepath &lt;INPUT_FILE_PATH&gt; --arg &lt;INPUT_FILE_PATH&gt; -v 2</div>
</div><!-- fragment --><p>SYNCDIR is a directory the combined fuzzer is reading and writing the state(typically called "sync dir" in AFL like fuzzer). In the configuration avobe, Eclipser writes it's own state in &lt;SYNCDIR&gt;/eclipser, and reads input values generated by others from directories in &lt;SYNCDIR&gt; excluding &lt;SYNCDIR&gt;/eclipser.</p>
<p>PUT is a path to the executable to run.</p>
<p>Eclipser writes current input value to the file &lt;INPUT_FILE_PATH&gt;. If the &ndash;filepath is not set, Eclipser pass the input value over standard input.</p>
<p>&ndash;noforkserver disables fork server mode.</p>
<p>-v specifies the verbosity. 2 means output all messages. 1 means output only important messages. 0 means no messages.</p>
<h1><a class="anchor" id="autotoc_md11774"></a>
Options</h1>
<p>Note that some options have short arg name which conflict with global options. Those short names cannot be used in fact.</p>
<h2><a class="anchor" id="autotoc_md11775"></a>
–verbose arg</h2>
<p>Verbosity level to control debug messages in integer</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight">arg </th><th class="markdownTableHeadNone">effect  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">0 </td><td class="markdownTableBodyNone">disable messages  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">1 </td><td class="markdownTableBodyNone">output found seeds  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">2 </td><td class="markdownTableBodyNone">output found seeds and progress  </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md11776"></a>
–timeimit arg</h2>
<p>Timeout for fuzz testing (in seconds). If the value is set to positive, Eclipser will exit after the specified seconds. If the value is set to zero, Eclipser will exit immediately. If the value is set to negative, Eclipser will not exit. Default value is -1.</p>
<h2><a class="anchor" id="autotoc_md11777"></a>
–outputdir arg</h2>
<p>Directory to store testcase outputs. The seeds eclipser found are written under the directory. If not set, global output directory is used.</p>
<h2><a class="anchor" id="autotoc_md11778"></a>
–syncdir arg</h2>
<p>Mandatory option. Directory shared with AFL instances. The directory containing all fuzzing processes state. This directory is called "sync dir" in AFL term. To make other processes can retrieve eclipser generated seeds, &ndash;outputdir need to be located under the &ndash;syncdir.</p>
<h2><a class="anchor" id="autotoc_md11779"></a>
–program arg</h2>
<p>Mandatory option. Target program for test case generation with fuzzing.</p>
<h2><a class="anchor" id="autotoc_md11780"></a>
–exectimeout arg</h2>
<p>Execution timeout (ms) for a fuzz run. If the PUT execution time exceed this, PUT is terminated and the execution result is marked as "timeout". Default value is 500milliseconds.</p>
<h2><a class="anchor" id="autotoc_md11781"></a>
–architecture arg</h2>
<p>Target program architecture (x86|x64)</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight">arg </th><th class="markdownTableHeadNone">effect  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">x86 </td><td class="markdownTableBodyNone"><a class="el" href="classExecute.html" title="Run target with input specified by the Path, and acquire coverage, outputs, execution result to the v...">Execute</a> PUT on qemu-i386  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">x64 </td><td class="markdownTableBodyNone"><a class="el" href="classExecute.html" title="Run target with input specified by the Path, and acquire coverage, outputs, execution result to the v...">Execute</a> PUT on qemu-x86_64  </td></tr>
</table>
<p>Default value is x64</p>
<h2><a class="anchor" id="autotoc_md11782"></a>
–noforkserver</h2>
<p>Do not use fork server for target program execution.</p>
<h2><a class="anchor" id="autotoc_md11783"></a>
–inputdir arg</h2>
<p>Directory containing initial seeds. This value is not used.</p>
<h2><a class="anchor" id="autotoc_md11784"></a>
–arg arg</h2>
<p>Command-line argument of the target program to fuzz. The argument is splitted by space. There is no escape sequence to pass space itself as an argument. Note that the argument does NOT support the AFL-like <code>@@</code> fuzz input marker. To supply a fuzz input as a file, use the path specified with <code>--filepath</code> option. For example, if the PUT arguments are <code>-f @@</code> on AFL, the options on Eclipser will be <code>--filepath /tmp/input --arg "-f /tmp/input"</code>. Default value is empty.</p>
<h2><a class="anchor" id="autotoc_md11785"></a>
–filepath arg</h2>
<p>If the arg is set, the input value eclipser generated is written into the specified file before it executes PUT. Otherwise, the input value is written to the standard input of PUT.</p>
<h2><a class="anchor" id="autotoc_md11786"></a>
–nsolve arg</h2>
<p>Number of branches to flip in grey-box concolic testing when an execution path is given. 'N_solve' parameter in the paper. Default value is 600.</p>
<h2><a class="anchor" id="autotoc_md11787"></a>
–nspawn arg</h2>
<p>Number of byte values to initially spawn in grey-box concolic testing. 'N_spawn' parameter in the paper. Default value is 10. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
