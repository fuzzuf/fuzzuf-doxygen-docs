<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fuzzuf: v4.6.1 (2017-04-21)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fuzzuf
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">v4.6.1 (2017-04-21) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A little release to tide you over while we hammer out the last bits for npm@5.</p>
<h2><a class="anchor" id="autotoc_md3622"></a>
FEATURES</h2>
<ul>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/d13c9b2f24b6380427f359b6e430b149ac8aaa79"><code>d13c9b2f2</code></a> <code>init-package-json@1.10.0</code>: The <code>name:</code> prompt is now <code>package name:</code> to make this less ambiguous for new users.</p>
<p class="startli">The default package name is now a valid package name. For example: If your package directory has mixed case, the default package name will be all lower case.</p>
</li>
<li><a href="https://github.com/npm/npm/commit/f08c663231099f7036eb82b92770806a3a79cdf1"><code>f08c66323</code></a> <a href="https://github.com/npm/npm/pull/16213">#16213</a> Add <code>--allow-same-version</code> option to <code>npm version</code> so that you can use <code>npm version</code> to run your version lifecycles and tag your git repo without actually changing the version number in your <code>package.json</code>. (<a href="https://github.com/lucastheisen">@lucastheisen</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f5e8becd05e0426379eb0c999abdbc8e87a7f6f2"><code>f5e8becd0</code></a> Timing has been added throughout the install implementation. You can see it by running a command with <code>--loglevel=timing</code>. You can also run commands with <code>--timing</code> which will write an <code>npm-debug.log</code> even on success and add an entry to <code>_timing.json</code> in your cache with the timing information from that run. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3623"></a>
BUG FIXES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/9c860f2ed3bdea1417ed059b019371cd253db2ad"><code>9c860f2ed</code></a> <a href="https://github.com/npm/npm/pull/16021">#16021</a> Fix a crash in <code>npm doctor</code> when used with a registry that does not support the <code>ping</code> API endpoint. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/65b9943e9424c67547b0029f02b0258e35ba7d26"><code>65b9943e9</code></a> <a href="https://github.com/npm/npm/pull/16364">#16364</a> Shorten the ELIFECYCLE error message. The shorter error message should make it much easier to discern the actual cause of the error. (<a href="https://github.com/j-f1">@j-f1</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a87a4a8359693518ee41dfeb13c5a8929136772a"><code>a87a4a835</code></a> <code>npmlog@4.0.2</code>: Fix flashing of the progress bar when your terminal is very narrow. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/41c10974fe95a2e520e33e37725570c75f6126ea"><code>41c10974f</code></a> <code>write-file-atomic@1.3.2</code>: Wait for <code>fsync</code> to complete before considering our file written to disk. This will improve certain sorts of Windows diagnostic problems.</li>
<li><a href="https://github.com/npm/npm/commit/2afa9240ce5b391671ed5416464f2882d18a94bc"><code>2afa9240c</code></a> <a href="https://github.com/npm/npm/pull/16336">#16336</a> Don't ham-it-up when expecting JSON. (<a href="https://github.com/bdukes">@bdukes</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3624"></a>
DOCUMENTATION FIXES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/566f3eebe741f935b7c1e004bebf19b8625a1413"><code>566f3eebe</code></a> <a href="https://github.com/npm/npm/pull/16296">#16296</a> Use a single convention when referring to the <code>&lt;command&gt;</code> you're running. (<a href="https://github.com/desfero">@desfero</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ccbb94934d4f677f680c3e2284df3d0ae0e65758"><code>ccbb94934</code></a> <a href="https://github.com/npm/npm/pull/16267">#16267</a> Fix a missing space in the example package.json. (<a href="https://github.com/famousgarkin">@famousgarkin</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3625"></a>
DEPENDENCY UPDATES</h2>
<ul>
<li><a href="https://github.com/npm/npm/commit/ebde4ea3363dfc154c53bd537189503863c9b3a4"><code>ebde4ea33</code></a> <code>hosted-git-info@2.4.2</code></li>
<li><a href="https://github.com/npm/npm/commit/c46ad71bbe27aaa9ee10e107d8bcd665d98544d7"><code>c46ad71bb</code></a> <code>init-package-json@1.9.6</code></li>
<li><a href="https://github.com/npm/npm/commit/d856d570d2df602767c039cf03439d647bba2e3d"><code>d856d570d</code></a> <code>npm-registry-client@8.1.1</code></li>
<li><a href="https://github.com/npm/npm/commit/4a2e1443613a199665e7adbda034d5b9d10391a2"><code>4a2e14436</code></a> <code>readable-stream@2.2.9</code></li>
<li><a href="https://github.com/npm/npm/commit/f0399138e6d6f1cd7f807d523787a3b129996301"><code>f0399138e</code></a> <code>normalize-package-data@2.3.8</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md3626"></a>
v4.5.0 (2017-03-24)</h2>
<p>Welcome a wrinkle on npm's registry API!</p>
<p>Codename: Corgi</p>
<p><img src="https://cloud.githubusercontent.com/assets/757502/24126107/64c14268-0d89-11e7-871b-d457e6d0082b.jpg" alt="corgi-meme" class="inline"/></p>
<p>This release has some bug fixes, but it's mostly about bringing support for MUCH smaller package metadata. How much smaller? Well, for npm itself it reduces 416K of gzip compressed JSON to 24K.</p>
<p>As a user, all you have to do is update to get to use the new API. If you're interested in the details we've <a href="https://github.com/npm/registry/blob/master/docs/responses/package-metadata.md">documented the changes</a> in detail.</p>
<h3><a class="anchor" id="autotoc_md3627"></a>
CORGUMENTS</h3>
<p>Package metadata: now smaller. This means a smaller cache and less to download.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/86dad0d747f288eab467d49c9635644d3d44d6f0"><code>86dad0d74</code></a> Add support for filtered package metadata. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/41789cffac9845603f4bdf3f5b03f412144a0e9f"><code>41789cffa</code></a> <code>npm-registry-client@8.1.0</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3628"></a>
NO SHRINKWRAP, NO PROBLEM</h3>
<p>Previously we needed to extract every package's tarball to look for an <code>npm-shrinkwrap.json</code> before we could begin working through what its dependencies were. This was one of the things stopping npm's network accesses from happening more concurrently. The new filtered package metadata provides a new key, <code>_hasShrinkwrap</code>. When that's set to <code>false</code> then we know we don't have to look for one.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/4f5060eb31b9091013e1d6a34050973613a294a3"><code>4f5060eb3</code></a> <a href="https://github.com/npm/npm/pull/15969">#15969</a> Add support for skipping <code>npm-shrinkwrap.json</code> extraction when the registry can affirm that one doesn't exist. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3629"></a>
INTERRUPTING SCRIPTS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/878aceb25e6d6052dac15da74639ce274c8e62c5"><code>878aceb25</code></a> <a href="https://github.com/npm/npm/pull/16129">#16129</a> Better handle Ctrl-C while running scripts. <code>npm</code> will now no longer exit until the script it is running has exited. If you press Ctrl-C a second time it kill the script rather than just forwarding the Ctrl-C. (<a href="https://github.com/jaridmargolin">@jaridmargolin</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3630"></a>
DEPENDENCY UPDATES:</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/def75eebf1ad437bf4fd3f5e103cc2d963bd2a73"><code>def75eebf</code></a> <code>hosted-git-info@2.4.1</code>: Preserve case of the user name part of shortcut specifiers, previously they were lowercased. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/eb3789fd18cfb063de9e6f80c3049e314993d235"><code>eb3789fd1</code></a> <code>node-gyp@3.6.0</code>: Add support for VS2017 and Chakracore improvements. (<a href="https://github.com/refack">@refack</a>) (<a href="https://github.com/kunalspathak">@kunalspathak</a>)</li>
<li><a href="https://github.com/npm/npm/commit/245e25315524b95c0a71c980223a27719392ba75"><code>245e25315</code></a> <code>readable-stream@2.2.6</code> (<a href="https://github.com/mcollina">@mcollina</a>)</li>
<li><a href="https://github.com/npm/npm/commit/30357ebc5691d7c9e9cdc6e0fe7dc6253220c9c2"><code>30357ebc5</code></a> <code>which@1.2.14</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3631"></a>
v4.4.4 (2017-03-16)</h2>
<p>😩😤😅 Okay! We have another <code>next</code> release for ya today. So, yes! With v4.4.3 we fixed the bug that made bundled scoped modules uninstallable. But somehow I overlooked the fact that we: A) were using these and B) that made upgrading to v4.4.3 impossible. 😭</p>
<p>So I've renamed those two scoped modules to no longer use scopes and we now have a shiny new test to ensure that scoped modules don't creep into our transitive deps and make it impossible to upgrade to <code>npm</code>.</p>
<p>(None of our woes applies to most of you all because most of you all don't use bundled dependencies. <code>npm</code> does because we want the published artifact to be installable without having to already have <code>npm</code>.)</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/2a7409fcba6a8fab716c80f56987b255983e048e"><code>2a7409fcb</code></a> <a href="https://github.com/npm/npm/pull/16066">#16066</a> Ensure we aren't using any scoped modules Because <code>npm</code>s prior 4.4.3 can't install dependencies that have bundled scoped modules. This didn't show up sooner because they ALSO had a bug that caused bundled scoped modules to not be included in the bundle. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/eb4c70796c38f24ee9357f5d4a0116db582cc7a9"><code>eb4c70796</code></a> <a href="https://github.com/npm/npm/pull/16066">#16066</a> Switch to move-concurrently to remove scoped dependency (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3632"></a>
v4.4.3 (2017-03-15)</h2>
<p>This is a small patch release, mostly because the published tarball for v4.4.2 was missing a couple of modules, due to a bug involving scoped modules, bundled dependencies and legacy tree layouts.</p>
<p>There are a couple of other things here that happened to be ready to go. So without further ado…</p>
<h3><a class="anchor" id="autotoc_md3633"></a>
BUG FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/3d80f8f70679ad2b8ce7227d20e8dbce257a47b9"><code>3d80f8f70</code></a> <a href="https://github.com/npm/fs-vacuum/pull/6">npm/fs-vacuum#6</a> <code>fs-vacuum@1.2.1</code>: Make sure we never, ever remove home directories. Previously if your home directory was entirely empty then we might <code>rmdir</code> it. (<a href="https://github.com/helio-frota">@helio-frota</a>)</li>
<li><a href="https://github.com/npm/npm/commit/1af85ca9f4d625f948e85961372de7df3f3774e2"><code>1af85ca9f</code></a> <a href="https://github.com/npm/npm/pull/16040">#16040</a> Fix bug where bundled transitive dependencies that happened to be installed under bundled scoped dependencies wouldn't be included in the tarball when building a package. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/13c7fdc2e87456a87b1c9385a3daeae228ed7c95"><code>13c7fdc2e</code></a> <a href="https://github.com/npm/npm/pull/16040">#16040</a> Fix a bug where bundled scoped dependencies couldn't be extracted. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d6cde98c2513fe160eab41e31c3198dfde993207"><code>d6cde98c2</code></a> <a href="https://github.com/npm/npm/pull/16040">#16040</a> Stop printing <code>ENOENT</code> errors more than once. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/722fbf0f6cf4413cdc24b610bbd60a7dbaf2adfe"><code>722fbf0f6</code></a> <a href="https://github.com/npm/npm/pull/16040">#16040</a> Rewrite the <code>extract</code> action for greater clarity. Specifically, this involves moving things around structurally to do the same thing <a href="https://github.com/npm/npm/commit/d0c6d194"><code>d0c6d194</code></a> did, but in a more comprehensive manner. This also fixes a long standing bug where errors from the move step would be eaten during this phase and as a result we would get mysterious crashes in the finalize phase when finalize tried to act on them. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6754dabb6bd3301504efb3b62f36d3fe70958c19"><code>6754dabb6</code></a> <a href="https://github.com/npm/npm/pull/16040">#16040</a> Flatten out <code>@npmcorp/move</code>'s deps for backwards compatibility reasons. Versions prior to this one will fail to install any package that bundles a scoped dependency. This was responsible for <code>ENOENT</code> errors during the <code>finalize</code> phase. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3634"></a>
DOC UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/fba51c582d1d08dd4aa6eb27f9044dddba91bb18"><code>fba51c582</code></a> <a href="https://github.com/npm/npm/pull/15960">#15960</a> Update troubleshooting and contribution guide links. (<a href="https://github.com/watilde">@watilde</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3635"></a>
v4.4.2 (2017-03-09):</h2>
<p>This week, the focus on the release was mainly going through [all of npm's deps that we manage ourselves](<a href="https://github.com/npm/npm/wiki/npm-maintained-dependencies">https://github.com/npm/npm/wiki/npm-maintained-dependencies</a>), and making sure all their PRs and versions were up to date. That means there's a few fixes here and there. Nothing too big codewise, though.</p>
<p>The most exciting part of this release is probably our <a href="https://github.com/npm/npm/blob/latest/CONTRIBUTING.md">shiny new Contributing</a> and <a href="https://github.com/npm/npm/blob/latest/TROUBLESHOOTING.md">Troubleshooting</a> docs! <a href="https://github.com/snopeks">@snopeks</a> did some ✨fantastic✨ work hashing it out, and we're really hoping this is a nice big step towards making contributing to npm easier. The troubleshooting doc will also hopefully solve common issues for people! Do you think something is missing from it? File a PR and we'll add it! The current document is just a baseline for further editing and additions.</p>
<p>Also there's maybe a bit of an easter egg in this release. 'Cause those are fun and I'm a huge nerd. 😉</p>
<h3><a class="anchor" id="autotoc_md3636"></a>
DOCUMENTATION AHOY</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/07e997a7ecedba7b29ad76ffb2ce990d5c0200fc"><code>07e997a</code></a> <a href="https://github.com/npm/npm/pull/15756">#15756</a> Overhaul <code>CONTRIBUTING.md</code> and add new <code>TROUBLESHOOTING.md</code> files. 🙌🏼 (<a href="https://github.com/snopeks">@snopeks</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2f3e4b645cdc268889cf95ba24b2aae572d722ad"><code>2f3e4b6</code></a> <a href="https://github.com/npm/npm/pull/15833">#15833</a> Mention the <a href="http://blog.npmjs.org/post/141905368000/changes-to-npms-unpublish-policy">24-hour unpublish policy</a> on the main registry. (<a href="https://github.com/carols10cents">@carols10cents</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3637"></a>
NOT REALLY FEATURES, NOT REALLY BUGFIXES. MORE LIKE TWEAKS? 🤔</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/84be534aedb78c65cd8012427fc04871ceeccf90"><code>84be534</code></a> <a href="https://github.com/npm/npm/pull/15888">#15888</a> Stop flattening <code>ls</code>-tree output. From now on, deduped deps will be marked as such in the place where they would've been before getting hoisted by the installer. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e9a5dca369ead646ab5922326cede1406c62bd3b"><code>e9a5dca</code></a> <a href="https://github.com/npm/npm/pull/15967">#15967</a> Limit metadata fetches to 10 concurrent requests. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/46aa9bcae088740df86234fc199f7aef53b116df"><code>46aa9bc</code></a> <a href="https://github.com/npm/npm/pull/15967">#15967</a> Limit concurrent installer actions to 10. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3638"></a>
BUGFIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/c3b994b71565eb4f943cce890bb887d810e6e2d4"><code>c3b994b</code></a> <a href="https://github.com/npm/npm/pull/15901">#15901</a> Use EXDEV aware move instead of rename. This will allow moving across devices and moving when filesystems don't support renaming directories full of files. It might make folks using Docker a bit happier. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0de1a9c1db90e6705c65c068df1fe82899e60d68"><code>0de1a9c</code></a> <a href="https://github.com/npm/npm/pull/15735">#15735</a> Autocomplete support for npm scripts with <code>:</code> colons in the name. (<a href="https://github.com/beyondcompute">@beyondcompute</a>)</li>
<li><a href="https://github.com/npm/npm/commit/84b0b92e7f78ec4add42e8161c555325c99b7f98"><code>84b0b92</code></a> <a href="https://github.com/npm/npm/pull/15874">#15874</a> Stop using <a href="https://github.com/nodejs/node/pull/11355">undocumented</a> <code>res.writeHeader</code> alias for <code>res.writeHead</code>. (<a href="https://github.com/ChALkeR">@ChALkeR</a>)</li>
<li><a href="https://github.com/npm/npm/commit/895ffe4f3eecd674796395f91c30eda88aca6b36"><code>895ffe4</code></a> <a href="https://github.com/npm/npm/pull/15824">#15824</a> Fix empty versions column in <code>npm search</code> output. (<a href="https://github.com/bcoe">@bcoe</a>)</li>
<li><a href="https://github.com/npm/npm/commit/38c8d7adc1f43ab357d1e729ae7cd5d801a26e68"><code>38c8d7a</code></a> <code>init-package-json@1.9.5</code>: <a href="https://github.com/npm/init-package-json/pull/61">npm/init-package-json#61</a> Exclude existing <code>devDependencies</code> from being added to <code>dependencies</code>. Fixes <a href="https://github.com/npm/npm/issues/12260">#12260</a>. (<a href="https://github.com/addaleax">@addaleax</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3639"></a>
v4.4.1 (2017-03-06):</h2>
<p>This is a quick little patch release to forgo the update notification checker if you're on an unsupported (but not otherwise broken) version of Node.js. Right now that means 0.10 or 0.12.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/56ac249ef8ede1021f1bc62a0e4fe1e9ba556af2"><code>56ac249</code></a> <a href="https://github.com/npm/npm/pull/15864">#15864</a> Only use <code>update-notifier</code> on supported versions. (<a href="https://github.com/legodude17">@legodude17</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3640"></a>
v4.4.0 (2017-02-23):</h2>
<p>Aaaah, <a href="https://github.com/iarna">@iarna</a> here, it's been a little while since I did one of these! This is a nice little release, we've got an update notifier, vastly less verbose error messages, new warnings on package metadata that will probably give you a bad day, and a sprinkling of bug fixes.</p>
<h3><a class="anchor" id="autotoc_md3641"></a>
UPDATE NOTIFICATIONS</h3>
<p>We now have a little nudge to update your <code>npm</code>, courtesy of <a href="https://www.npmjs.com/package/update-notifier">update-notifier</a>.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/148ee663740aa05877c64f16cdf18eba33fbc371"><code>148ee66</code></a> <a href="https://github.com/npm/npm/pull/15774">#15774</a> <code>npm</code> will now check at start up to see if a newer version is available. It will check once a day. If you want to disable this, set <code>optOut</code> to <code>true</code> in <code>~/.config/configstore/update-notifier-npm.json</code>. (<a href="https://github.com/ceejbot">@ceejbot</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3642"></a>
LESS VERBOSE ERROR MESSAGES</h3>
<p><code>npm</code> has, for a long time, had very verbose error messages. There was a lot of info in there, including the cause of the error you were seeing but without a lot of experience reading them pulling that out was time consuming and difficult.</p>
<p>With this change the output is cut down substantially, centering the error message. So, for example if you try to <code>npm run sdlkfj</code> then the entire error you'll get will be:</p>
<div class="fragment"><div class="line">npm ERR! missing script: sldkfj</div>
<div class="line"> </div>
<div class="line">npm ERR! A complete log of this run can be found in:</div>
<div class="line">npm ERR!     /Users/rebecca/.npm/_logs/2017-02-24T00_41_36_988Z-debug.log</div>
</div><!-- fragment --><p>The CLI team has discussed cutting this down even further and stripping the <code>npm ERR!</code> prefix off those lines too. We'd appreciate your feedback on this!</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/e544124592583654f2970ec332003cfd00d04f2b"><code>e544124</code></a> <a href="https://github.com/npm/npm/pull/15716">#15716</a> Make error output less verbose. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/166bda97410d0518b42ed361020ade1887e684af"><code>166bda9</code></a> <a href="https://github.com/npm/npm/pull/15716">#15716</a> Stop encouraging users to visit the issue tracker unless we know for certain that it's an npm bug. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3643"></a>
OTHER NEW FEATURES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/53412eb22c1c75d768e30f96d69ed620dfedabde"><code>53412eb</code></a> <a href="https://github.com/npm/npm/pull/15772">#15772</a> We now warn if you have a module listed in both dependencies and devDependencies. (<a href="https://github.com/TedYav">@TedYav</a>)</li>
<li><a href="https://github.com/npm/npm/commit/426b1805904a13bdc5c0dd504105ba037270cbee"><code>426b180</code></a> <a href="https://github.com/npm/npm/pull/15757">#15757</a> Default reporting metrics to default registry. Previously it defaulted to using <code><a href="https://registry.npmjs.org">https://registry.npmjs.org</a></code>, now it will default to the result of <code>npm config get registry</code>. For most folks this won't actually change anything, but it means that folks who use a private registry will have metrics routed there by default. This has the potential to be interesting because it means that in the future private registry products (<a href="https://npme.npmjs.com/docs/">npme</a>!) will be able to report on these metrics. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3644"></a>
BUG FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/8ea0de98563648ba0db032acd4d23d27c4a50a66"><code>8ea0de9</code></a> <a href="https://github.com/npm/npm/pull/15716">#15716</a> Write logs for <code>cb() never called</code> errors.</li>
<li><a href="https://github.com/npm/npm/commit/c4e83dca830b24305e3cb3201a42452d56d2d864"><code>c4e83dc</code></a> Make it so that errors while reading the existing node_modules tree can't result in installer crashes. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2690dc2684a975109ef44953c2cf0746dbe343bb"><code>2690dc2</code></a> Update <code>npm doctor</code> to not treat broken symlinks in your global modules as a permission failure. This is particularly important if you link modules and your text editor uses the convention of creating symlinks from <code>.#filename.js</code> to a machine name and pid to lock files (eg emacs and compatible things). (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f4c3f489aa5787cf0d60e8436be2190e4b0d0ff7"><code>f4c3f48</code></a> <a href="https://github.com/npm/npm/pull/15777">#15777</a> Not exactly a bug, but change a parameterless <code>.apply</code> to <code>.call</code>. (<a href="https://github.com/notarseniy">@notarseniy</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3645"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/549dcff58c7aaa1e7ba71abaa14008fdf2697297"><code>549dcff</code></a> <code>rimraf@2.6.0</code>: Retry EBUSY, ENOTEMPTY and EPERM on non-Windows platforms too. More reliable <code>rimraf.sync</code> on Windows. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/052dfb623da508f2b5f681da0258125552a18a4a"><code>052dfb6</code></a> <code>validate-npm-package-name@3.0.0</code>: Remove ableist language in README. Stop allowing ~'!()* in package names. (<a href="https://github.com/tomdale">@tomdale</a>) (<a href="https://github.com/chrisdickinson">@chrisdickinson</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6663ea6ac0f0ecec5a3f04a3c01a71499632f4dc"><code>6663ea6</code></a> <code>abbrev@1.1.0</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/be6de9aab9e20b6eac70884e8626161eebf8721a"><code>be6de9a</code></a> <code>opener@1.4.3</code> (<a href="https://github.com/dominic">@dominic</a>)</li>
<li><a href="https://github.com/npm/npm/commit/900a5e3e3411ec221306455f99b24b9ce35757c0"><code>900a5e3</code></a> <code>readable-stream@2.2.3</code> (<a href="https://github.com/RangerMauve">@RangerMauve</a>) (<a href="https://github.com/mcollina">@mcollina</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c972a8b0f20a61a79c45b6642f870bea8c55c7e4"><code>c972a8b</code></a> <code>tacks@1.2.6</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/85a36efdac0c24501876875cb9ad40292024e0b0"><code>85a36ef</code></a> <a href="https://github.com/npm/npm/commit/7ac9265c56b4d9eeaca6fcfb29513f301713e7bb"><code>7ac9265</code></a> <code>tap@10.2.0</code> (<a href="https://github.com/saacs">@isaacs</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3646"></a>
v4.3.0 (2017-02-09):</h2>
<p>Yay! Release time! It's a rainy day, and we have another smallish release for y'all. These things are not necessarily related. Or are they 🌧🤔</p>
<p>As far as news go, you may have noticed that the CLI team dropped support for <code>node@0.12</code> when that version went out of maintenance. Still, we've avoided explicitly breaking it and <code>node@0.10</code> so far &ndash; but not much longer.</p>
<p>Sometime soon, the CLI team plans on switching over to language features only available as of <code>node@4 LTS</code>, and will likely start dropping old versions of node as they go out of maintenance. The new features are exciting! We're really looking forward to using them in the core CLI (and its dependencies) as we keep up with our current feature work.</p>
<p>And speaking of features, this release is a minor bump due to a small change in how <code>npm login</code> works for the sake of supporting OAuth-based login for npm Enterprise users. But we won't leave the rest of y'all out &ndash; we're working on a larger version of this feature. Soon enough, you'll be able to log in to npm with, say, GitHub &ndash; and use some shiny features that come from the integration. Or turn on 2FA and other such security features. Keep your eyes peeled for new on this in the next few releases and our weekly newsletter!</p>
<h3><a class="anchor" id="autotoc_md3647"></a>
NEW AUTH TYPES</h3>
<p>There's a new command line option: <code>--auth-type</code>, which can be used to log in to a supporting registry with OAuth2 or SAML. The current implementation is mainly meant to support npmE customers, so if you're one of those: ask us about using it! If not, just hold off cause we'll have a much more complete version of this feature out soon.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/ac8595e3c9b615ff95abc3301fac1262c434792c"><code>ac8595e</code></a> <a href="https://github.com/npm/npm/commit/bcf2dd8a165843255c06515fa044c6e4d3b71ca4"><code>bcf2dd8</code></a> <a href="https://github.com/npm/npm/commit/9298d20af58b92572515bfa9cf7377bd4221dc7d"><code>9298d20</code></a> <a href="https://github.com/npm/npm/commit/66b61bc42e81ee8a1ee00fc63517f62284140688"><code>66b61bc</code></a> <a href="https://github.com/npm/npm/commit/dc85de7df6bb61f7788611813ee82ae695a18f1f"><code>dc85de7</code></a> <a href="https://github.com/npm/npm/pull/13389">#13389</a> Implement single-sign-on support with <code>--auth-type</code> option. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3648"></a>
FASTER STARTUP. SOMETIMES!</h3>
<p><code>request</code> is pretty heavy. And it loads a bunch of things. It's actually a pretty big chunk of npm's load time. This small patch by Rebecca will make it so npm only loads that module when we're actually intending to make network requests. Those of you who use npm commands that run offline might see a small speedup in startup time.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/ac735682e666e8724549d56146821f3b8b018e25"><code>ac73568</code></a> <a href="https://github.com/npm/npm/pull/15631">#15631</a> Lazy load <code>caching-registry-client</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3649"></a>
DOCUMENTATION</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/4ad9247aa82f7553c9667ee93c74ec7399d6ceec"><code>4ad9247</code></a> <a href="https://github.com/npm/npm/pull/15630">#15630</a> Fix formatting/rendering for root npm README. (<a href="https://github.com/ungoldman">@ungoldman</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3650"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/8cc1112958638ff88ac2c24c4a065acacb93d64b"><code>8cc1112</code></a> <a href="https://github.com/npm/hosted-git-info/pull/21">npm/hosted-git-info#21</a> <code>hosted-git-info@2.2.0</code>: Add support for <code>.tarball()</code> URLs. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6eacc1bc1925fe3cc79fc97bdc3194d944fce55e"><code>6eacc1b</code></a> <code>npm-registry-mock@1.1.0</code> (<a href="https://github.com/addaleax">@addaleax</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a9b6d775e61cf090df0e13514c624f99bf31d1e7"><code>a9b6d77</code></a> <code>aproba@1.1.1</code> (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3651"></a>
v4.2.0 (2017-01-26):</h2>
<p>Hi all! I'm Kat, and I'm currently sitting in a train traveling at ~300km/h through Spain. So clearly, this release should have <em>something</em> to do with speed. And it does! Heck, with this release, you could say we're really <em>blazing</em>, even. 🌲🔥😏</p>
<h3><a class="anchor" id="autotoc_md3652"></a>
IMPROVED CLI SEARCH~</h3>
<p>You might recall if you've been keeping up that one of the reasons for a semver-major bump to <code>npm@4</code> was an improved CLI search (read: no longer blowing up Node). The work done for that new search system, while still relying on a full metadata download and local search, was also meant to act as groundwork for then-ongoing work on a brand-new, smarter search system for npm. Shortly after <code>npm@4</code> came out, the bulk of the server-side work was done, and with this release, the npm CLI has integrated use of the new endpoint for high-quality, fast-turnaround searches.</p>
<p>No, seriously, it's <em>fast</em>. And <em>relevant</em>:</p>
<p><a href="https://github.com/npm/npm/pull/15481"><img src="https://cloud.githubusercontent.com/assets/17535/21954136/f007e8be-d9fd-11e6-9231-f899c12790e0.gif" alt="GOTTA GO FAST! This is a gif of the new npm search returning results in around a second for `npm search web framework`." class="inline"/></a></p>
<p>Give it a shot! And remember to check out the new website version of the search, too, which uses the same backend as the CLI now. 🎉</p>
<p>Incidentally, the backend is a public service, so you can write your own search tools, be they web-based, CLI, or GUI-based. You can read up on the [full documentation for the search endpoint](<a href="https://github.com/npm/registry/blob/master/docs/REGISTRY-API.md#get-v1search">https://github.com/npm/registry/blob/master/docs/REGISTRY-API.md#get-v1search</a>), and let us know about the cool things you come up with!</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/ce3ca51ca2d60e15e901c8bf6256338e53e1eca2"><code>ce3ca51</code></a> <a href="https://github.com/npm/npm/pull/15481">#15481</a> Add an internal <code>gunzip-maybe</code> utility for optional gunzipping. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e3229324d507fda10ea9e94fd4de8a4ae5025c75"><code>e322932</code></a> <a href="https://github.com/npm/npm/commit/a53055e423f1fe168f05047aa0dfec6d963cb211"><code>a53055e</code></a> <a href="https://github.com/npm/npm/commit/a1f436570730c6e4a173ca92d1967a87c29b7f2d"><code>a1f4365</code></a> <a href="https://github.com/npm/npm/commit/c56618c62854ea61f6f716dffe7bcac80b5f4144"><code>c56618c</code></a> <a href="https://github.com/npm/npm/pull/15481">#15481</a> Add support for using the new npm search endpoint for fast, quality search results. Includes a fallback to "classic" search. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3653"></a>
WHERE DID THE DEBUG LOGS GO</h3>
<p>This is another pretty significant change: Usually, when the npm process crashed, you would get an <code>npm-debug.log</code> in your current working directory. This debug log would get cleared out as soon as you ran npm again. This was a bit annoying because 1) you would get a random file in your <code>git status</code> that you might accidentally commit, and 2) if you hit a hard-to-reproduce bug and instinctually tried again, you would no longer have access to the repro <code>npm-debug.log</code>.</p>
<p>So now, any time a crash happens, we'll save your debug logs to your cache folder, under <code>_logs</code> (<code>~/.npm</code> on *nix, by default &ndash; use <code>npm config get cache</code> to see what your current value is). The cache will now hold a (configurable) number of <code>npm-debug.log</code> files, which you can access in the future. Hopefully this will help clean stuff up and reduce frustration from missed repros! In the future, this will also be used by <code>npm report</code> to make it super easy to put up issues about crashes you run into with npm. 💃🕺🏿👯‍♂️</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/04fca223a0f704b69340c5f81b26907238fad878"><code>04fca22</code></a> <a href="https://github.com/npm/npm/pull/11439">#11439</a> Put debug logs in <code>$(npm get cache)/_logs</code> and store multiple log files. (<a href="https://github.com/KenanY">@KenanY</a>) (<a href="https://github.com/othiym23">@othiym23</a>) (<a href="https://github.com/isaacs">@isaacs</a>) (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3654"></a>
DOCS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/ae8e71c2b7d64d782af287a21e146d7cea6e5273"><code>ae8e71c</code></a> <a href="https://github.com/npm/npm/pull/15402">#15402</a> Add missing backtick in one of the <code>npm doctor</code> messages. (<a href="https://github.com/watilde">@watilde</a>, <a href="https://github.com/charlotteis">@charlotteis</a>)</li>
<li><a href="https://github.com/npm/npm/commit/821fee6d0b12a324e035c397ae73904db97d07d2"><code>821fee6</code></a> <a href="https://github.com/npm/npm/pull/15480">#15480</a> Clarify that unscoped packages can depend on scoped packages and vice-versa. (<a href="https://github.com/chocolateboy">@chocolateboy</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2ee45a884137ae0706b7c741c671fef2cb3bac96"><code>2ee45a8</code></a> <a href="https://github.com/npm/npm/pull/15515">#15515</a> Update minimum supported Node version number in the README to <code>node@&gt;=4</code>. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/af06aa9a357578a8fd58c575f3dbe55bc65fc376"><code>af06aa9</code></a> <a href="https://github.com/npm/npm/pull/15520">#15520</a> Add section to <code>npm-scope</code> docs to explain that scope owners will own scoped packages with that scope. That is, user <code>@alice</code> is not allowed to publish to <code>@bob/my-package</code> unless explicitly made an owner by user (or org) <code>@bob</code>. (<a href="https://github.com/hzoo">@hzoo</a>)</li>
<li><a href="https://github.com/npm/npm/commit/bc892e6d07a4c6646480703641a4d71129c38b6d"><code>bc892e6</code></a> <a href="https://github.com/npm/npm/pull/15539">#15539</a> Replace <code>http</code> with <code>https</code> and fix typos in some docs. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/1dfe875b9ac61a0ab9f61a2eab02bacf6cce583c"><code>1dfe875</code></a> <a href="https://github.com/npm/npm/pull/15545">#15545</a> Update Node.js download link to point to the right place. (<a href="https://github.com/watilde">@watilde</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3655"></a>
DEPENDENCIES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/b824bfbeb2d89c92762e9170b026af98b5a3668a"><code>b824bfb</code></a> <code>ansi-regex@2.1.1</code></li>
<li><a href="https://github.com/npm/npm/commit/81ea3e8e4ea34cd9c2b418512dcb508abcee1380"><code>81ea3e8</code></a> <code>mississippi@1.3.0</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md3656"></a>
MISC</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/98df212a91fd6ff4a02b9cd247f4166f93d3977a"><code>98df212</code></a> <a href="https://github.com/npm/npm/pull/15492">#15492</a> Update the "master" node version used for AppVeyor to <code>node@7</code>. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d75fc03eda5364f12ac266fa4f66e31c2e44e864"><code>d75fc03</code></a> <a href="https://github.com/npm/npm/pull/15413">#15413</a> <code>npm run-script</code> now exits with the child process' exit code on exit. (<a href="https://github.com/kapals">@kapals</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3657"></a>
v4.1.2 (2017-01-12)</h2>
<p>We have a twee little release this week as we come back from the holidays.</p>
<h3><a class="anchor" id="autotoc_md3658"></a>
0.12 IS UNSUPPORTED NOW (really)</h3>
<p>After <a href="https://github.com/npm/npm/releases/tag/v4.0.2">jumping the gun a little</a>, we can now officially remove 0.12 from our supported versions list. The Node.js project has now officially ended even maintenance support for 0.12 and thus, so will we. To reiterate from the last time we did this:</p>
<p>What this means:</p>
<ul>
<li>Your contributions will no longer block on the tests passing on 0.12.</li>
<li>We will no longer block dependency upgrades on working with 0.12.</li>
<li>Bugs filed on the npm CLI that are due to incompatibilities with 0.12 (and older versions) will be closed with a strong urging to upgrade to a supported version of Node.</li>
<li>On the flip side, we'll continue to (happily!) accept patches that address regressions seen when running the CLI with Node.js 0.12.</li>
</ul>
<p>What this doesn't mean:</p>
<ul>
<li>The CLI is going to start depending on ES2015+ features. npm continues to work, in almost all cases, all the way back to Node.js 0.8, and our long history of backwards compatibility is a source of pride for the team.</li>
<li>We aren't concerned about the problems of users who, for whatever reason, can't update to newer versions of npm. As mentioned above, we're happy to take community patches intended to address regressions.</li>
</ul>
<p>We're not super interested in taking sides on what version of Node.js you "should" be running. We're a workflow tool, and we understand that you all have a diverse set of operational environments you need to be able to support. At the same time, we <em>are</em> a small team, and we need to put some limits on what we support. Tracking what's supported by our runtime's own team seems most practical, so that's what we're doing.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/c7bbba8744b62448103a1510c65d9751288abb5d"><code>c7bbba8</code></a> Remove 0.12 from our supported versions list. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3659"></a>
WRITING TO SYMLINKED &lt;tt&gt;package.json&lt;/tt&gt; (AND OTHER FILES)</h3>
<p>If your <code>package.json</code>, <code>npm-shrinkwrap.json</code> or <code>.npmrc</code> were a symlink and you used an <code>npm</code> command that modified one of these (eg <code>npm config set</code> or <code>npm install --save</code>) then previously we would have removed your symlink and replaced it with an ordinary file. While making these files symlinks is pretty uncommon, this was still surprising behavior. With this fix we now overwrite the <em>destination</em> of the symlink and preserve the symlink itself.</p>
<ul>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/a5839833d3de7072be06884b91902c093aff1aed"><code>a583983</code></a> <a href="https://github.com/npm/write-file-atomic/issues/5">write-file-atomic/#5</a> <a href="https://github.com/npm/npm/10223">#10223</a> <code>write-file-atomic@1.3.1</code>: When the target is a symlink, write-file-atomic now overwrites the <em>destination</em> of the symlink, instead of replacing the symlink itself. This makes it's behavior match <code>fs.writeFile</code>.</p>
<p class="startli">Fixed a bug where it would ALWAYS fs.stat to look up default mode and chown values even if you'd passed them in. (It still used the values you passed in, but did a needless stat.) (<a href="https://github.com/iarna">@iarna</a>)</p>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md3660"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/521f230dd57261e64ac9613b3db62f5312971dca"><code>521f230</code></a> <code>node-gyp@3.5.0</code>: Improvements to how Python is located. New <code>--devdir</code> flag. (<a href="https://github.com/bnoordhuis">@bnoordhuis</a>) (<a href="https://github.com/mhart">@mhart</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ccd83e8a70d35fb0904f8a9adb2ff7ac8a6b2706"><code>ccd83e8</code></a> <code>JSONStream@1.3.0</code>: Add new emitPath option. (<a href="https://github.com/nathanwills">@nathanwills</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3661"></a>
TEST IMPROVEMENTS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/d76e08463fd65705217624b861a1443811692f34"><code>d76e084</code></a> Disable metric reporting for test suite even if the user has it enabled. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3662"></a>
v4.1.1 (2016-12-16)</h2>
<p>This fixes a bug in the metrics reporting where, if you had enabled it then installs would create a metrics reporting process, that would create a metrics reporting process, that would… well, you get the idea. The only way to actually kill these processes is to turn off your networking, then on MacOS/Linux kill them with <code>kill -9</code>. Alternatively you can just reboot.</p>
<p>Anyway, this is a quick release to fix that bug:</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/51c393feff5f4908c8a9fb02baef505b1f2259be"><code>51c393f</code></a> <a href="https://github.com/npm/npm/pull/15237">#15237</a> Don't launch a metrics sender process if we're running from a metrics sender process. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3663"></a>
v4.1.0 (2016-12-15)</h2>
<p>I'm really excited about <code>npm@4.1.0</code>. I know, I know, I'm kinda overexcited in my changelogs, but this one is GREAT. We've got a WHOLE NEW subcommand, I mean, when was the last time you saw that? YEARS! And we have the beginnings of usage metrics reporting. Then there's a fix for a really subtle bug that resulted in <code>shasum</code> errors. And then we also have a few more bug fixes and other improvements.</p>
<h3><a class="anchor" id="autotoc_md3664"></a>
ANONYMOUS METRIC REPORTING</h3>
<p>We're adding the ability for you all to help us track the quality of your experiences using <code>npm</code>. Metrics will be sent if you run:</p>
<div class="fragment"><div class="line">npm config set send-metrics true</div>
</div><!-- fragment --><p>Then <code>npm</code> will report to <code>registry.npmjs.org</code> the number of successful and failed installations you've had. The data contains no identifying information and npm will not attempt to correlate things like IP address with the metrics being submitted.</p>
<p>Currently we only track number of successful and failed installations. In the future we would like to find additional metrics to help us better quantify the quality of the <code>npm</code> experience.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/190a658c4222f6aa904cbc640fc394a5c875e4db"><code>190a658</code></a> <a href="https://github.com/npm/npm/pull/15084">#15084</a> Add facility for recording and reporting success metrics. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/87afc8b466f553fb49746c932c259173de48d0a4"><code>87afc8b</code></a> <a href="https://github.com/npm/npm-registry-client/pull/148">npm/npm-registry-client#147</a> <code>npm-registry-client@7.4.5</code>: Add support for sending anonymous CLI metrics. (<a href="https://github.com/iarna">@iarna</a>, <a href="https://github.com/sisidovski">@sisidovski</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3665"></a>
NPM DOCTOR</h2>
<pre>
<u>Check</u>                               <u>Value</u>                        <u>Recommendation</u>
npm ping                            ok
npm -v                              v4.0.5
node -v                             v4.6.1                       Use node v6.9.2
npm config get registry             <a href="https://registry.npmjs.org/">https://registry.npmjs.org/</a>
which git                           /Users/rebecca/bin/git
Perms check on cached files         ok
Perms check on global node_modules  ok
Perms check on local node_modules   ok
Checksum cached files               ok
</pre><p>It's a rare day that we add a new command to <code>npm</code>, so I'm excited to present to you <code>npm doctor</code>. It checks for a number of common problems and provides some recommended solutions. It was put together through the hard work of <a href="https://github.com/watilde">@watilde</a>.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/23595055669f76c9fe8f5f1cf4a705c2e794f0dc"><code>2359505</code></a> <a href="https://github.com/npm/npm/commit/0209ee50448441695fbf9699019d34178b69ba73"><code>0209ee5</code></a> <a href="https://github.com/npm/npm/pull/14582">#14582</a> Add new <code>npm doctor</code> to give your project environment a health check. (<a href="https://github.com/watilde">@watilde</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3666"></a>
FIX MAJOR SOURCE OF SHASUM ERRORS</h3>
<p>If you've been getting intermittent shasum errors then you'll be pleased to know that we've tracked down at least one source of them, if not THE source of them.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/87afc8b466f553fb49746c932c259173de48d0a4"><code>87afc8b</code></a> <a href="https://github.com/npm/npm/issues/14626">#14626</a> <a href="https://github.com/npm/npm-registry-client/pull/148">npm/npm-registry-client#148</a> <code>npm-registry-client@7.4.5</code>: Fix a bug where an <code>ECONNRESET</code> while fetching a package file would result in a partial download that would be reported as a "shasum mismatch". It now throws away the partial download and retries it. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3667"></a>
FILE URLS AND NODE.JS 7</h3>
<p>When <code>npm</code> was formatting <code>file</code> URLs we took advantage of <code>url.format</code> to construct them. Node.js 7 changed the behavior in such a way that our use of <code>url.format</code> stopped producing URLs that we could make use of.</p>
<p>The reasons for this have to do with the <code>file</code> URL specification and how invalid (according to the specification) URLs are handled. How this changed is most easily explained with a table:</p>
<table class="doxtable">
<tr>
<th></th><th>URL</th><th>Node.js &lt;= 6</th><th><code>npm</code>'s understanding</th><th>Node.js 7</th><th><code>npm</code>'s understanding </th></tr>
<tr>
<td>VALID</td><td><code><a href="file:///abc/def">file:///abc/def</a></code></td><td><code><a href="file:///abc/def">file:///abc/def</a></code></td><td><code>/abc/def</code></td><td><code><a href="file:///abc/def">file:///abc/def</a></code></td><td><code>/abc/def</code> </td></tr>
<tr>
<td>invalid</td><td><code><a href="file:/abc/def">file:/abc/def</a></code></td><td><code><a href="file:/abc/def">file:/abc/def</a></code></td><td><code>/abc/def</code></td><td><code><a href="file:///abc/def">file:///abc/def</a></code></td><td><code>/abc/def</code> </td></tr>
<tr>
<td>invalid</td><td><code><a href="file:abc/def">file:abc/def</a></code></td><td><code><a href="file:abc/def">file:abc/def</a></code></td><td><code>$CWD/abc/def</code></td><td><code><a href="file://abc/def">file://abc/def</a></code></td><td><code>/def</code> on the <code>abc</code> host </td></tr>
<tr>
<td>invalid</td><td><code><a href="file:../abc/def">file:../abc/def</a></code></td><td><code><a href="file:../abc/def">file:../abc/def</a></code></td><td><code>$CWD/../abc/def</code></td><td><code><a href="file://../abc/def">file://../abc/def</a></code></td><td><code>/abc/def</code> on the <code>..</code> host </td></tr>
</table>
<p>So the result was that passing a <code>file</code> URL that npm had received that used through Node.js 7's <code>url.format</code> changed its meaning as far as <code>npm</code> was concerned. As those kinds of URLs are, per the specification, invalid, how they should be handled is undefined and so the change in Node.js wasn't a bug per se.</p>
<p>Our solution is to stop using <code>url.format</code> when constructing this kind of URL.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/173935b4298e09c4fdcb8f3a44b06134d5aff181"><code>173935b</code></a> <a href="https://github.com/npm/npm/issues/15114">#15114</a> Stop using <code>url.format</code> for relative local dep paths. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3668"></a>
EXTRANEOUS LIFECYCLE SCRIPT EXECUTION WHEN REMOVING</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/afb1dfd944e57add25a05770c0d52d983dc4e96c"><code>afb1dfd</code></a> <a href="https://github.com/npm/npm/pull/15090">#15090</a> Skip top level lifecycles when uninstalling. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3669"></a>
REFACTORING AND INTERNALS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/c9b279aca0fcb8d0e483e534c7f9a7250e2a9392"><code>c9b279a</code></a> <a href="https://github.com/npm/npm/pull/15205">#15205</a> <a href="https://github.com/npm/npm/pull/15196">#15196</a> Only have one function that determines which version of a package to use given a specifier and a list of versions. (<a href="https://github.com/iarna">@iarna</a>, <a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/981ce6395e7892dde2591b44e484e191f8625431"><code>981ce63</code></a> <a href="https://github.com/npm/npm/pull/15090">#15090</a> Rewrite prune to use modern npm plumbing. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/bc4b73911f58a11b4a2d28b49e24b4dd7365f95b"><code>bc4b739</code></a> <a href="https://github.com/npm/npm/pull/15089">#15089</a> Rename functions and variables in the module that computes what changes to make to your installation. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/2449f74a202b3efdb1b2f5a83356a78ea9ecbe35"><code>2449f74</code></a> <a href="https://github.com/npm/npm/pull/15089">#15089</a> When computing changes to make to your installation, use a function to add new actions to take instead of just pushing on a list. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3670"></a>
IMPROVED LOGGING</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/335933a05396258eead139d27eea3f7668ccdfab"><code>335933a</code></a> <a href="https://github.com/npm/npm/pull/15089">#15089</a> Log when we remove obsolete dependencies in the tree. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3671"></a>
DOCUMENTATION</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/33ca4e6db3c1878cbc40d5e862ab49bb0e82cfb2"><code>33ca4e6</code></a> <a href="https://github.com/npm/npm/pull/15157">#15157</a> Update <code>npm cache</code> docs to use more consistent language (<a href="https://github.com/JonahMoses">@JonahMoses</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3672"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/c2d22faf916e8260136a1cc95913ca474421c0d3"><code>c2d22fa</code></a> <a href="https://github.com/npm/npm/pull/15215">#15215</a> <code>nopt@4.0.1</code>: The breaking change is a small tweak to how empty string values are handled. See the brand-new <a href="https://github.com/npm/nopt/blob/v4.0.1/CHANGELOG.md">CHANGELOG.md for nopt</a> for further details about what's changed in this release! (<a href="https://github.com/adius">@adius</a>, <a href="https://github.com/samjonester">@samjonester</a>, <a href="https://github.com/elidoran">@elidoran</a>, <a href="https://github.com/helio">@helio</a>, <a href="https://github.com/silkentrance">@silkentrance</a>, <a href="https://github.com/othiym23">@othiym23</a>)</li>
<li><a href="https://github.com/npm/npm/commit/54d949b05adefffeb7b5b10229c5fe0ccb929ac3"><code>54d949b</code></a> <a href="https://github.com/npm/lockfile/pull/24">npm/lockfile#24</a> <code>lockfile@1.0.3</code>: Handled case where callback was not passed in by the user. (<a href="https://github.com/ORESoftware">@ORESoftware</a>)</li>
<li><a href="https://github.com/npm/npm/commit/54acc0389b39850c0725d0868cb5e61317b57503"><code>54acc03</code></a> <code>npmlog@4.0.2</code>: Documentation update. (<a href="https://github.com/helio-frota">@helio-frota</a>)</li>
<li><a href="https://github.com/npm/npm/commit/57f4bc1150322294c1ea0a287ad0a8e457c151e6"><code>57f4bc1</code></a> <code>osenv@0.1.4</code>: Test changes. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
<li><a href="https://github.com/npm/npm/commit/bea1a2d0db566560e13ecc1d5f42e55811269c88"><code>bea1a2d</code></a> <code>retry@0.10.1</code>: No changes. (<a href="https://github.com/tim-kos">@tim-kos</a>)</li>
<li><a href="https://github.com/npm/npm/commit/6749e395f868109afd97f79d36507e6567dd48fb"><code>6749e39</code></a> <a href="https://github.com/kapouer/marked-man/pull/9">kapouer/marked-man#9</a> <code>marked-man@0.2.0</code>: Add table support. (<a href="https://github.com/gholk">@gholk</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3673"></a>
v4.0.5 (2016-12-01)</h2>
<p>It's that time of year! December is upon us, which means y'all are just going to be doing a lot less, in general, for the next month or so. The "Xmas Chasm", as we like to call it, has already begun. So for those of you reading it from the other side: Hi! Welcome back!</p>
<p>This week's release is a relatively small one, involving just a few bugfixes and dependency upgrades. The CLI team has been busy recently with scoping out <code>npm@5</code>, and starting to do initial spec work for in-scope stuff.</p>
<h3><a class="anchor" id="autotoc_md3674"></a>
BUGFIXES</h3>
<p>On to the actual changes!</p>
<ul>
<li><p class="startli"><a href="https://github.com/npm/npm/commit/9776d8f70a0ea8d921cbbcab7a54e52c15fc455f"><code>9776d8f</code></a> <a href="https://github.com/npm/npm/pull/15081">#15081</a> <code>bundledDependencies</code> are intended to be left untouched by the installer, as much as possible &ndash; if they're bundled, we assume that you want to be particular about the contents of your bundle.</p>
<p class="startli">The installer used to have a corner case where existing dependencies that had bundledDependencies would get clobbered by as the installer moved stuff around, even though the installer already avoided moving deps that were themselves bundled. This is now fixed, along with the connected crasher, and your bundledDeps should be left even more intact than before! (<a href="https://github.com/iarna">@iarna</a>)</p>
</li>
<li><a href="https://github.com/npm/npm/commit/fc61c082122104031ccfb2a888432c9f809a0e8b"><code>fc61c08</code></a> <a href="https://github.com/npm/npm/pull/15082">#15082</a> Initialize nodes from bundled dependencies. This should address <a href="https://github.com/npm/npm/issues/14427">#14427</a> and related issues, but it's turned out to be a tremendously difficult issue to reproduce in a test. We decided to include it even pending tests, because we found the root cause of the errors. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/d8471a294ef848fc893f60e17d6ec6695b975d16"><code>d8471a2</code></a> <a href="https://github.com/npm/npm/pull/12811">#12811</a> Consider <code>devDependencies</code> when deciding whether to hoist a package. This should resolve a variety of missing dependency issues some folks were seeing when <code>devDependencies</code> happened to also be dependencies of your <code>dependencies</code>. This often manifested as modules going missing, or only being installed, after <code>npm install</code> was called twice. (<a href="https://github.com/schmod">@schmod</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3675"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/5978703da8669adae464789b1b15ee71d7f8d55d"><code>5978703</code></a> <code>graceful-fs@4.1.11</code>: <code>EPERM</code> errors are Windows are now handled more gracefully. Windows users that tended to see these errors due to, say, an antivirus-induced race condition, should see them much more rarely, if at all. (<a href="https://github.com/zkat">@zkatr</a>)</li>
<li><a href="https://github.com/npm/npm/commit/85b0174ba9842e8e89f3c33d009e4b4a9e877c7d"><code>85b0174</code></a> <code>request@2.79.0</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9664d36653503247737630440bc2ff657de965c3"><code>9664d36</code></a> <code>tap@8.0.1</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3676"></a>
MISCELLANEOUS</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/f0f7b0fd025daa2b69994130345e6e8fdaaa0304"><code>f0f7b0f</code></a> <a href="https://github.com/npm/npm/pull/15083">#15083</a> Removed dead code. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/bc32afe4d12e3760fb5a26466dc9c26a5a2981d5"><code>bc32afe</code></a> <a href="https://github.com/npm/npm/commit/c8a22fe5320550e09c978abe560b62ce732686f4"><code>c8a22fe</code></a> <a href="https://github.com/npm/npm/commit/db2666d8c078fc69d0c02c6a3de9b31be1e995e9"><code>db2666d</code></a> <a href="https://github.com/npm/npm/pull/15085">#15085</a> Change some network tests so they can run offline. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/744a39b836821b388ad8c848bd898c1d006689a9"><code>744a39b</code></a> <a href="https://github.com/npm/npm/pull/15085">#15085</a> Make Node.js tests compatible with Windows. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3677"></a>
v4.0.3 (2016-11-17)</h2>
<p>Hey you all, we've got a couple of bug fixes for you, a slew of documentation improvements and some improvements to our CI environment. I know we just got v4 out the door, but the CLI team is already busy planning v5. We'll have more for you in early December.</p>
<h3><a class="anchor" id="autotoc_md3678"></a>
BUG FIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/45d40d96d2cd145f1e36702d6ade8cd033f7f332"><code>45d40d9</code></a> <a href="https://github.com/npm/npm/commit/ba2adc2e822d5e75021c12f13e3f74ea2edbde32"><code>ba2adc2</code></a> <a href="https://github.com/npm/npm/commit/1dc890807bd78a1794063688af31287ed25a2f06"><code>1dc8908</code></a> <a href="https://github.com/npm/npm/commit/2ba19ee643d612d103cdd8f288d313b00d05ee87"><code>2ba19ee</code></a> <a href="https://github.com/npm/npm/pull/14403">#14403</a> Fix a bug where a scoped module could produce crashes when incorrectly computing the paths related to their location. This patch reorganizes how path information is passed in to eliminate the possibility of this sort of bug. (<a href="https://github.com/iarna">@iarna</a>) (<a href="https://github.com/NatalieWolfe">@NatalieWolfe</a>)</li>
<li><a href="https://github.com/npm/npm/commit/1011ec61230288c827a1c256735c55cf03d6228f"><code>1011ec6</code></a> <a href="https://github.com/npm/npmlog/pull/46">npm/npmlog#46</a> <code>npmlog@4.0.1</code>: Fix a bug where the progress bar would still display even if you passed in <code>--no-progress</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3679"></a>
DOCUMENTATION UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/c3ac177236124c80524c5f252ba8f6670f05dcd8"><code>c3ac177</code></a> <a href="https://github.com/npm/npm/pull/14406">#14406</a> Sync up the dispute policy included with the CLI with the <a href="https://www.npmjs.com/policies/disputes">current official text</a>. (<a href="https://github.com/mike-engel">@mike-engel</a>)</li>
<li><a href="https://github.com/npm/npm/commit/9c663b2dd8552f892dc0205330bbc73a484ecd81"><code>9c663b2</code></a> <a href="https://github.com/npm/npm/pull/14627">#14627</a> Update build status branch in README. (<a href="https://github.com/cameronroe">@cameronroe</a>)</li>
<li><a href="https://github.com/npm/npm/commit/8a8a0a3d490fc767def208f925cdff57e16e565b"><code>8a8a0a3</code></a> <a href="https://github.com/npm/npm/pull/14609">#14609</a> Update examples URLs of GitHub repos where those repos have moved to new URLs. (<a href="https://github.com/dougwilson">@dougwilson</a>)</li>
<li><a href="https://github.com/npm/npm/commit/7a6425bcd4decde5d4b0af8b507e98723a07c680"><code>7a6425b</code></a> <a href="https://github.com/npm/npm/pull/14472">#14472</a> Document <code>sign-git-tag</code> in <a href="https://github.com/npm/npm/blob/release-next/doc/cli/npm-version.md">npm-version(1)</a>'s configuration section. (<a href="https://github.com/strugee">@strugee</a>)</li>
<li><a href="https://github.com/npm/npm/commit/f3087cc58c903d9a70275be805ebaf0eadbcbe1b"><code>f3087cc</code></a> <a href="https://github.com/npm/npm/pull/14546">#14546</a> Add a note about the dangers of configuring npm via uppercase env vars. (<a href="https://github.com/tuhoojabotti">@tuhoojabotti</a>)</li>
<li><a href="https://github.com/npm/npm/commit/50e51b04a143959048cf9e1e4c8fe15094f480b0"><code>50e51b0</code></a> <a href="https://github.com/npm/npm/pull/14559">#14559</a> Remove documentation that incorrectly stated that we check <code>.npmrc</code> permissions. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h4><a class="anchor" id="autotoc_md3680"></a>
OH UH, HELLO AGAIN NODE.JS 0.12</h4>
<ul>
<li><a href="https://github.com/npm/npm/commit/6f0c353e4e89b0378a4c88c829ccf9a1c5ae829d"><code>6f0c353</code></a> <a href="https://github.com/npm/npm/commit/f78bde6983bdca63d5fcb9c220c87e8f75ffb70e"><code>f78bde6</code></a> <a href="https://github.com/npm/npm/pull/14591">#14591</a> Reintroduce Node.js 0.12 to our support matrix. We jumped the gun when removing it. We won't drop support for it till the Node.js project does so at the end of December 2016. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3681"></a>
TEST/CI UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/aa73d1c1cc22608f95382a35b33da252addff38e"><code>aa73d1c</code></a> <a href="https://github.com/npm/npm/commit/c914e80f5abcb16c572fe756c89cf0bcef4ff991"><code>c914e80</code></a></li>
<li><a href="https://github.com/npm/npm/commit/58fe064dcc80bc08c677647832f2adb4a56b538a"><code>58fe064</code></a> <a href="https://github.com/npm/npm/pull/14602">#14602</a> When running tests with coverage, use nyc's cache. This provides an 8x speedup! (<a href="https://github.com/bcoe">@bcoe</a>)</li>
<li><a href="https://github.com/npm/npm/commit/ba091ce843af5d694f4540e825b095435b3558d8"><code>ba091ce</code></a> <a href="https://github.com/npm/npm/pull/14435">#14435</a> Remove an unused zero byte <code>package.json</code> found in the test fixtures. (<a href="https://github.com/baderbuddy">@baderbuddy</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3682"></a>
DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/442e01e42d8a439809f6726032e3b73ac0d2b2f8"><code>442e01e</code></a> <code>readable-stream@2.2.2</code>: Bring in latest changes from Node.js 7.x. (<a href="https://github.com/calvinmetcalf">@calvinmetcalf</a>)</li>
<li><a href="https://github.com/npm/npm/commit/bfc4a1c0c17ef0a00dfaa09beba3389598a46535"><code>bfc4a1c</code></a> <code>which@1.2.12</code>: Remove unused require. (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3683"></a>
DEV DEPENDENCY UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/7075b054d8d2452bb53bee9b170498a48a0dc4e9"><code>7075b05</code></a> <code>marked-man@0.1.6</code> (<a href="https://github.com/kapouer">@kapouer</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3e13fea907ee1141506a6de7d26cbc91c28fdb80"><code>3e13fea</code></a> <code>tap@8.0.0</code> (<a href="https://github.com/isaacs">@isaacs</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3684"></a>
v4.0.2 (2016-11-03)</h2>
<p>Hola, amigxs. I know it's been a long time since I rapped at ya, but I been spending a lotta time quietly reflecting on all the things going on in my life. I was, like, <a href="https://gist.github.com/othiym23/c98bd4ef5d9fb3f496835bd481ef40ae">in Japan for a while</a>, and before that my swell colleagues <a href="https://github.com/zkat">@zkat</a> and <a href="https://github.com/iarna">@iarna</a> have been very capably managing the release process for quite a while. But I returned from Japan somewhat refreshed, very jetlagged, and filled with a burning urge to get <code>npm@4</code> as stable as possible before we push it out to the user community at large, so I decided to do this release myself. (Also, huge thanks to Kat and Rebecca for putting out <code>npm@4</code> so capably while I was on vacation! So cool to return to a major release having gone so well without my involvement!)</p>
<p>That said...</p>
<h3><a class="anchor" id="autotoc_md3685"></a>
NEVER TRUST AN X.0.0 RELEASE</h3>
<p>Even though 4.0.1 came out hard on the heels of 4.0.0 with a couple critical fixes, we've found a couple other major issues that we want to see fixed before making <code>npm@4</code> into <code>npm@latest</code>. Some of these are arguably breaking changes on their own, so now is the time to get them out if we're going to do so before <code>npm@5</code>, and all of them are pretty significant blockers for a substantial number of users, so now is the best time to fix them.</p>
<h4><a class="anchor" id="autotoc_md3686"></a>
PREPUBLISHONLY WHOOPS</h4>
<p>The code running the <code>publish*</code> lifecycle events was very confusingly written. In fact, we didn't really figure out what it was doing until we added the new <code>prepublishOnly</code> event and it was running people's scripts from the wrong directory. We made it simpler. See the <a href="https://github.com/npm/npm/commit/8b32d67aa277fd7e62edbed886387a855f58387f">commit message</a> for details.</p>
<p>Because the change is no longer running publish events when publishing prebuilt artifacts, it's technically a breaking / semver-major change. In the off chance that the new behavior breaks any of y'all's workflows, let us know, and we can roll some or all of this change back until <code>npm@5</code> (or forever, if that works better for you).</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/8b32d67aa277fd7e62edbed886387a855f58387f"><code>8b32d67</code></a> <a href="https://github.com/npm/npm/pull/14502">#14502</a> Simplify lifecycle invocation and fix <code>prepublishOnly</code>. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h4><a class="anchor" id="autotoc_md3687"></a>
G'BYE NODE.JS 0.10, 0.12, and 5.X; HI THERE, NODE 7</h4>
<p>With the advent of the second official Node.js LTS release, Node 6.x 'Boron', the Node.js project has now officially dropped versions 0.10 and 0.12 out of the maintenance phase of LTS. (Also, Node 5 was never part of LTS, and will see no further support now that Node 7 has been released.) As a small team with limited resources, the npm CLI team is following suit and dropping those versions of Node from its CI test matrix.</p>
<p>What this means:</p>
<ul>
<li>Your contributions will no longer block on the tests passing on 0.10 and 0.12.</li>
<li>We will no longer block dependency upgrades on working with 0.10 and 0.12.</li>
<li>Bugs filed on the npm CLI that are due to incompatibilities with 0.10 or 0.12 (and older versions) will be closed with a strong urging to upgrade to a supported version of Node.</li>
<li>On the flip side, we'll continue to (happily!) accept patches that address regressions seen when running the CLI with Node.js 0.10 and 0.12.</li>
</ul>
<p>What this doesn't mean:</p>
<ul>
<li>The CLI is going to start depending on ES2015+ features. npm continues to work, in almost all cases, all the way back to Node.js 0.8, and our long history of backwards compatibility is a source of pride for the team.</li>
<li>We aren't concerned about the problems of users who, for whatever reason, can't update to newer versions of npm. As mentioned above, we're happy to take community patches intended to address regressions.</li>
</ul>
<p>We're not super interested in taking sides on what version of Node.js you "should" be running. We're a workflow tool, and we understand that you all have a diverse set of operational environments you need to be able to support. At the same time, we <em>are</em> a small team, and we need to put some limits on what we support. Tracking what's supported by our runtime's own team seems most practical, so that's what we're doing.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/ab630c9a7a1b40cdd4f1244be976c25ab1525907"><code>ab630c9</code></a> <a href="https://github.com/npm/npm/pull/14503">#14503</a> Node 6 is LTS; 5.x, 0.10, and 0.12 are unsupported. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
<li><a href="https://github.com/npm/npm/commit/731ae526fb6e9951c43d82a26ccd357b63cc56c2"><code>731ae52</code></a> <a href="https://github.com/npm/npm/pull/14503">#14503</a> Update supported version expression. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h4><a class="anchor" id="autotoc_md3688"></a>
DISENTANGLING SCOPE</h4>
<p>The new <code>Npm-Scope</code> header was previously reusing the <code>scope</code> configuration option to pass the current scope back to your current registry (which, as <a href="https://github.com/npm/npm/blob/release-next/CHANGELOG.md#send-extra-headers-to-registry">described previously</a>, is meant to set up some upcoming registry features). It turns out that had some <a href="https://github.com/npm/npm/issues/14412">seriously weird consequences</a> in the case where you were already configuring <code>scope</code> in your own environment. The CLI now uses separate configuration for this.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/39358f732ded4aa46d86d593393a0d6bca5dc12a"><code>39358f7</code></a> <a href="https://github.com/npm/npm/pull/14477">#14477</a> Differentiate registry scope from project scope in configuration. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3689"></a>
SMALLER CHANGES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/7f41295775f28b958a926f9cb371cb37b05771dd"><code>7f41295</code></a> <a href="https://github.com/npm/npm/pull/14519">#14519</a> Document that as of <code>npm@4.0.1</code>, <code>npm shrinkwrap</code> now includes <code>devDependencies</code> unless instructed otherwise. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/bdc2f9e255ddf1a47fd13ec8749d17ed41638b2c"><code>bdc2f9e</code></a> <a href="https://github.com/npm/npm/pull/14501">#14501</a> The <code>ENOSELF</code> error message is tricky to word. It's also an error that normally bites new users. Clean it up in an effort to make it easier to understand what's going on. (<a href="https://github.com/snopeks">@snopeks</a>, <a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3690"></a>
DEPENDENCY UPGRADES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/a52d0f0c9cf2de5caef77e12eabd7dca9e89b49c"><code>a52d0f0</code></a> <code>glob@7.1.1</code>:<ul>
<li>Handle files without associated perms on Windows.</li>
<li>Fix failing case with <code>absolute</code> option. (<a href="https://github.com/isaacs">@isaacs</a>, <a href="https://github.com/phated">@phated</a>)</li>
</ul>
</li>
<li><a href="https://github.com/npm/npm/commit/afda66d9afcdcbae1d148f589287583c4182d124"><code>afda66d</code></a> <a href="https://github.com/isaacs/node-graceful-fs/pull/97">isaacs/node-graceful-fs#97</a> <code>graceful-fs@4.1.10</code>: Better backoff for EPERM on Windows. (<a href="https://github.com/sam-github">@sam-github</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e0023c089ded9161fbcbe544f12b07e12e3e5729"><code>e0023c0</code></a> <a href="https://github.com/npm/inflight/pull/3">npm/inflight#3</a> <code>inflight@1.0.6</code>: Clean up even if / when a callback throws. (<a href="https://github.com/phated">@phated</a>)</li>
<li><a href="https://github.com/npm/npm/commit/1d9159440364d2fe21e8bc15e08e284aaa118347"><code>1d91594</code></a> <code>request@2.78.0</code> (<a href="https://github.com/othiym23">@othiym23</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3691"></a>
v4.0.1 (2016-10-24)</h2>
<p>Ayyyy~ 🌊</p>
<p>So thanks to folks who were running on <code>npm@next</code>, we managed to find a few issues of notes in that preview version, and we're rolling out a small patch change to fix them. Most notably, anyone who was using a symlinked <code>node</code> binary (for example, if they installed Node.js through <code>homebrew</code>), was getting a very loud warning every time they ran scripts. Y'all should get warnings in a more useful way, now that we're resolving those path symlinks.</p>
<p>Another fairly big change that we decided to slap into this version, since <code>npm@4.0.0</code> is never going to be <code>latest</code>, is to make it so <code>devDependencies</code> are included in <code>npm-shrinkwrap.json</code> by default &ndash; if you do not want this, use <code>--production</code> with <code>npm shrinkwrap</code>.</p>
<h3><a class="anchor" id="autotoc_md3692"></a>
BIG FIXES/CHANGES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/eff46dd498ed007bfa77ab7782040a3a828b852d"><code>eff46dd</code></a> <a href="https://github.com/npm/npm/pull/14374">#14374</a> Fully resolve the path for <code>node</code> executables in both <code>$PATH</code> and <code>process.execPath</code> to avoid issues with symlinked <code>node</code>. (<a href="https://github.com/addaleax">@addaleax</a>)</li>
<li><a href="https://github.com/npm/npm/commit/964f2d3a0675584267e6ece95b0115a53c6ca6a9"><code>964f2d3</code></a> <a href="https://github.com/npm/npm/pull/14375">#14375</a> Make including <code>devDependencies</code> in <code>npm-shrinkwrap.json</code> the default. This should help make the transition to <code>npm@5</code> smoother in the future. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3693"></a>
BUGFIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/a5b0a8db561916086fc7dbd6eb2836c952a42a7e"><code>a5b0a8d</code></a> <a href="https://github.com/npm/npm/pull/14400">#14400</a> Recently, we've had some consistent timeout failures while running the test suite under Travis. This tweak to tests should take care of those issues and Travis should go back to being reliably green. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3694"></a>
DOC PATCHES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/c5907b2fc1a82ec919afe3b370ecd34d8895c7a2"><code>c5907b2</code></a> <a href="https://github.com/npm/npm/pull/14251">#14251</a> Update links to Node.js downloads. They previously pointed to 404 pages.😬 (<a href="https://github.com/ArtskydJ">@ArtskydJ</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0c122f24ff1d4d400975edda2b7262aaaf6f7d69"><code>0c122f2</code></a> <a href="https://github.com/npm/npm/pull/14380">#14380</a> Add note and clarification on when <code>prepare</code> script is run. Make it more consistent with surrounding descriptions. (<a href="https://github.com/SimenB">@SimenB</a>)</li>
<li><a href="https://github.com/npm/npm/commit/51a62abd88324ba3dad18e18ca5e741f1d60883c"><code>51a62ab</code></a> <a href="https://github.com/npm/npm/pull/14359">#14359</a> Fixes typo in <code>npm@4</code> changelog. (<a href="https://github.com/kimroen">@kimroen</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3695"></a>
v4.0.0 (2016-10-20)</h2>
<p>Welcome to <code>npm@4</code>, friends!</p>
<p>This is our first semver major release since the release of <code>npm@3</code> just over a year ago. Back then, <code>@3</code> turned out to be a bit of a ground-shaking release, with a brand-new installer with significant structural changes to how npm set up your tree. This is the end of an era, in a way. <code>npm@4</code> also marks the release when we move <em>both</em> <code>npm@2</code> and <code>npm@3</code> into maintenance: We will no longer be updating those release branches with anything except critical bugfixes and security patches.</p>
<p>While its predecessor had some pretty serious impaact, <code>npm@4</code> is expected to have a much smaller effect on your day-to-day use of npm. Over the past year, we've collected a handful of breaking changes that we wanted to get in which are only breaking under a strict semver interpretation (which we follow). Some of these are simple usability improvements, while others fix crashes and serious issues that required a major release to include.</p>
<p>We hope this release sees you well, and you can look forward to an accelerated release pace now that the CLI team is done focusing on sustaining work &ndash; our Windows fixing and big bugs pushes &ndash; and we can start focusing again on usability, features, and performance. Keep an eye out for <code>npm@5</code> in Q1 2017, too: We're planning a major overhaul of <code>shrinkwrap</code> as well as various speed and usability fixes for that release. It's gonna be a fun ride. I promise. 😘</p>
<h3><a class="anchor" id="autotoc_md3696"></a>
BRIEF OVERVIEW OF &lt;strong&gt;BREAKING&lt;/strong&gt; CHANGES</h3>
<p>The following breaking changes are included in this release:</p>
<ul>
<li><code>npm search</code> rewritten to stream results, and no longer supports sorting.</li>
<li><code>npm scripts</code> no longer prepend the path of the node executable used to run npm before running scripts. A <code>--scripts-prepend-node-path</code> option has been added to configure this behavior.</li>
<li><code>npat</code> has been removed.</li>
<li><code>prepublish</code> has been deprecated, replaced by <code>prepare</code>. A <code>prepublishOnly</code> script has been temporarily added, which will <em>only</em> run on <code>npm publish</code>.</li>
<li><code>npm outdated</code> exits with exit code <code>1</code> if it finds any outdated packages.</li>
<li><code>npm tag</code> has been removed after a deprecation cycle. Use <code>npm dist-tag</code>.</li>
<li>Partial shrinkwraps are no longer supported. <code>npm-shrinkwrap.json</code> is considered a complete installation manifest except for <code>devDependencies</code>.</li>
<li>npm's default git branch is no longer <code>master</code>. We'll be using <code>latest</code> from now on.</li>
</ul>
<h3><a class="anchor" id="autotoc_md3697"></a>
SEARCH REWRITE (&lt;strong&gt;BREAKING&lt;/strong&gt;)</h3>
<p>Let's face it &ndash; <code>npm search</code> simply doesn't work anymore. Apart from the fact that it grew slower over the years, it's reached a point where we can no longer fit the entire registry metadata in memory, and anyone who tries to use the command now sees a really awful memory overflow crash from node.</p>
<p>It's still going to be some time before the CLI, registry, and web team are able to overhaul <code>npm search</code> altogether, but until then, we've rewritten the previous <code>npm search</code> implementation to <em>stream</em> results on the fly, from both the search endpoint and a local cache. In absolute terms, you won't see a performance increase and this patch <em>does</em> come at the cost of sorting capabilities, but what it does do is start outputting results as it finds them. This should make the experience much better, overall, and we believe this is an acceptable band-aid until we have that search endpoint in place.</p>
<p>Incidentally, if you want a really nice search experience, we recommend checking out <a href="http://npms.io">npms.io</a>, which includes a handy-dandy <a href="https://npm.im/npms-cli"><code>npms-cli</code></a> for command-line usage &ndash; it's an npm search site that returns high-quality results quickly and is operated by members of the npm community.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/cfd43b49aed36d0e8ea6c35b07ed8b303b69be61"><code>cfd43b4</code></a> <a href="https://github.com/npm/npm/commit/2b8057be2e1b51e97b1f8f38d7f58edf3ce2c145"><code>2b8057b</code></a> <a href="https://github.com/npm/npm/pull/13746">#13746</a> Stream search process end-to-end. (<a href="https://github.com/zkat">@zkat</a> and <a href="https://github.com/aredridel">@aredridel</a>)</li>
<li><a href="https://github.com/npm/npm/commit/50f4ec8e8ce642aa6a58cb046b2b770ccf0029db"><code>50f4ec8</code></a> <a href="https://github.com/npm/npm/commit/70b4bc22ec8e81cd33b9448f5b45afd1a50d50ba"><code>70b4bc2</code></a> <a href="https://github.com/npm/npm/commit/8fb470fe755c4ad3295cb75d7b4266f8e67f8d38"><code>8fb470f</code></a> <a href="https://github.com/npm/npm/commit/ac3a6e0eba61fb40099b1370c74ad1598777def4"><code>ac3a6e0</code></a> <a href="https://github.com/npm/npm/commit/bad54dd9f1119fe900a8d065f8537c6f1968b589"><code>bad54dd</code></a> <a href="https://github.com/npm/npm/commit/87d504e0a61bccf09f5e975007d018de3a1c5f50"><code>87d504e</code></a> <a href="https://github.com/npm/npm/pull/13746">#13746</a> Updated search-related tests. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/3596de88598c69eb5bae108703c8e74ca198b20c"><code>3596de8</code></a> <a href="https://github.com/npm/npm/pull/13746">#13746</a> <code>JSONStream@1.2.1</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4b09209bb605f547243065032a8b37772669745f"><code>4b09209</code></a> <a href="https://github.com/npm/npm/pull/13746">#13746</a> <code>mississippi@1.2.0</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/b650b39d42654abb9eed1c7cd463b1c595ca2ef9"><code>b650b39</code></a> <a href="https://github.com/npm/npm/pull/13746">#13746</a> <code>sorted-union-stream@2.1.3</code> (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3698"></a>
SCRIPT NODE PATH (&lt;strong&gt;BREAKING&lt;/strong&gt;)</h3>
<p>Thanks to some great work by <a href="https://github.com/addaleax">@addaleax</a>, we've addressed a fairly tricky issue involving the node process used by <code>npm scripts</code>.</p>
<p>Previously, npm would prefix the path of the node executable to the script's <code>PATH</code>. This had the benefit of making sure that the node process would be the same for both npm and <code>scripts</code> unless you had something like <a href="https://npm.im/node-bin"><code>node-bin</code></a> in your <code>node_modules</code>. And it turns out lots of people relied on this behavior being this way!</p>
<p>It turns out that this had some unintended consequences: it broke systems like <a href="https://npm.im/nyc"><code>nyc</code></a>, but also completely broke/defeated things like <a href="https://rvm.io/"><code>rvm</code></a> and <a href="https://virtualenv.pypa.io/en/stable/"><code>virtualenv</code></a> by often causing things that relied on them to fall back to the global system versions of ruby and python.</p>
<p>In the face of two perfectly valid, and used alternatives, we decided that the second case was much more surprising for users, and that we should err on the side of doing what those users expect. Anna put some hard work in and managed to put together a patch that changes npm's behavior such that we no longer prepend the node executable's path <em>by default</em>, and adds a new option, <code>--scripts-prepend-node-path</code>, to allow users who rely on this behavior to have it add the node path for them.</p>
<p>This patch also makes it so this feature is discoverable by people who might run into the first case above, by warning if the node executable is either missing or shadowed by another one in <code>PATH</code>. This warning can also be disabled with the <code>--scripts-prepend-node-path</code> option as needed.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/3fb1eb3e00b5daf37f14e437d2818e9b65a43392"><code>3fb1eb3</code></a> <a href="https://github.com/npm/npm/commit/6a7d375d779ba5416fd5df154c6da673dd745d9d"><code>6a7d375</code></a> <a href="https://github.com/npm/npm/commit/378ae08851882d6d2bc9b631b16b8c875d0b9704"><code>378ae08</code></a> <a href="https://github.com/npm/npm/pull/13409">#13409</a> Add a <code>--scripts-prepend-node-path</code> option to configure whether npm prepends the current node executable's path to <code>PATH</code>. (<a href="https://github.com/addaleax">@addaleax</a>)</li>
<li><a href="https://github.com/npm/npm/commit/70b352c6db41533b9a4bfaa9d91f7a2a1178f74e"><code>70b352c</code></a> <a href="https://github.com/npm/npm/pull/13409">#13409</a> Change the default behaviour of npm to never prepending the current node executable’s directory to <code>PATH</code> but printing a warning in the cases in which it previously did. (<a href="https://github.com/addaleax">@addaleax</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3699"></a>
REMOVE &lt;tt&gt;npat&lt;/tt&gt; (&lt;strong&gt;BREAKING&lt;/strong&gt;)</h3>
<p>Let's be real here &ndash; almost no one knows this feature ever existed, and it's a vestigial feature of the days when the ideal for npm was to distribute full packages that could be directly developed on, even from the registry.</p>
<p>It turns out the npm community decided to go a different way: primarily publishing packages in a production-ready format, with no tests, build tools, etc. And so, we say goodbye to <code>npat</code>.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/e16c14afb6f52cb8b7adf60b2b26427f76773f2e"><code>e16c14a</code></a> <a href="https://github.com/npm/npm/pull/14329">#14329</a> Remove the npat feature. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3700"></a>
NEW &lt;tt&gt;prepare&lt;/tt&gt; SCRIPT. &lt;tt&gt;prepublish&lt;/tt&gt; DEPRECATED (&lt;strong&gt;BREAKING&lt;/strong&gt;)</h3>
<p>If there's anything that really seemed to confuse users, it's that the <code>prepublish</code> script ran when invoking <code>npm install</code> without any arguments.</p>
<p>Turns out many, many people really expected that it would only run on <code>npm publish</code>, even if it actually did what most people expected: prepare the package for publishing on the registry.</p>
<p>And so, we've added a <code>prepare</code> command that runs in the exact same cases where <code>prepublish</code> ran, and we've begun a deprecation cycle for <code>prepublish</code> itself <b>only when run by <code>npm install</code></b>, which will now include a warning any time you use it that way.</p>
<p>We've also added a <code>prepublishOnly</code> script which will execute <b>only</b> when <code>npm publish</code> is invoked. Eventually, <code>prepublish</code> will stop executing on <code>npm install</code>, and <code>prepublishOnly</code> will be removed, leaving <code>prepare</code> and <code>prepublish</code> as two distinct lifecycles.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/9b4a2278cee0a410a107c8ea4d11614731e0a943"><code>9b4a227</code></a> <a href="https://github.com/npm/npm/commit/bc32078fa798acef0e036414cb448645f135b570"><code>bc32078</code></a> <a href="https://github.com/npm/npm/pull/14290">#14290</a> Add <code>prepare</code> and <code>prepublishOnly</code> lifecycle events. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
<li><a href="https://github.com/npm/npm/commit/52fdefddb48f0c39c6e8eb4c118eb306c9436117"><code>52fdefd</code></a> <a href="https://github.com/npm/npm/pull/14290">#14290</a> Warn when running <code>prepublish</code> on <code>npm pack</code>. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
<li><a href="https://github.com/npm/npm/commit/4c2a9481b564cae3df3f4643766db4b987018a7b"><code>4c2a948</code></a> <a href="https://github.com/npm/npm/commit/a55bd651284552b93f7d972a2e944f65c1aa6c35"><code>a55bd65</code></a> <a href="https://github.com/npm/npm/pull/14290">#14290</a> Added <code>prepublish</code> warnings to <code>npm install</code>. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c27412bb9fc7b09f7707c7d9ad23128959ae1abc"><code>c27412b</code></a> <a href="https://github.com/npm/npm/pull/14290">#14290</a> Replace <code>prepublish</code> with <code>prepare</code> in <code>npm help package.json</code> documentation. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3701"></a>
NO MORE PARTIAL SHRINKWRAPS (&lt;strong&gt;BREAKING&lt;/strong&gt;)</h3>
<p>That's right. No more partial shrinkwraps. That means that if you have an <code>npm-shrinkwrap.json</code> in your project, npm will no longer install anything that isn't explicitly listed there, unless it's a <code>devDependency</code>. This will open doors to some nice optimizations and make use of <code>npm shrinkwrap</code> just generally smoother by removing some awful corner cases. We will also skip <code>devDependency</code> installation from <code>package.json</code> if you added <code>devDependencies</code> to your shrinkwrap by using <code>npm shrinkwrap --dev</code>.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/b7dfae8fd4dc0456605f7a921d20a829afd50864"><code>b7dfae8</code></a> <a href="https://github.com/npm/npm/pull/14327">#14327</a> Use <code>readShrinkwrap</code> to read top level shrinkwrap. There's no reason for npm to be doing its own bespoke heirloom-grade artisanal thing here. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/0ae1f4b9d83af2d093974beb33f26d77fcc95bb9"><code>0ae1f4b</code></a> <a href="https://github.com/npm/npm/commit/4a549970dc818d78b6de97728af08a1edb5ae7f0"><code>4a54997</code></a> <a href="https://github.com/npm/npm/commit/f22a1ae54b5d47f1a056a6e70868013ebaf66b79"><code>f22a1ae</code></a> <a href="https://github.com/npm/npm/commit/3f61189cb3843fee9f54288fefa95ade9cace066"><code>3f61189</code></a> <a href="https://github.com/npm/npm/pull/14327">#14327</a> Treat shrinkwrap as canonical. That is, don't try to fill in for partial shrinkwraps. Partial shrinkwraps should produce partial installs. If your shrinkwrap contains NO <code>devDependencies</code> then we'll still try to install them from your <code>package.json</code> instead of assuming you NEVER want <code>devDependencies</code>. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3702"></a>
&lt;tt&gt;npm tag&lt;/tt&gt; REMOVED (&lt;strong&gt;BREAKING&lt;/strong&gt;)</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/94255da8ffc2d9ed6a0434001a643c1ad82fa483"><code>94255da</code></a> <a href="https://github.com/npm/npm/pull/14328">#14328</a> Remove deprecated tag command. Folks must use the <code>dist-tag</code> command from now on. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3703"></a>
NON-ZERO EXIT CODE ON OUTDATED DEPENDENCIES (&lt;strong&gt;BREAKING&lt;/strong&gt;)</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/40a04d888d10a5952d5ca4080f2f5d2339d2038a"><code>40a04d8</code></a> <a href="https://github.com/npm/npm/commit/e2fa18d9f7904eb048db7280b40787cb2cdf87b3"><code>e2fa18d</code></a> <a href="https://github.com/npm/npm/commit/3ee39488b74c7d35fbb5c14295e33b5a77578104"><code>3ee3948</code></a> <a href="https://github.com/npm/npm/commit/3fa25d02a8ff07c42c595f84ae4821bc9ee908df"><code>3fa25d0</code></a> <a href="https://github.com/npm/npm/pull/14013">#14013</a> Do <code>exit 1</code> if any outdated dependencies are found by <code>npm outdated</code>. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c81838ae96b253f4b1ac66af619317a3a9da418e"><code>c81838a</code></a> <a href="https://github.com/npm/npm/pull/14013">#14013</a> Log non-zero exit codes at <code>verbose</code> level &ndash; this isn't something command line tools tend to do. It's generally the shell's job to display, if at all. (<a href="https://github.com/zkat">@zkat</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3704"></a>
SEND EXTRA HEADERS TO REGISTRY</h3>
<p>For the purposes of supporting shiny new registry features, we've started sending <code>Npm-Scope</code> and <code>Npm-In-CI</code> headers in outgoing requests.</p>
<ul>
<li><a href="https://github.com/npm/npm/commit/846f61c1dd4a033f77aa736ab01c27ae6724fe1c"><code>846f61c</code></a> <a href="https://github.com/npm/npm-registry-client/pull/145">npm/npm-registry-client#145</a> <a href="https://github.com/npm/npm-registry-client/pull/147">npm/npm-registry-client#147</a> <code>npm-registry-client@7.3.0</code>:<ul>
<li>Allow npm to add headers to outgoing requests.</li>
<li>Add <code>Npm-In-CI</code> header that reports whether we're running in CI. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
</li>
<li><a href="https://github.com/npm/npm/commit/6b6bb08af661221224a81df8adb0b72019ca3e11"><code>6b6bb08</code></a> <a href="https://github.com/npm/npm/pull/14129">#14129</a> Send <code>Npm-Scope</code> header along with requests to registry. <code>Npm-Scope</code> is set to the <code>@scope</code> of the current top level project. This will allow registries to implement user/scope-aware features and services. (<a href="https://github.com/iarna">@iarna</a>)</li>
<li><a href="https://github.com/npm/npm/commit/506de80dc0a0576ec2aab0ed8dc3eef3c1dabc23"><code>506de80</code></a> <a href="https://github.com/npm/npm/pull/14129">#14129</a> Add test to ensure <code>Npm-In-CI</code> header is being sent when CI is set in env. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3705"></a>
BUGFIXES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/bc84012c2c615024b08868acbd8df53a7ca8d146"><code>bc84012</code></a> <a href="https://github.com/npm/npm/pull/14117">#14117</a> Fixes a bug where installing a shrinkwrapped package would fail if the platform failed to install an optional dependency included in the shrinkwrap. (<a href="https://github.com/watilde">@watilde</a>)</li>
<li><a href="https://github.com/npm/npm/commit/a40b32dc7fe18f007a672219a12d6fecef800f9d"><code>a40b32d</code></a> <a href="https://github.com/npm/npm/pull/13519">#13519</a> If a package has malformed metadata, <code>node.requiredBy</code> is sometimes missing. Stop crashing when that happens. (<a href="https://github.com/creationix">@creationix</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3706"></a>
OTHER PATCHES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/643dae2197c56f1c725ecc6539786bf82962d0fe"><code>643dae2</code></a> <a href="https://github.com/npm/npm/pull/14244">#14244</a> Remove some ancient aliases that we'd rather not have around. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/bdeac3e0fb226e4777d4be5cd3c3bec8231c8044"><code>bdeac3e</code></a> <a href="https://github.com/npm/npm/pull/14230">#14230</a> Detect unsupported Node.js versions and warn about it. Also error on really old versions where we know we can't work. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3707"></a>
DOC UPDATES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/9ca18ada7cc1c10b2d32bbb59d5a99dd1c743109"><code>9ca18ad</code></a> <a href="https://github.com/npm/npm/pull/13746">#13746</a> Updated docs for <code>npm search</code> options. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/e02a47f9698ff082488dc2b1738afabb0912793e"><code>e02a47f</code></a> Move the <code>npm@3</code> changelog into the archived changelogs directory. (<a href="https://github.com/zkat">@zkat</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c12bbf8c5a5dff24a191b66ac638f552bfb76601"><code>c12bbf8</code></a> <a href="https://github.com/npm/npm/pull/14290">#14290</a> Document prepublish-on-install deprecation. (<a href="https://github.com/othiym23">@othiym23</a>)</li>
<li><a href="https://github.com/npm/npm/commit/c246a75ac8697f4ca11d316b7e7db5f24af7972b"><code>c246a75</code></a> <a href="https://github.com/npm/npm/pull/14129">#14129</a> Document headers added by npm to outgoing registry requests. (<a href="https://github.com/iarna">@iarna</a>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md3708"></a>
DEPENDENCIES</h3>
<ul>
<li><a href="https://github.com/npm/npm/commit/cb20c7373a32daaccba2c1ad32d0b7e1fc01a681"><code>cb20c73</code></a> <a href="https://github.com/npm/npm/pull/13953">#13953</a> <code>signal-exit@3.0.1</code> (<a href="https://github.com/benjamincoe">@benjamincoe</a>) </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
