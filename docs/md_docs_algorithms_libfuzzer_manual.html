<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fuzzuf: How to use libFuzzer on fuzzuf</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fuzzuf
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">How to use libFuzzer on fuzzuf </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md12362"></a>
Usage</h1>
<div class="fragment"><div class="line">$ fuzzuf libfuzzer [options]</div>
</div><!-- fragment --><p>libFuzzer is an AFL like fuzzing algorithm that discover inputs causing target crashes.</p>
<p>The following command executes the target 10000 times.</p>
<div class="fragment"><div class="line">$ fuzzuf libfuzzer -target=/usr/bin/foo -runs=10000</div>
</div><!-- fragment --><p>This command uses the default input strings as initial inputs.</p>
<p>If initial inputs or dictionaries are available, specify the path by following options.</p>
<div class="fragment"><div class="line">$ fuzzuf libfuzzer -target=/usr/bin/foo -runs=10000 -input=/path/to/inputs -dict=/path/to/dictionary</div>
</div><!-- fragment --><p>One file in the input directory is loaded as one initial input data. The dictionary file must have AFL compatible dictionary format.</p>
<p>See also <a href="https://github.com/google/afl/blob/master/dictionaries/README.dictionaries">AFL dictionary format description</a> and <a href="https://llvm.org/docs/LibFuzzer.html#dictionaries">LLVM's description on AFL dictionary format</a>.</p>
<p>It is also possible to load inputs and dictionaries from multiple directories.</p>
<div class="fragment"><div class="line">$ fuzzuf libfuzzer -target=/usr/bin/foo -runs=10000 -input=/path/to/first_inputs -input=/path/to/second_inputs</div>
</div><!-- fragment --><p>Default output directory is /tmp/fuzzuf-out_dir/crash-&lt;process specific UUID&gt;. The output directory can be changed by -exact_artifact_path=&lt;path&gt;</p>
<div class="fragment"><div class="line">$ fuzzuf libfuzzer -target=/usr/bin/foo -runs=10000 -exact\_artifact\_path=/path/to/output</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md12363"></a>
Options</h1>
<h2><a class="anchor" id="autotoc_md12364"></a>
-target arg</h2>
<p>Mandatory option. Path to the target executable.</p>
<h2><a class="anchor" id="autotoc_md12365"></a>
-help arg</h2>
<p>Print help message (-help=1).</p>
<h2><a class="anchor" id="autotoc_md12366"></a>
-input arg</h2>
<p>Provide a dictionary of input keywords; see <a href="https://llvm.org/docs/LibFuzzer.html#dictionaries">Dictionaries</a>.</p>
<p>(Note: this libFuzzer implementation loads input from the directory. Each file in the directory must contain just one input string with 1 or more length.)</p>
<h2><a class="anchor" id="autotoc_md12367"></a>
-verbosity arg</h2>
<p>Verbosity level, default 1.</p>
<h2><a class="anchor" id="autotoc_md12368"></a>
-entropic arg</h2>
<p>Use entropic mode, default 0.</p>
<h2><a class="anchor" id="autotoc_md12369"></a>
-reduce_depth arg</h2>
<p>Experimental/internal. Reduce depth if mutations lose unique features. Default to 0.</p>
<h2><a class="anchor" id="autotoc_md12370"></a>
-shrink arg</h2>
<p>Replace values on corpus by shorter input with same coverage, default 0.</p>
<h2><a class="anchor" id="autotoc_md12371"></a>
-seed arg</h2>
<p>Random seed. If 0, seed is generated. Default to 0.</p>
<h2><a class="anchor" id="autotoc_md12372"></a>
-runs arg</h2>
<p>Number of individual test runs, -1 (the default) to run indefinitely. If 0, libFuzzer tries to guess a good value based on the corpus and reports it.</p>
<h2><a class="anchor" id="autotoc_md12373"></a>
-max_len arg</h2>
<p>Maximum length of the test input. If 0, libFuzzer tries to guess a good value based on the corpus and reports it. Default to 0.</p>
<h2><a class="anchor" id="autotoc_md12374"></a>
-len_control arg</h2>
<p>Try generating small inputs first, then try larger inputs over time. Specifies the rate at which the length limit is increased (smaller == faster). If 0, immediately try inputs with size up to max_len. Default value is 0, if LLVMFuzzerCustomMutator is used.</p>
<h2><a class="anchor" id="autotoc_md12375"></a>
-timeout arg</h2>
<p>Timeout in seconds (if positive). If one unit runs more than this number of seconds the process will abort. Default to 50 milliseconds.</p>
<h2><a class="anchor" id="autotoc_md12376"></a>
-rss_limit_mb arg</h2>
<p>If non-zero, the fuzzer will exit uponreaching this limit of RSS memory usage. Default to 2 GiB.</p>
<h2><a class="anchor" id="autotoc_md12377"></a>
-malloc_limit_mb arg</h2>
<p>If non-zero, the fuzzer will exit if the target tries to allocate this number of Mb with one malloc call. If zero (default) same limit as rss_limit_mb is applied. Default to 0.</p>
<p>(not implemented yet)</p>
<h2><a class="anchor" id="autotoc_md12378"></a>
-timeout_exitcode arg</h2>
<p>When libFuzzer reports a timeout this exit code will be used. Default to 77.</p>
<p>(not implemented yet)</p>
<h2><a class="anchor" id="autotoc_md12379"></a>
-error_exitcode arg</h2>
<p>When libFuzzer itself reports a bug this exit code will be used. Default to 77.</p>
<p>(not implemented yet)</p>
<h2><a class="anchor" id="autotoc_md12380"></a>
-max_total_time arg</h2>
<p>If positive, indicates the maximal total time in seconds to run the fuzzer. Default to 0.</p>
<p>(not implemented yet)</p>
<h2><a class="anchor" id="autotoc_md12381"></a>
-merge arg</h2>
<p>If 1, the 2-nd, 3-rd, etc corpora will be merged into the 1-st corpus. Only interesting units will be taken. This flag can be used to minimize a corpus. Default to 0.</p>
<h2><a class="anchor" id="autotoc_md12382"></a>
-merge_control_file arg</h2>
<p>Specify a control file used for the merge process. If a merge process gets killed it tries to leave this file in a state suitable for resuming the merge. By default a temporary file will be used.The same file can be used for multistep merge process.</p>
<p>(not implemented yet)</p>
<h2><a class="anchor" id="autotoc_md12383"></a>
-minimize_crash arg</h2>
<p>If 1, minimizes the provided crash input. Use with -runs=N or -max_total_time=N to limit the number attempts. Use with -exact_artifact_path to specify the output. Combine with ASAN_OPTIONS=dedup_token_length=3 (or similar) to ensure that the minimized input triggers the same crash. Default to 0.</p>
<p>(not implemented yet)</p>
<h2><a class="anchor" id="autotoc_md12384"></a>
-reload arg</h2>
<p>Reload the main corpus every &lt;N&gt; seconds to get new units discovered by other processes. If 0, disabled. Default to 0.</p>
<p>(not implemented yet)</p>
<h2><a class="anchor" id="autotoc_md12385"></a>
-jobs arg</h2>
<p>Number of jobs to run. If jobs &gt;= 1 we spawn this number of jobs in separate worker processes with stdout/stderr redirected to fuzz-JOB.log. Default to 0.</p>
<p>(not implemented yet)</p>
<h2><a class="anchor" id="autotoc_md12386"></a>
-workers arg</h2>
<p>Number of simultaneous worker processes to run the jobs. If zero, "min(jobs,NumberOfCpuCores() /2)" is used. Default to 0.</p>
<p>(not implemented yet)</p>
<h2><a class="anchor" id="autotoc_md12387"></a>
-dict arg</h2>
<p>Experimental. Use the dictionary file. Default to no dictionaries.</p>
<h2><a class="anchor" id="autotoc_md12388"></a>
-use_counters arg</h2>
<p>If non-zero, use coverage counters. Default to 0.</p>
<h2><a class="anchor" id="autotoc_md12389"></a>
-reduce_inputs arg</h2>
<p>If non-zero, try to reduce the size of inputs while preserving their full feature sets. Default to 0.</p>
<h2><a class="anchor" id="autotoc_md12390"></a>
-use_value_profile arg</h2>
<p>Experimental. If non-zero, use value profile to guide fuzzing. Default to 0.</p>
<p>(not implemented yet)</p>
<h2><a class="anchor" id="autotoc_md12391"></a>
-only_ascii arg</h2>
<p>If 1, generate only ASCII (isprint+isspace) inputs. Default to 0.</p>
<h2><a class="anchor" id="autotoc_md12392"></a>
-artifact_prefix arg</h2>
<p>Write fuzzing artifacts (crash, timeout, or slow inputs) as file. Default is /tmp/fuzzuf-out_dir/.</p>
<p>(Note: This libFuzzer implementation stores the artifacts in a directory. Each output is stored in different files in the directory.)</p>
<h2><a class="anchor" id="autotoc_md12393"></a>
-exact_artifact_path arg</h2>
<p>Write the single artifact on failure (crash, timeout) as . This overrides -artifact_prefix and will not use checksum in the file name. Do not use the same path for several parallel processes.</p>
<p>(Note: This libFuzzer implementation stores the artifacts in a directory. Each output is stored in different files in the directory.)</p>
<h2><a class="anchor" id="autotoc_md12394"></a>
-print_pcs arg</h2>
<p>If 1, print out newly covered PCs. Default to 0.</p>
<h2><a class="anchor" id="autotoc_md12395"></a>
-print_final_stats arg</h2>
<p>If 1, print statistics at exit. Default to 0.</p>
<h2><a class="anchor" id="autotoc_md12396"></a>
-detect_leaks arg</h2>
<p>If 1, and if LeakSanitizer is enabled try to detect memory leaks during fuzzing (i.e. not only at shut down). Default to 0.</p>
<p>(not implemented yet)</p>
<h2><a class="anchor" id="autotoc_md12397"></a>
-close_fd_mask arg</h2>
<p>If 1, close stdout at startup; if 2, close stderr; if 3, close both. Be careful, this will also close e.g. stderr of asan. Default to 0.</p>
<p>(not implemented yet)</p>
<h2><a class="anchor" id="autotoc_md12398"></a>
-seed_inputs arg</h2>
<p>A comma-separated list of input files to use as an additional seed corpus. Alternatively, an "@" followed by the name of a file containing the comma-separated list.</p>
<p>(not implemented yet)</p>
<h2><a class="anchor" id="autotoc_md12399"></a>
-keep_seed arg</h2>
<p>If 1, keep seed inputs in the corpus even if they do not produce new coverage. When used with |reduce_inputs==1|, the seed inputs will never be reduced. This option can be useful when seeds arenot properly formed for the fuzz target but still have useful snippets. Default to 0.</p>
<p>(not implemented yet)</p>
<h2><a class="anchor" id="autotoc_md12400"></a>
-cross_over arg</h2>
<p>If 1, cross over inputs. Default to 1.</p>
<h2><a class="anchor" id="autotoc_md12401"></a>
-cross_over_uniform_dist arg</h2>
<p>Experimental. If 1, use a uniform probability distribution when choosing inputs to cross over with. Some of the inputs in the corpus may never get chosen for mutation depending on the input mutation scheduling policy. With this flag, all inputs, regardless of the input mutation scheduling policy, can be chosen as an input to cross over with. This can be particularly useful with |keep_seed==1|; all the initial seed inputs, even though they do not increase coverage because they are not properly formed, will still be chosen as an input to cross over with. Default to 0.</p>
<h2><a class="anchor" id="autotoc_md12402"></a>
-mutate_depth arg</h2>
<p>Apply this number of consecutive mutations to each input. Default to 5.</p>
<h2><a class="anchor" id="autotoc_md12403"></a>
-shuffle arg</h2>
<p>Shuffle inputs at startup. Default to 1.</p>
<h2><a class="anchor" id="autotoc_md12404"></a>
-prefer_small arg</h2>
<p>If 1, always prefer smaller inputs during the corpus shuffle. Default to 0.</p>
<h2><a class="anchor" id="autotoc_md12405"></a>
-check_input_sha1 arg</h2>
<p>If 1, ignore files in the input directory whose filename does not match the sha1 hash of the file contents. Default to 0. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
