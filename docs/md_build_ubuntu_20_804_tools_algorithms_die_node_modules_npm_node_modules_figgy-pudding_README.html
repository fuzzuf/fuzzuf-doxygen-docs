<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fuzzuf: figgy-pudding &lt;a href=&quot;https://npm.im/figgy-pudding&quot;&gt;&lt;img src=&quot;https://img.shields.io/npm/v/figgy-pudding.svg&quot; alt=&quot;npm version&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://npm.im/figgy-pudding&quot;&gt;&lt;img src=&quot;https://img.shields.io/npm/l/figgy-pudding.svg&quot; alt=&quot;license&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://travis-ci.org/zkat/figgy-pudding&quot;&gt;&lt;img src=&quot;https://img.shields.io/travis/zkat/figgy-pudding.svg&quot; alt=&quot;Travis&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://ci.appveyor.com/project/zkat/figgy-pudding&quot;&gt;&lt;img src=&quot;https://ci.appveyor.com/api/projects/status/github/zkat/figgy-pudding?svg=true&quot; alt=&quot;AppVeyor&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://coveralls.io/github/zkat/figgy-pudding?branch=latest&quot;&gt;&lt;img src=&quot;https://coveralls.io/repos/github/zkat/figgy-pudding/badge.svg?branch=latest&quot; alt=&quot;Coverage Status&quot;/&gt;&lt;/a&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fuzzuf
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">figgy-pudding <a href="https://npm.im/figgy-pudding"><object type="image/svg+xml" data="https://img.shields.io/npm/v/figgy-pudding.svg" style="pointer-events: none;">npm version</object></a> <a href="https://npm.im/figgy-pudding"><object type="image/svg+xml" data="https://img.shields.io/npm/l/figgy-pudding.svg" style="pointer-events: none;">license</object></a> <a href="https://travis-ci.org/zkat/figgy-pudding"><object type="image/svg+xml" data="https://img.shields.io/travis/zkat/figgy-pudding.svg" style="pointer-events: none;">Travis</object></a> <a href="https://ci.appveyor.com/project/zkat/figgy-pudding"><img src="https://ci.appveyor.com/api/projects/status/github/zkat/figgy-pudding?svg=true" alt="AppVeyor" class="inline"/></a> <a href="https://coveralls.io/github/zkat/figgy-pudding?branch=latest"><object type="image/svg+xml" data="https://coveralls.io/repos/github/zkat/figgy-pudding/badge.svg?branch=latest" style="pointer-events: none;">Coverage Status</object></a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://github.com/zkat/figgy-pudding"><code>figgy-pudding</code></a> is a small JavaScript library for managing and composing cascading options objects &ndash; hiding what needs to be hidden from each layer, without having to do a lot of manual munging and passing of options.</p>
<h2><a class="anchor" id="autotoc_md6857"></a>
The God Object is Dead!</h2>
<h2><a class="anchor" id="autotoc_md6858"></a>
Now Bring Us Some Figgy Pudding!</h2>
<h1><a class="anchor" id="autotoc_md6859"></a>
Install</h1>
<p><code>$ npm install figgy-pudding</code></p>
<h1><a class="anchor" id="autotoc_md6860"></a>
Table of Contents</h1>
<ul>
<li><a href="#example">Example</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#api">API</a><ul>
<li><a href="#figgy-pudding"><code>figgyPudding(spec)</code></a></li>
<li><a href="#pudding-factory"><code>PuddingFactory(values)</code></a><ul>
<li><a href="#opts-get"><code>opts.get()</code></a></li>
<li><a href="#opts-concat"><code>opts.concat()</code></a></li>
<li><a href="#opts-to-json"><code>opts.toJSON()</code></a></li>
<li><a href="#opts-for-each"><code>opts.forEach()</code></a></li>
<li><a href="#opts-symbol-iterator"><code>opts[Symbol.iterator]()</code></a></li>
<li><a href="#opts-entries"><code>opts.entries()</code></a></li>
<li><a href="#opts-keys"><code>opts.keys()</code></a></li>
<li><a href="#opts-values"><code>opts.value()</code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md6861"></a>
Example</h2>
<p>```javascript // print-package.js const fetch = require('./fetch.js') const puddin = require('figgy-pudding')</p>
<p>const PrintOpts = puddin({ json: { default: false } })</p>
<p>async function printPkg (name, opts) { // Expected pattern is to call this in every interface function. If <code>opts</code> is // not passed in, it will automatically create an (empty) object for it. opts = PrintOpts(opts) const uri = <code><a href="https://registry.npmjs.com/${name}">https://registry.npmjs.com/${name}</a></code> const res = await fetch(uri, opts.concat({ // Add or override any passed-in configs and pass them down. log: customLogger })) // The following would throw an error, because it's not in PrintOpts: // console.log(opts.log) if (opts.json) { return res.json() } else { return res.text() } }</p>
<p>console.log(await printPkg('figgy', { // Pass in <em>all</em> configs at the toplevel, as a regular object. json: true, cache: './tmp-cache' })) </p><div class="fragment"><div class="line">```javascript</div>
<div class="line">// fetch.js</div>
<div class="line">const puddin = require(&#39;figgy-pudding&#39;)</div>
<div class="line"> </div>
<div class="line">const FetchOpts = puddin({</div>
<div class="line">  log: { default: require(&#39;npmlog&#39;) },</div>
<div class="line">  cache: {}</div>
<div class="line">})</div>
<div class="line"> </div>
<div class="line">module.exports = async function (..., opts) {</div>
<div class="line">  opts = FetchOpts(opts)</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md6862"></a>
Features</h2>
<ul>
<li>hide options from layer that didn't ask for it</li>
<li>shared multi-layer options</li>
<li>make sure <code>opts</code> argument is available</li>
<li>transparent key access like normal keys, through a <a class="el" href="classProxy.html" title="Do nothing but invoke all child nodes Since the node is not actually &quot;no operation&quot;,...">Proxy</a>. No need for&lt;tt&gt;.get()!</li>
<li>default values</li>
<li>key aliases</li>
<li>arbitrary key filter functions</li>
<li>key/value iteration</li>
<li>serialization</li>
<li>100% test coverage using <code>tap --100</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md6863"></a>
API</h2>
<h3><a class="anchor" id="autotoc_md6864"></a>
&lt;a name="figgy-pudding"&gt;&lt;/a&gt; &lt;tt&gt;&gt; figgyPudding({ key: { default: val } | String }, [opts]) -&gt; PuddingFactory&lt;/tt&gt;</h3>
<p>Defines an Options constructor that can be used to collect only the needed options.</p>
<p>An optional <code>default</code> property for specs can be used to specify default values if nothing was passed in.</p>
<p>If the value for a spec is a string, it will be treated as an alias to that other key.</p>
<h4><a class="anchor" id="autotoc_md6865"></a>
Example</h4>
<div class="fragment"><div class="line">const MyAppOpts = figgyPudding({</div>
<div class="line">  lg: &#39;log&#39;,</div>
<div class="line">  log: {</div>
<div class="line">    default: () =&gt; require(&#39;npmlog&#39;)</div>
<div class="line">  },</div>
<div class="line">  cache: {}</div>
<div class="line">})</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md6866"></a>
&lt;a name="pudding-factory"&gt;&lt;/a&gt; &lt;tt&gt;&gt; PuddingFactory(...providers) -&gt; FiggyPudding{}&lt;/tt&gt;</h3>
<p>Instantiates an options object defined by <code>figgyPudding()</code>, which uses <code>providers</code>, in order, to find requested properties.</p>
<p>Each provider can be either a plain object, a <code>Map</code>-like object (that is, one with a <code>.get()</code> method) or another figgyPudding <code>Opts</code> object.</p>
<p>When nesting <code>Opts</code> objects, their properties will not become available to the new object, but any further nested <code>Opts</code> that reference that property <em>will</em> be able to read from their grandparent, as long as they define that key. Default values for nested <code>Opts</code> parents will be used, if found.</p>
<h4><a class="anchor" id="autotoc_md6867"></a>
Example</h4>
<p>```javascript const ReqOpts = figgyPudding({ follow: {} })</p>
<p>const opts = ReqOpts({ follow: true, log: require('npmlog') })</p>
<p>opts.follow // =&gt; true opts.log // =&gt; Error: ReqOpts does not define <code>log</code></p>
<p>const MoreOpts = figgyPudding({ log: {} }) MoreOpts(opts).log // =&gt; npmlog object (passed in from original plain obj) MoreOpts(opts).follow // =&gt; Error: MoreOpts does not define <code>follow</code> ```</p>
<h3><a class="anchor" id="autotoc_md6868"></a>
&lt;a name="opts-get"&gt;&lt;/a&gt; &lt;tt&gt;&gt; opts.get(key) -&gt; Value&lt;/tt&gt;</h3>
<p>Gets a value from the options object.</p>
<h4><a class="anchor" id="autotoc_md6869"></a>
Example</h4>
<p>```js const opts = MyOpts(config) opts.get('foo') // value of <code>foo</code> opts.foo // Proxy-based access through <code>.get()</code> ```</p>
<h3><a class="anchor" id="autotoc_md6870"></a>
&lt;a name="opts-concat"&gt;&lt;/a&gt; &lt;tt&gt;&gt; opts.concat(...moreProviders) -&gt; FiggyPudding{}&lt;/tt&gt;</h3>
<p>Creates a new opts object of the same type as <code>opts</code> with additional providers. Providers further to the right shadow providers to the left, with properties in the original <code>opts</code> being shadows by the new providers.</p>
<h4><a class="anchor" id="autotoc_md6871"></a>
Example</h4>
<div class="fragment"><div class="line">const opts = MyOpts({x: 1})</div>
<div class="line">opts.get(&#39;x&#39;) // 1</div>
<div class="line">opts.concat({x: 2}).get(&#39;x&#39;) // 2</div>
<div class="line">opts.get(&#39;x&#39;) // 1 (original opts object left intact)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md6872"></a>
&lt;a name="opts-to-json"&gt;&lt;/a&gt; &lt;tt&gt;&gt; opts.toJSON() -&gt; Value&lt;/tt&gt;</h3>
<p>Converts <code>opts</code> to a plain, JSON-stringifiable JavaScript value. Used internally by JavaScript to get <code>JSON.stringify()</code> working.</p>
<p>Only keys that are readable by the current pudding type will be serialized.</p>
<h4><a class="anchor" id="autotoc_md6873"></a>
Example</h4>
<div class="fragment"><div class="line">const opts = MyOpts({x: 1})</div>
<div class="line">opts.toJSON() // {x: 1}</div>
<div class="line">JSON.stringify(opts) // &#39;{&quot;x&quot;:1}&#39;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md6874"></a>
&lt;a name="opts-for-each"&gt;&lt;/a&gt; &lt;tt&gt;&gt; opts.forEach((value, key, opts) =&gt; {}, thisArg) -&gt; undefined&lt;/tt&gt;</h3>
<p>Iterates over the values of <code>opts</code>, limited to the keys readable by the current pudding type. <code>thisArg</code> will be used to set the <code>this</code> argument when calling the <code>fn</code>.</p>
<h4><a class="anchor" id="autotoc_md6875"></a>
Example</h4>
<div class="fragment"><div class="line">const opts = MyOpts({x: 1, y: 2})</div>
<div class="line">opts.forEach((value, key) =&gt; console.log(key, &#39;=&#39;, value))</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md6876"></a>
&lt;a name="opts-entries"&gt;&lt;/a&gt; &lt;tt&gt;&gt; opts.entries() -&gt; Iterator&lt;[[key, value], ...]&gt;&lt;/tt&gt;</h3>
<p>Returns an iterator that iterates over the keys and values in <code>opts</code>, limited to the keys readable by the current pudding type. Each iteration returns an array of <code>[key, value]</code>.</p>
<h4><a class="anchor" id="autotoc_md6877"></a>
Example</h4>
<div class="fragment"><div class="line">const opts = MyOpts({x: 1, y: 2})</div>
<div class="line">[...opts({x: 1, y: 2}).entries()] // [[&#39;x&#39;, 1], [&#39;y&#39;, 2]]</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md6878"></a>
&lt;a name="opts-symbol-iterator"&gt;&lt;/a&gt; &lt;tt&gt;&gt; opts[Symbol.iterator]() -&gt; Iterator&lt;[[key, value], ...]&gt;&lt;/tt&gt;</h3>
<p>Returns an iterator that iterates over the keys and values in <code>opts</code>, limited to the keys readable by the current pudding type. Each iteration returns an array of <code>[key, value]</code>. Makes puddings work natively with JS iteration mechanisms.</p>
<h4><a class="anchor" id="autotoc_md6879"></a>
Example</h4>
<div class="fragment"><div class="line">const opts = MyOpts({x: 1, y: 2})</div>
<div class="line">[...opts({x: 1, y: 2})] // [[&#39;x&#39;, 1], [&#39;y&#39;, 2]]</div>
<div class="line">for (let [key, value] of opts({x: 1, y: 2})) {</div>
<div class="line">  console.log(key, &#39;=&#39;, value)</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md6880"></a>
&lt;a name="opts-keys"&gt;&lt;/a&gt; &lt;tt&gt;&gt; opts.keys() -&gt; Iterator&lt;[key, ...]&gt;&lt;/tt&gt;</h3>
<p>Returns an iterator that iterates over the keys in <code>opts</code>, limited to the keys readable by the current pudding type.</p>
<h4><a class="anchor" id="autotoc_md6881"></a>
Example</h4>
<div class="fragment"><div class="line">const opts = MyOpts({x: 1, y: 2})</div>
<div class="line">[...opts({x: 1, y: 2}).keys()] // [&#39;x&#39;, &#39;y&#39;]</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md6882"></a>
&lt;a name="opts-values"&gt;&lt;/a&gt; &lt;tt&gt;&gt; opts.values() -&gt; Iterator&lt;[value, ...]&gt;&lt;/tt&gt;</h3>
<p>Returns an iterator that iterates over the values in <code>opts</code>, limited to the keys readable by the current pudding type.</p>
<h4><a class="anchor" id="autotoc_md6883"></a>
Example</h4>
<p>' </p><div class="fragment"><div class="line">const opts = MyOpts({x: 1, y: 2})</div>
<div class="line">[...opts({x: 1, y: 2}).values()] // [1, 2]</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
